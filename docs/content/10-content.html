<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.20">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joseph Bulbulia">
<meta name="dcterms.date" content="2025-05-13">

<title>Hands On Working With Quarto Manuscript – PSYC 434 Conducting Research Across Cultures: Trimester 1, 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-6b83053bd867e91890e3c09412db0bb7.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-b150b11e25d71d79f94868488eae0a4a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">PSYC 434 Conducting Research Across Cultures: Trimester 1, 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../content/course-outline.html"> 
<span class="menu-text">Course Outline</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-content" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Content</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-content">    
        <li>
    <a class="dropdown-item" href="../content/glossary.pdf">
 <span class="dropdown-text">Glossary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/course-outline.html">
 <span class="dropdown-text">Course Outline</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/01-content.html">
 <span class="dropdown-text">Week 1: Course Introduction - R (installing packages)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/02-content.html">
 <span class="dropdown-text">Week 2: Causal Diagrams - Elementary Structures and Rules - R (using the interface)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/03-content.html">
 <span class="dropdown-text">Week 3: Causal Diagrams - Confounding Bias - R (regression/simulation)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/04-content.html">
 <span class="dropdown-text">Week 4: Causal Diagrams - Interaction, Measurement Bias, Selection Bias - R (regression/simulation)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/05-content.html">
 <span class="dropdown-text">Week 5: Causal Inference - Average Treatment Effects - R (regression/simulation: ATE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/06-content.html">
 <span class="dropdown-text">Week 6: Conditional Average Treatment Effects (CATE) - R (regression/simulation: ATE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/07-quiz.html">
 <span class="dropdown-text">Week 7: In Class Test</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/08-content.html">
 <span class="dropdown-text">Week 8: Estimation of ATE and CATE using machine learning - R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/09-content.html">
 <span class="dropdown-text">Week 9: Theoretically postulated Subgroups analysis- R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/10-content.html">
 <span class="dropdown-text">Week 10: Hands On: Writing Up Your Analysis: Quarto Documents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/11-content.html">
 <span class="dropdown-text">Week 11: Measurement: Factor Analysis, CFA, MultiGroup CFA, Partial Invariance/ And How These Approaches Fail</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../content/12-content.html">
 <span class="dropdown-text">Week 12: Student Presentations</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Hands On Working With Quarto Manuscript</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Joseph Bulbulia <a href="mailto:joseph.bulbulia@vuw.ac.nz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-5861-2056" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Victoria University of Wellington, New Zealand
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 13, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#part-1-quarto-manuscripts" id="toc-part-1-quarto-manuscripts" class="nav-link active" data-scroll-target="#part-1-quarto-manuscripts">Part 1: Quarto manuscripts</a></li>
  <li><a href="#code-review-your-analysis" id="toc-code-review-your-analysis" class="nav-link" data-scroll-target="#code-review-your-analysis">Code review: YOUR analysis</a></li>
  <li><a href="#quarto-with-boilerplate" id="toc-quarto-with-boilerplate" class="nav-link" data-scroll-target="#quarto-with-boilerplate">Quarto with <code>boilerplate</code></a>
  <ul class="collapse">
  <li><a href="#script-0-set-up-your-library" id="toc-script-0-set-up-your-library" class="nav-link" data-scroll-target="#script-0-set-up-your-library">Script 0: Set up your library/</a></li>
  <li><a href="#script-1-addingrevising-measures" id="toc-script-1-addingrevising-measures" class="nav-link" data-scroll-target="#script-1-addingrevising-measures">Script 1: Adding/Revising Measures</a></li>
  <li><a href="#script-3-setting-up-your-manuscript-document" id="toc-script-3-setting-up-your-manuscript-document" class="nav-link" data-scroll-target="#script-3-setting-up-your-manuscript-document">Script 3: Setting Up Your Manuscript Document</a></li>
  <li><a href="#what-you-have-learned" id="toc-what-you-have-learned" class="nav-link" data-scroll-target="#what-you-have-learned">What You Have Learned</a></li>
  <li><a href="#frequently-asked-questions" id="toc-frequently-asked-questions" class="nav-link" data-scroll-target="#frequently-asked-questions">Frequently Asked Questions</a>
  <ul class="collapse">
  <li><a href="#do-i-need-to-use-quarto-for-making-my-report" id="toc-do-i-need-to-use-quarto-for-making-my-report" class="nav-link" data-scroll-target="#do-i-need-to-use-quarto-for-making-my-report">Do I need to use <code>quarto</code> for making my report?</a></li>
  <li><a href="#i-cannot-save-or-retrieve-files-from-folders" id="toc-i-cannot-save-or-retrieve-files-from-folders" class="nav-link" data-scroll-target="#i-cannot-save-or-retrieve-files-from-folders">I cannot save or retrieve files from folders</a></li>
  <li><a href="#i-cannot-run-margot_causal_forest_parallel" id="toc-i-cannot-run-margot_causal_forest_parallel" class="nav-link" data-scroll-target="#i-cannot-run-margot_causal_forest_parallel">I cannot run <code>margot_causal_forest_parallel()</code></a></li>
  <li><a href="#i-cannot-run-margot_flip_forests_parallel" id="toc-i-cannot-run-margot_flip_forests_parallel" class="nav-link" data-scroll-target="#i-cannot-run-margot_flip_forests_parallel">I cannot run <code>margot_flip_forests_parallel()</code></a></li>
  <li><a href="#my-r-code-is-not-working" id="toc-my-r-code-is-not-working" class="nav-link" data-scroll-target="#my-r-code-is-not-working">My R code is not working</a></li>
  <li><a href="#i-do-not-know-how-margot-functions-work" id="toc-i-do-not-know-how-margot-functions-work" class="nav-link" data-scroll-target="#i-do-not-know-how-margot-functions-work">I do not know how <code>margot</code> functions work</a></li>
  <li><a href="#what-is-the-recommended-workflow-for-investigating-heterogeneity" id="toc-what-is-the-recommended-workflow-for-investigating-heterogeneity" class="nav-link" data-scroll-target="#what-is-the-recommended-workflow-for-investigating-heterogeneity">What is the recommended workflow for investigating heterogeneity?</a></li>
  <li><a href="#i-cannot-create-a-quarto-document" id="toc-i-cannot-create-a-quarto-document" class="nav-link" data-scroll-target="#i-cannot-create-a-quarto-document">I cannot create a <code>quarto</code> document</a></li>
  <li><a href="#i-cannot-render-the-quarto-document-as-pdf" id="toc-i-cannot-render-the-quarto-document-as-pdf" class="nav-link" data-scroll-target="#i-cannot-render-the-quarto-document-as-pdf">I cannot render the <code>quarto</code> document as PDF</a></li>
  <li><a href="#is-it-plagiarism-to-use-the-boiler-plate-outputs-verbatim" id="toc-is-it-plagiarism-to-use-the-boiler-plate-outputs-verbatim" class="nav-link" data-scroll-target="#is-it-plagiarism-to-use-the-boiler-plate-outputs-verbatim">Is it plagiarism to use the boiler-plate outputs verbatim?</a></li>
  <li><a href="#i-do-not-have-a-boiler-plate-template-used-in-the-example-script" id="toc-i-do-not-have-a-boiler-plate-template-used-in-the-example-script" class="nav-link" data-scroll-target="#i-do-not-have-a-boiler-plate-template-used-in-the-example-script">I do not have a boiler-plate template used in the example script</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="part-1-quarto-manuscripts" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="part-1-quarto-manuscripts">Part 1: Quarto manuscripts</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Required</strong> Download Quarto here: - Use the <code>prelease</code> version: https://quarto.org/docs/download/ <strong>Optional</strong> - <span class="citation" data-cites="Bulbulia2024PracticalGuide">(<a href="#ref-Bulbulia2024PracticalGuide" role="doc-biblioref">Bulbulia 2024</a>)</span> <a href="https://osf.io/preprints/psyarxiv/uyg3d">link</a> - <span class="citation" data-cites="hoffman2023">(<a href="#ref-hoffman2023" role="doc-biblioref">Hoffman et al. 2023</a>)</span> <a href="https://arxiv.org/pdf/2304.09460.pdf">link</a></p>
</div>
</div>
<div class="no-row-height column-margin column-container"><div id="ref-hoffman2023" class="csl-entry" role="listitem">
Hoffman, Katherine L., Diego Salazar-Barreto, Kara E. Rudolph, and Iván Díaz. 2023. <span>“Introducing Longitudinal Modified Treatment Policies: A Unified Framework for Studying Complex Exposures,”</span> April. <a href="https://doi.org/10.48550/arXiv.2304.09460">https://doi.org/10.48550/arXiv.2304.09460</a>.
</div></div><div class="no-row-height column-margin column-container"><div id="ref-Bulbulia2024PracticalGuide" class="csl-entry" role="listitem">
Bulbulia, J. A. 2024. <span>“A Practical Guide to Causal Inference in Three-Wave Panel Studies.”</span> OSF. <a href="https://doi.org/10.31234/osf.io/uyg3d">https://doi.org/10.31234/osf.io/uyg3d</a>.
</div></div><div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key concepts
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Entering bibliographic details</li>
<li>Writing up your manuscript</li>
</ul>
</div>
</div>
</section>
<section id="code-review-your-analysis" class="level1">
<h1>Code review: YOUR analysis</h1>
<ul>
<li>Create a new Rstudio project</li>
<li>Modify <em>these</em> scripts</li>
</ul>
<div class="callout-note-script-0">
<p><a href="../laboratory/lab-10/00-setup-L10.R">Download full lab scripts 0</a></p>
</div>
<div class="callout-note-script-1">
<p><a href="../laboratory/ ../laboratory/lab-10/01-init-L10.R">Download full lab scripts 1</a></p>
</div>
<div class="callout-note-script-2">
<p><a href="../laboratory/lab-10/02-make-wide-L10.R">Download full lab scripts 2</a></p>
</div>
<div class="callout-note-script-3">
<p><a href="../laboratory/lab-10/03-models-L10-v3.R">Download full lab scripts 3</a></p>
</div>
</section>
<section id="quarto-with-boilerplate" class="level1 page-columns page-full">
<h1>Quarto with <code>boilerplate</code></h1>
<div class="callout-quarto-manuscript-template">
<p><a href="../quarto/initial_quarto_document.docx">Download Quarto Template</a></p>
</div>
<section id="script-0-set-up-your-library" class="level2">
<h2 class="anchored" data-anchor-id="script-0-set-up-your-library">Script 0: Set up your library/</h2>
<p>Note – rerun this script if you are missing updated templates, as they have been updated 23 May 2025</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># script 00: read initial boilerplate data (for students)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load required packages --------------------------------------------------</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"boilerplate"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"devtools"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(<span class="st">"devtools"</span>)  <span class="co"># install devtools if missing</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"go-bayes/boilerplate"</span>)  <span class="co"># install boilerplate</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boilerplate)  <span class="co"># manage boilerplate data</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cli)          <span class="co"># friendly messages</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)         <span class="co"># project paths</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fs)           <span class="co"># file system utilities</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure correct boilerplate version --------------------------------------</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>min_version <span class="ot">&lt;-</span> <span class="st">"1.0.43"</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">"boilerplate"</span>) <span class="sc">&lt;</span> min_version) {</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"please install boilerplate &gt;= "</span>, min_version, <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"  devtools::install_github('go-bayes/boilerplate')"</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"boilerplate loaded ✔"</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># create local data folders ------------------------------------------------</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>path_data   <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"example_boilerplate_data"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>path_quarto <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"quarto"</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(path_data)    <span class="co"># create data folder if needed</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h2</span>(<span class="st">"data folder ready ✔"</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co"># import student boilerplate data ------------------------------------------</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>load_student_boilerplate <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  base_url   <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/go-bayes/templates/main/student_boilerplate_data/"</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"measures"</span>, <span class="st">"methods"</span>, <span class="st">"results"</span>, <span class="st">"discussion"</span>, <span class="st">"appendix"</span>, <span class="st">"template"</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  cli<span class="sc">::</span><span class="fu">cli_text</span>(<span class="st">"loading student boilerplate data from GitHub..."</span>)</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  student_db <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (cat <span class="cf">in</span> categories) {</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cli_text</span>(<span class="st">"  - loading {cat} database..."</span>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    rds_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, cat, <span class="st">"_db.rds"</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    student_db[[cat]] <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">readRDS</span>(<span class="fu">url</span>(rds_url)),</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>        cli<span class="sc">::</span><span class="fu">cli_alert_warning</span>(<span class="st">"failed to load {cat}: {e$message}"</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="fu">list</span>()  <span class="co"># fallback empty list</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  cli<span class="sc">::</span><span class="fu">cli_text</span>(<span class="st">"successfully loaded {length(categories)} categories"</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  student_db</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>student_unified_db <span class="ot">&lt;-</span> <span class="fu">load_student_boilerplate</span>()</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co"># save imported data -------------------------------------------------------</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="fu">boilerplate_save</span>(</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  student_unified_db,</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_path     =</span> path_data,</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">create_backup =</span> <span class="cn">FALSE</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(student_unified_db<span class="sc">$</span>discussion<span class="sc">$</span>strengths<span class="sc">$</span>strengths_grf_long)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"data saved ✔"</span>)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co"># set up bibliography and APA-7 template -----------------------------------</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">"quarto"</span>)  <span class="co"># for title.tex</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"https://raw.githubusercontent.com/go-bayes/templates/refs/heads/main/quarto/title.tex"</span>,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"quarto/title.tex"</span>,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode     =</span> <span class="st">"wb"</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">"bibliography"</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">"csl"</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"https://raw.githubusercontent.com/go-bayes/templates/refs/heads/main/bib/references.bib"</span>,</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"quarto/references.bib"</span>,</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode     =</span> <span class="st">"wb"</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"https://raw.githubusercontent.com/go-bayes/templates/refs/heads/main/csl/apa-7.csl"</span>,</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"quarto/apa7.csl"</span>,</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode     =</span> <span class="st">"wb"</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"bibliography and CSL setup complete ✔"</span>)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="co"># end of script: do not rerun this file ------------------------------------</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(student_unified_db<span class="sc">$</span>methods<span class="sc">$</span>analytic_approach<span class="sc">$</span>general_approach_cate_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Type <code>y</code> when R asks whether to overwrite the boilerplate files; this replaces them with the latest versions. Press <code>n</code> (or just hit Enter) to keep what you already have.</p>
<p>Your own edits—such as custom rows in the measures table – are stored elsewhere, so they will not be overwritten. One tap, no tears.</p>
<p>Take-away: <code>y</code> refreshes the templates; <code>n</code> preserves the status quo.</p>
</div>
</div>
<p>This is how the the printout in your R console should look (depending on how recently you’ve run your script):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># save imported data -------------------------------------------------------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> <span class="fu">boilerplate_save</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   student_unified_db,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">data_path     =</span> path_data,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">create_backup =</span> <span class="cn">FALSE</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> )</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>ℹ preparing to save <span class="dv">6</span> databases</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>ℹ processing measures <span class="fu">database</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> measures database</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>ℹ saving measures database to <span class="sc">/</span>Users<span class="sc">/</span>your_machine_path<span class="sc">-</span><span class="er">/</span>example_boilerplate_data<span class="sc">/</span>measures_db.rds</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>✔ saved measures database</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>ℹ processing methods <span class="fu">database</span> (<span class="dv">2</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">1</span> new entries will be added<span class="sc">:</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">+</span> student_target_population</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span> <span class="dv">2</span> entries will be removed<span class="sc">:</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> target_population</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> sample</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>Save methods database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>ℹ saving methods database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>methods_db.rds</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>✔ saved methods database</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>ℹ processing results <span class="fu">database</span> (<span class="dv">3</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> results database</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>ℹ saving results database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>results_db.rds</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>✔ saved results database</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>ℹ processing discussion <span class="fu">database</span> (<span class="dv">4</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">2</span> existing entries will be modified<span class="sc">:</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_authors_statement</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_ethics</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>Save discussion database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>ℹ saving discussion database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>discussion_db.rds</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>✔ saved discussion database</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>ℹ processing appendix <span class="fu">database</span> (<span class="dv">5</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> appendix database</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>ℹ saving appendix database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>appendix_db.rds</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>✔ saved appendix database</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>ℹ processing template <span class="fu">database</span> (<span class="dv">6</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> template database</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>ℹ saving template database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>template_db.rds</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>✔ saved template database</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>✔ successfully saved all <span class="dv">6</span> databases</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="script-1-addingrevising-measures" class="level2">
<h2 class="anchored" data-anchor-id="script-1-addingrevising-measures">Script 1: Adding/Revising Measures</h2>
<p>Note – rerun this script if you are missing updated templates, as they have been updated 23 May 2025</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># script 01: add or revise measures (for students)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load required packages --------------------------------------------------</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"boilerplate"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"devtools"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(<span class="st">"devtools"</span>)  <span class="co"># install devtools if missing</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"go-bayes/boilerplate"</span>)  <span class="co"># install boilerplate</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boilerplate)  <span class="co"># tools for measure management</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cli)          <span class="co"># user-friendly messages</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)         <span class="co"># project-friendly file paths</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure correct boilerplate version --------------------------------------</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">"boilerplate"</span>) <span class="sc">&lt;</span> <span class="st">"1.0.41"</span>) {</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"please install boilerplate &gt;= 1.0.41: \</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="st">       devtools::install_github('go-bayes/boilerplate')"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"boilerplate loaded ✔"</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># define data paths --------------------------------------------------------</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>path_src   <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"example_boilerplate_data"</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>path_final <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"final_boilerplate_data"</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># create final data directory if needed -----------------------------------</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(path_final)) {</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(path_final)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"data folder ready ✔"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># import unified database --------------------------------------------------</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>unified_db <span class="ot">&lt;-</span> <span class="fu">boilerplate_import</span>(<span class="at">data_path =</span> path_src)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co"># save a copy to avoid overwriting original --------------------------------</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="fu">boilerplate_save</span>(</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  unified_db,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_path   =</span> path_final,</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_file =</span> <span class="st">"unified_db"</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h2</span>(<span class="st">"database imported and saved ✔"</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect structure and existing measures ----------------------------------</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(unified_db, <span class="at">max.level =</span> <span class="dv">2</span>)     <span class="co"># glance at top-level structure</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(unified_db<span class="sc">$</span>measures))  <span class="co"># list defined measures</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="co"># example: check for a specific measure ------------------------------------</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>measure_name <span class="ot">&lt;-</span> <span class="st">"emp_job_satisfaction"</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.null</span>(unified_db<span class="sc">$</span>measures[[measure_name]])) {</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  cli<span class="sc">::</span><span class="fu">cli_alert_info</span>(<span class="st">"{measure_name} not defined yet"</span>)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(unified_db<span class="sc">$</span>measures[[measure_name]])</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="co"># add a new measure --------------------------------------------------------</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>unified_db<span class="sc">$</span>measures[[measure_name]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">name        =</span> <span class="st">"Job Satisfaction"</span>,</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">description =</span> <span class="st">"job satisfaction was measured with a single item."</span>,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">reference   =</span> <span class="st">"[@eisenbarth2022aspects]"</span>,</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">waves       =</span> <span class="st">"1-present"</span>,</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">keywords    =</span> <span class="fu">c</span>(<span class="st">"employment"</span>, <span class="st">"mental health"</span>),</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">items       =</span> <span class="fu">list</span>(<span class="st">"how satisfied are you with your current job?"</span>)</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>unified_db<span class="sc">$</span>measures[[cyberbulling]] <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="co"># use the measure name in `colnames(df_nz_long)`</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># note that cyberbulling is not actually in our simulated dataset </span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this is just an llustration</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">name        =</span> <span class="st">"Cyberbulling"</span>,</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">description =</span> <span class="st">"Cyberbulling was measured with a single item."</span>,</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">reference   =</span> <span class="st">"wang2019cyberbullying"</span>,</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">waves       =</span> <span class="st">"6-11"</span>,</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">keywords    =</span> <span class="fu">c</span>(<span class="st">"mental health"</span>),</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">items       =</span> <span class="fu">list</span>(<span class="st">"Has someone ever used the internet, a mobile phone, or digital camera to hurt, intimidate or embarrass you?"</span>)</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a><span class="co"># saving a new measure</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>unified_db<span class="sc">$</span>measures[[<span class="st">"pwi"</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">name        =</span> <span class="st">"Personal Well-Being Index"</span>,</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">description =</span> <span class="st">"The Personal Well-Being Index consists of three items, asking 'How satisfied are you with...' "</span>,</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">reference   =</span> <span class="st">"cummins2003development"</span>,</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>  <span class="at">waves       =</span> <span class="st">"1-present"</span>,</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  <span class="at">keywords    =</span> <span class="fu">c</span>(<span class="st">"employment"</span>, <span class="st">"mental health"</span>),</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">items       =</span> <span class="fu">list</span>(<span class="st">"'Your standard of living.'"</span>, <span class="st">"'Your health.'"</span>, <span class="st">"'Your future security.'"</span>, <span class="st">"'Your personal relationships.'"</span>)</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="co"># save with backup ---------------------------------------------------------</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="fu">boilerplate_save</span>(</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>  unified_db,</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_path     =</span> path_final,</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>  <span class="at">create_backup =</span> <span class="cn">TRUE</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h2</span>(<span class="st">"new measure added and saved ✔"</span>)</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="co"># revise an existing measure ------------------------------------------------</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>revise_name <span class="ot">&lt;-</span> <span class="st">"family_time_binary"</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h1</span>(<span class="st">"revising {revise_name}"</span>)</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a><span class="co"># use modifyList to update only changed fields</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>unified_db<span class="sc">$</span>measures[[revise_name]] <span class="ot">&lt;-</span> <span class="fu">modifyList</span>(</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>  unified_db<span class="sc">$</span>measures[[revise_name]],</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">name        =</span> <span class="st">"Family Time (binary)"</span>,</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">"code string (binary): 0 = none, 1 = any time"</span>,</span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">reference   =</span> <span class="st">"@sibley2020"</span>,</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">waves       =</span> <span class="st">"10-13"</span>,</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">keywords    =</span> <span class="fu">c</span>(<span class="st">"cooperation"</span>)</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a><span class="co"># view revised measure ------------------------------------------------------</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(unified_db<span class="sc">$</span>measures[[revise_name]])</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a><span class="co"># save all changes -----------------------------------------------------------</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a><span class="fu">boilerplate_save</span>(</span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>  unified_db,</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_path =</span> path_final,</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>  <span class="at">confirm   =</span> <span class="cn">TRUE</span></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>cli<span class="sc">::</span><span class="fu">cli_h2</span>(<span class="st">"measure revised and saved ✔"</span>)</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a><span class="co"># to reload updated database, uncomment the following line --------------</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a><span class="co"># unified_db &lt;- boilerplate_import(data_path = path_final)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>remember to type ‘y’ to save changes</li>
</ul>
</div>
</div>
<p>When re-running your scripts, the printout should allow you to save to your working database folder. When saving tick ‘y’</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># save a copy to avoid overwriting original --------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> <span class="fu">boilerplate_save</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   unified_db,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">data_path   =</span> path_final,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">output_file =</span> <span class="st">"unified_db"</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> )</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>ℹ preparing to save <span class="dv">6</span> databases</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>ℹ processing measures <span class="fu">database</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> measures database</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>ℹ saving measures database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>measures_db.rds</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>✔ saved measures database</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>ℹ processing methods <span class="fu">database</span> (<span class="dv">2</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">1</span> new entries will be added<span class="sc">:</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">+</span> student_target_population</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span> <span class="dv">2</span> entries will be removed<span class="sc">:</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> target_population</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> sample</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>Save methods database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>ℹ created backup at<span class="sc">:</span> <span class="er">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>methods_db.rds<span class="fl">.20250523</span>_131930.bak</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>ℹ saving methods database to  <span class="sc">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>methods_db.rds</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>✔ saved methods database</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>ℹ processing results <span class="fu">database</span> (<span class="dv">3</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> results database</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>ℹ saving results database to  <span class="sc">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>results_db.rds</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>✔ saved results database</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>ℹ processing discussion <span class="fu">database</span> (<span class="dv">4</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">2</span> existing entries will be modified<span class="sc">:</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_authors_statement</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_ethics</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>Save discussion database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>ℹ created backup at<span class="sc">:</span> <span class="er">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>discussion_db.rds<span class="fl">.20250523</span>_131933.bak</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>ℹ saving discussion database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>discussion_db.rds</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>✔ saved discussion database</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>ℹ processing appendix <span class="fu">database</span> (<span class="dv">5</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> appendix database</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>ℹ saving appendix database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>appendix_db.rds</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>✔ saved appendix database</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>ℹ processing template <span class="fu">database</span> (<span class="dv">6</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> template database</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>ℹ saving template database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>template_db.rds</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>✔ saved template database</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>✔ successfully saved all <span class="dv">6</span> databases</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="script-3-setting-up-your-manuscript-document" class="level2">
<h2 class="anchored" data-anchor-id="script-3-setting-up-your-manuscript-document">Script 3: Setting Up Your Manuscript Document</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>save this document as a <code>.qmd</code> file in a directory called ‘quarto’ (in your rstudio project)</li>
<li><ul>
<li>to render a document click ‘Render’</li>
</ul></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Your Title"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>abstract<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">**</span>Background<span class="sc">**</span><span class="er">:</span> (Brief few sentences)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">**</span>Objectives<span class="sc">**</span><span class="er">:</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fl">1.</span> Estimate the causal effect of YOUR EXPOSURE on YOUR OUTCOMES measured one year later.</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2.</span> Evaluate whether these effects vary across the population.</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fl">3.</span> Provide policy guidance on which individuals might benefit most.</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">**</span>Method<span class="sc">**</span><span class="er">:</span> We conducted a three<span class="sc">-</span>wave retrospective cohort <span class="fu">study</span> (waves XX<span class="sc">-</span>XXX, October XXXX<span class="sc">--</span>October XXXX) using data from the New Zealand Attitudes and Values Study, a nationally representative panel. Participants were eligible <span class="cf">if</span> they participated <span class="cf">in</span> the NZAVS <span class="cf">in</span> the baseline <span class="fu">wave</span> (XXXX, were under the age of <span class="dv">62</span>, and were employed <span class="sc">&gt;</span> <span class="dv">20</span> hours per week. We defined the exposure <span class="fu">as</span> (XXXX  <span class="sc">&gt;</span> NUMBER on a <span class="dv">1-7</span> Likert <span class="fu">Scale</span> (<span class="dv">1</span> <span class="ot">=</span> yes, <span class="dv">0</span> <span class="ot">=</span> no)). To address attrition, we applied inverse probability of censoring weights; to improve external validity, we applied weighted to the population distribution of Age, Ethnicity, and Gender. We computed expected mean outcomes <span class="cf">for</span> the population <span class="cf">in</span> each exposure <span class="fu">condition</span> (high XXXX<span class="sc">/</span>low XXXXX). Under standard causal assumptions of unconfoundedness, the contrast provides an unbiased average treatment effect. We then used causal forests to detect heterogeneity <span class="cf">in</span> these effects and employed policy tree algorithms to identify <span class="fu">individuals</span> (<span class="st">"strong responders"</span>) likely to experience the greatest benefits.</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">**</span>Results<span class="sc">**</span><span class="er">:</span>   Increasing XXXXX leads to XXXXX. Heterogeneous responses <span class="fu">to</span> (e.g. <span class="sc">*</span>Forgiveness<span class="sc">*</span>, <span class="sc">*</span>Personal Well<span class="sc">-</span>Being<span class="sc">*</span>, and <span class="sc">*</span>Life<span class="sc">-</span>Satisfaction<span class="sc">*</span>...) reveal structural variability <span class="cf">in</span> subpopulations...</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">**</span>Implications<span class="sc">**</span><span class="er">:</span> (Brief few sentences)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">**</span>Keywords<span class="sc">**</span><span class="er">:</span> <span class="er">*</span>Causal Inference<span class="sc">*</span>;  <span class="sc">*</span>Cross<span class="sc">-</span>validation<span class="sc">*</span>; <span class="sc">*</span>Distress<span class="sc">*</span>; <span class="sc">*</span>Employment<span class="sc">*</span>; <span class="sc">*</span>Longitudinal<span class="sc">*</span>; <span class="sc">*</span>Machine sLearning<span class="sc">*</span>; <span class="sc">*</span>Religion<span class="sc">*</span>; <span class="sc">*</span>Semi<span class="sc">-</span>parametric<span class="sc">*</span>; <span class="sc">*</span>Targeted Learning<span class="sc">*</span>.</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span> name<span class="sc">:</span> YOUR NAME</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    affiliation<span class="sc">:</span> Victoria University of Wellington, New Zealand</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    email<span class="sc">:</span> XXXXX</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    corresponding<span class="sc">:</span> yes</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>keywords<span class="sc">:</span> [Causal Inference, Cross<span class="sc">-</span>validation,...]</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>editor_options<span class="sc">:</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  chunk_output_type<span class="sc">:</span> console</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"last-modified"</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>fontfamily<span class="sc">:</span> libertinus</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>bibliography<span class="sc">:</span> references.bib</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>csl<span class="sc">:</span> apa7.csl</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  docx<span class="sc">:</span> <span class="co"># comment this out if you want pdf</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    default<span class="sc">:</span> false  <span class="co"># comment this out if you want pdf</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">-</span>dir<span class="sc">:</span> <span class="st">"quarto"</span>  <span class="co"># or wherever you want to save it  # comment this out if you want pdf</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  pdf<span class="sc">:</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    pdf<span class="sc">-</span>engine<span class="sc">:</span> lualatex</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    sanitise<span class="sc">:</span> true</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    keep<span class="sc">-</span>tex<span class="sc">:</span> true</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    link<span class="sc">-</span>citations<span class="sc">:</span> true</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    colorlinks<span class="sc">:</span> true</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    documentclass<span class="sc">:</span> article</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    classoption<span class="sc">:</span> [<span class="st">"single column"</span>]</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    lof<span class="sc">:</span> false</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    lot<span class="sc">:</span> false</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    geometry<span class="sc">:</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> <span class="at">top=</span><span class="dv">30</span>mm</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> <span class="at">left=</span><span class="dv">25</span>mm</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> heightrounded</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> <span class="at">headsep=</span><span class="dv">22</span>pt</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> <span class="at">headheight=</span><span class="dv">11</span>pt</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> <span class="at">footskip=</span><span class="dv">33</span>pt</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> ignorehead</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> ignorefoot</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    header<span class="sc">-</span>includes<span class="sc">:</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> \let\oldtabular\tabular</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> \renewcommand{\tabular}{\small\oldtabular}</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> \setlength{\tabcolsep}{<span class="dv">4</span>pt}  <span class="co"># adjust this value as needed</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>execute<span class="sc">:</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>  echo<span class="sc">:</span> false</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>  warning<span class="sc">:</span> false</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>  include<span class="sc">:</span> true</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>  eval<span class="sc">:</span> true</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: setup</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a><span class="at">#| include: false</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="at"># save this file in your project root (e.g. 'quarto/1_setup.R')</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="at"># load here to manage paths</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a><span class="at">dep &lt;- requireNamespace("here", quietly = TRUE)</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="at">if (!dep) install.packages("here")</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="at">library(here)</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a><span class="at"># create required folders</span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a><span class="at">dirs &lt;- c(</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a><span class="at">  here("quarto"),</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a><span class="at">  here("bibliography"),</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a><span class="at">  here("save_directory"),</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="at">  here("csl")</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a><span class="at">for (d in dirs) {</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a><span class="at">  if (!dir.exists(d)) dir.create(d, recursive = TRUE)</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="at"># ensure tinytex for PDF rendering</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a><span class="at">if (!requireNamespace("tinytex", quietly = TRUE)) {</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a><span class="at">  install.packages("tinytex")</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a><span class="at">  tinytex::install_tinytex()</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a><span class="at"># ensure pacman for package management</span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a><span class="at">if (!requireNamespace("pacman", quietly = TRUE)) {</span></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a><span class="at">  install.packages("pacman")</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a><span class="at"># min version of margot</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a><span class="at">if (packageVersion("margot") &lt; "1.0.52") {</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a><span class="at">  stop(</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a><span class="at">    "please install margot &gt;= 1.0.52 for this workflow</span><span class="sc">\n</span></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="at">       run: </span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a><span class="at">       devtools::install_github('go-bayes/margot')</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a><span class="at">"</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a><span class="at"># call library</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a><span class="at">library("margot")</span></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a><span class="at"># check package version</span></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a><span class="at">packageVersion(pkg = "margot")</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="at"># load (and install if needed) all required packages</span></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a><span class="at">pacman::p_load(</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate, shiny, tidyverse,</span></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a><span class="at">  kableExtra, glue, patchwork, stringr,</span></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a><span class="at">  ggplot2, ggeffects, parameters,</span></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a><span class="at">  table1, knitr, extrafont, here, cli</span></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a><span class="at"># load fonts (requires prior extrafont::font_import())</span></span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a><span class="at">if (requireNamespace("extrafont", quietly = TRUE)) {</span></span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a><span class="at">  extrafont::loadfonts(device = "all")</span></span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a><span class="at">} else {</span></span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a><span class="at">  message("'extrafont' not installed; skipping font loading")</span></span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a><span class="at"># reproducibility</span></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a><span class="at">set.seed(123)</span></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a><span class="at"># copy CSL and BibTeX into quarto folder</span></span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a><span class="at">src_files &lt;- list(</span></span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a><span class="at">  c(here("csl", "apa7.csl"),     here("quarto", "apa7.csl")),</span></span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a><span class="at">  c(here("bibliography", "references.bib"), here("quarto", "references.bib"))</span></span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a><span class="at">for (f in src_files) {</span></span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a><span class="at">  if (!file.exists(f[2]) &amp;&amp; file.exists(f[1])) {</span></span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a><span class="at">    file.copy(f[1], f[2])</span></span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a><span class="at">  }</span></span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a><span class="at"># now you're ready to import data and proceed with analysis</span></span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a><span class="at"># e.g.</span></span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a><span class="at"># unified_db &lt;- boilerplate_import(data_path = here("final_boilerplate_data"))</span></span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a><span class="at"># df_grf     &lt;- margot::here_read('df_grf',   here("save_directory"))</span></span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define paths and import data ----------------------------------------</span></span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a><span class="at">push_mods             &lt;- here::here("save_directory")</span></span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a><span class="at">final_boilerplate_data &lt;- here::here("final_boilerplate_data")</span></span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a><span class="at">unified_db            &lt;- boilerplate_import(data_path = final_boilerplate_data)</span></span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a><span class="at"># check paths</span></span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- inspect available boilerplate entries -------------------------------</span></span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a><span class="at">cat(unified_db$methods$confounding_control$vanderweele)</span></span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a><span class="at">cat(unified_db$methods$sample$nzavs)</span></span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a><span class="at">cat(unified_db$methods$causal_intervention$grf_simple_text)</span></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a><span class="at">cat(unified_db$appendix$explain$grf_short)</span></span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- read variable definitions -------------------------------------------</span></span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a><span class="at">baseline_vars           &lt;- margot::here_read("baseline_vars")</span></span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a><span class="at">exposure_var            &lt;- margot::here_read("exposure_var")</span></span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a><span class="at">outcome_vars            &lt;- margot::here_read("outcome_vars")</span></span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define study waves --------------------------------------------------</span></span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a><span class="at">baseline_wave           &lt;- margot::here_read("baseline_wave")</span></span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a><span class="at">exposure_waves          &lt;- margot::here_read("exposure_waves")</span></span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a><span class="at">outcome_wave            &lt;- margot::here_read("outcome_wave")</span></span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a><span class="at"># </span></span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a><span class="at">baseline_wave_glued &lt;- glue::glue(baseline_wave)</span></span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define study parameters ---------------------------------------------</span></span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a><span class="at">study_years             &lt;- "2018-2021"</span></span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a><span class="at">name_exposure           &lt;- here_read("name_exposure")</span></span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a><span class="at">name_outcome_variables  &lt;- "MY OUTCOME VARIABLES IN THIS STUDY"</span></span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a><span class="at">name_exposure_lower     &lt;- tolower(name_exposure)</span></span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a><span class="at">name_exposure_lower</span></span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- templates and thresholds --------------------------------------------</span></span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a><span class="at">eligibility_template    &lt;- "Participants were eligible if they participated in the {baseline wave}"</span></span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a><span class="at">percent_missing_baseline &lt;- margot::here_read("percent_missing_baseline")</span></span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- read tables for manuscript ------------------------------------------</span></span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_baseline  &lt;- margot::here_read("baseline_table")</span></span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_exposures &lt;- margot::here_read("exposure_table")</span></span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_outcomes  &lt;- margot::here_read("outcomes_table")</span></span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a><span class="at">margot_bind_tables_markdown &lt;- margot::here_read("margot_bind_tables_markdown")</span></span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- sample size information --------------------------------------------</span></span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a><span class="at">n_total                  &lt;- margot::here_read("n_total")</span></span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a><span class="at">n_participants           &lt;- here_read("n_participants")</span></span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- variable labels and mappings ----------------------------------------</span></span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a><span class="at">var_labels_measures      &lt;- here_read("var_labels_measures")</span></span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a><span class="at">label_mapping_all        &lt;- here_read("label_mapping_all")</span></span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- plot titles and analysis settings -----------------------------------</span></span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a><span class="at">ate_title                &lt;- here_read("ate_title")</span></span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a><span class="at">flipped_names            &lt;- here_read("flipped_names")</span></span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a><span class="at">flip_outcomes            &lt;- here_read("flip_outcomes")</span></span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a><span class="at">flipped_list             &lt;- paste(flipped_names, collapse = ", ")</span></span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- import data for visualisation --------------------------------------</span></span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a><span class="at">original_df              &lt;- margot::here_read('df_wide', push_mods)</span></span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a><span class="at">df_grf &lt;- margot::here_read('df_grf', push_mods)</span></span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a><span class="at"># co-variates</span></span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a><span class="at">E &lt;- margot::here_read('E', push_mods)</span></span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a><span class="at"># select covariates and drop numeric attributes</span></span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a><span class="at">X &lt;- margot::remove_numeric_attributes(df_grf[E])</span></span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define nice names and regimes ---------------------------------------</span></span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a><span class="at">nice_name_exposure_variable &lt;- stringr::str_to_sentence(name_exposure)</span></span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a><span class="at">name_outcomes_lower          &lt;- "multi-dimensional wellbeing"</span></span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define exposure thresholds and regimes ------------------------------</span></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a><span class="at">lower_cut               &lt;- here_read("lower_cut")</span></span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a><span class="at">upper_cut               &lt;- here_read("upper_cut")</span></span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a><span class="at">threshold               &lt;- here_read("threshold")</span></span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a><span class="at">inverse_threshold       &lt;- here_read("inverse_threshold")</span></span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a><span class="at">scale_range             &lt;- margot::here_read("scale_range")</span></span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a><span class="at"># create and check variables</span></span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a><span class="at">value_exposure = glue::glue( threshold,"", upper_cut,", ", scale_range)</span></span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a><span class="at">value_control = glue::glue(inverse_threshold, upper_cut,", ", scale_range)</span></span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a><span class="at"># regimes</span></span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a><span class="at">name_control_regime_lower &lt;- glue::glue("low {name_exposure_lower}")</span></span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a><span class="at">value_exposure_regime     &lt;- glue::glue("Set {name_exposure} {threshold} {upper_cut} {scale_range}")</span></span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a><span class="at">value_control_regime      &lt;- glue::glue("Set {name_exposure} {inverse_threshold} {upper_cut} {scale_range}")</span></span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a><span class="at">contrast_template         &lt;- "We used causal forests to estimate an average treatment effect as a contrast between *{name_control_regime_lower}* and *{name_exposure_lower}* on {name_outcomes_lower}."</span></span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a><span class="at">contrast_text             &lt;- glue(contrast_template)</span></span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a><span class="at">#chedk</span></span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a><span class="at">contrast_text</span></span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- verify assumptions (positivity) -------------------------------------</span></span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a><span class="at">transition_tables        &lt;- margot::here_read("transition_tables")</span></span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a><span class="at">transition_tables_binary &lt;- here_read("transition_tables_binary")</span></span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-240"><a href="#cb5-240" aria-hidden="true" tabindex="-1"></a><span class="at">baseline_vars</span></span>
<span id="cb5-241"><a href="#cb5-241" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- generate measures text for methods section -------------------------</span></span>
<span id="cb5-242"><a href="#cb5-242" aria-hidden="true" tabindex="-1"></a><span class="at">baseline_measures_text   &lt;- boilerplate_generate_measures(</span></span>
<span id="cb5-243"><a href="#cb5-243" aria-hidden="true" tabindex="-1"></a><span class="at">  variable_heading = "Baseline Covariates",</span></span>
<span id="cb5-244"><a href="#cb5-244" aria-hidden="true" tabindex="-1"></a><span class="at">  variables        = baseline_vars,</span></span>
<span id="cb5-245"><a href="#cb5-245" aria-hidden="true" tabindex="-1"></a><span class="at">  db               = unified_db,</span></span>
<span id="cb5-246"><a href="#cb5-246" aria-hidden="true" tabindex="-1"></a><span class="at">  heading_level    = 3,</span></span>
<span id="cb5-247"><a href="#cb5-247" aria-hidden="true" tabindex="-1"></a><span class="at">  subheading_level = 4,</span></span>
<span id="cb5-248"><a href="#cb5-248" aria-hidden="true" tabindex="-1"></a><span class="at">  print_waves      = FALSE,</span></span>
<span id="cb5-249"><a href="#cb5-249" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mappings   = var_labels_measures</span></span>
<span id="cb5-250"><a href="#cb5-250" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-251"><a href="#cb5-251" aria-hidden="true" tabindex="-1"></a><span class="at">cat(baseline_measures_text)</span></span>
<span id="cb5-252"><a href="#cb5-252" aria-hidden="true" tabindex="-1"></a><span class="at">exposure_measures_text   &lt;- boilerplate_generate_measures(</span></span>
<span id="cb5-253"><a href="#cb5-253" aria-hidden="true" tabindex="-1"></a><span class="at">  variable_heading = "Exposure Variable",</span></span>
<span id="cb5-254"><a href="#cb5-254" aria-hidden="true" tabindex="-1"></a><span class="at">  variables        = name_exposure,</span></span>
<span id="cb5-255"><a href="#cb5-255" aria-hidden="true" tabindex="-1"></a><span class="at">  db               = unified_db,</span></span>
<span id="cb5-256"><a href="#cb5-256" aria-hidden="true" tabindex="-1"></a><span class="at">  heading_level    = 3,</span></span>
<span id="cb5-257"><a href="#cb5-257" aria-hidden="true" tabindex="-1"></a><span class="at">  subheading_level = 4,</span></span>
<span id="cb5-258"><a href="#cb5-258" aria-hidden="true" tabindex="-1"></a><span class="at">  print_waves      = FALSE,</span></span>
<span id="cb5-259"><a href="#cb5-259" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mappings   = var_labels_measures</span></span>
<span id="cb5-260"><a href="#cb5-260" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-261"><a href="#cb5-261" aria-hidden="true" tabindex="-1"></a><span class="at">outcome_measures_text    &lt;- boilerplate_generate_measures(</span></span>
<span id="cb5-262"><a href="#cb5-262" aria-hidden="true" tabindex="-1"></a><span class="at">  variable_heading = "Outcome Variables",</span></span>
<span id="cb5-263"><a href="#cb5-263" aria-hidden="true" tabindex="-1"></a><span class="at">  variables        = outcome_vars,</span></span>
<span id="cb5-264"><a href="#cb5-264" aria-hidden="true" tabindex="-1"></a><span class="at">  db               = unified_db,</span></span>
<span id="cb5-265"><a href="#cb5-265" aria-hidden="true" tabindex="-1"></a><span class="at">  heading_level    = 3,</span></span>
<span id="cb5-266"><a href="#cb5-266" aria-hidden="true" tabindex="-1"></a><span class="at">  subheading_level = 4,</span></span>
<span id="cb5-267"><a href="#cb5-267" aria-hidden="true" tabindex="-1"></a><span class="at">  print_waves      = FALSE,</span></span>
<span id="cb5-268"><a href="#cb5-268" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mappings   = var_labels_measures</span></span>
<span id="cb5-269"><a href="#cb5-269" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-270"><a href="#cb5-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-271"><a href="#cb5-271" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- exposure description from database --------------------------------</span></span>
<span id="cb5-272"><a href="#cb5-272" aria-hidden="true" tabindex="-1"></a><span class="at">measures_exposure        &lt;- glue::glue(unified_db$measures[[name_exposure]]$description)</span></span>
<span id="cb5-273"><a href="#cb5-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-274"><a href="#cb5-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-275"><a href="#cb5-275" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- set plot defaults for ate plots -------------------------------------</span></span>
<span id="cb5-276"><a href="#cb5-276" aria-hidden="true" tabindex="-1"></a><span class="at">base_defaults_binary     &lt;- list(</span></span>
<span id="cb5-277"><a href="#cb5-277" aria-hidden="true" tabindex="-1"></a><span class="at">  type                   = "RD",</span></span>
<span id="cb5-278"><a href="#cb5-278" aria-hidden="true" tabindex="-1"></a><span class="at">  title                  = ate_title,</span></span>
<span id="cb5-279"><a href="#cb5-279" aria-hidden="true" tabindex="-1"></a><span class="at">  e_val_bound_threshold  = 1.2,</span></span>
<span id="cb5-280"><a href="#cb5-280" aria-hidden="true" tabindex="-1"></a><span class="at">  colors                 = c(</span></span>
<span id="cb5-281"><a href="#cb5-281" aria-hidden="true" tabindex="-1"></a><span class="at">    "positive"    = "#E69F00",</span></span>
<span id="cb5-282"><a href="#cb5-282" aria-hidden="true" tabindex="-1"></a><span class="at">    "not reliable"= "grey50",</span></span>
<span id="cb5-283"><a href="#cb5-283" aria-hidden="true" tabindex="-1"></a><span class="at">    "negative"    = "#56B4E9"</span></span>
<span id="cb5-284"><a href="#cb5-284" aria-hidden="true" tabindex="-1"></a><span class="at">  ),</span></span>
<span id="cb5-285"><a href="#cb5-285" aria-hidden="true" tabindex="-1"></a><span class="at">  x_offset               = -0.25,</span></span>
<span id="cb5-286"><a href="#cb5-286" aria-hidden="true" tabindex="-1"></a><span class="at">  x_lim_lo               = -0.25,</span></span>
<span id="cb5-287"><a href="#cb5-287" aria-hidden="true" tabindex="-1"></a><span class="at">  x_lim_hi               = 0.25,</span></span>
<span id="cb5-288"><a href="#cb5-288" aria-hidden="true" tabindex="-1"></a><span class="at">  text_size              = 5,</span></span>
<span id="cb5-289"><a href="#cb5-289" aria-hidden="true" tabindex="-1"></a><span class="at">  linewidth              = 0.75,</span></span>
<span id="cb5-290"><a href="#cb5-290" aria-hidden="true" tabindex="-1"></a><span class="at">  estimate_scale         = 1,</span></span>
<span id="cb5-291"><a href="#cb5-291" aria-hidden="true" tabindex="-1"></a><span class="at">  base_size              = 20, #&lt;- change to make outcome labels bigger or smaller</span></span>
<span id="cb5-292"><a href="#cb5-292" aria-hidden="true" tabindex="-1"></a><span class="at">  point_size             = 4,</span></span>
<span id="cb5-293"><a href="#cb5-293" aria-hidden="true" tabindex="-1"></a><span class="at">  title_size             = 24,</span></span>
<span id="cb5-294"><a href="#cb5-294" aria-hidden="true" tabindex="-1"></a><span class="at">  subtitle_size          = 16,</span></span>
<span id="cb5-295"><a href="#cb5-295" aria-hidden="true" tabindex="-1"></a><span class="at">  legend_text_size       = 10,</span></span>
<span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a><span class="at">  legend_title_size      = 10,</span></span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a><span class="at">  include_coefficients   = FALSE</span></span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- create plot options for outcomes -----------------------------------</span></span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a><span class="at">outcomes_options_all     &lt;- margot_plot_create_options(</span></span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a><span class="at">  title         = ate_title,</span></span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a><span class="at">  base_defaults = base_defaults_binary,</span></span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a><span class="at">  subtitle      = "",</span></span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a><span class="at">  filename_prefix = "grf"</span></span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-307"><a href="#cb5-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-308"><a href="#cb5-308" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- policy tree graph settings -----------------------------------------</span></span>
<span id="cb5-309"><a href="#cb5-309" aria-hidden="true" tabindex="-1"></a><span class="at">decision_tree_defaults  &lt;- list(</span></span>
<span id="cb5-310"><a href="#cb5-310" aria-hidden="true" tabindex="-1"></a><span class="at">  span_ratio         = 0.3,</span></span>
<span id="cb5-311"><a href="#cb5-311" aria-hidden="true" tabindex="-1"></a><span class="at">  text_size          = 3.8,</span></span>
<span id="cb5-312"><a href="#cb5-312" aria-hidden="true" tabindex="-1"></a><span class="at">  y_padding          = 0.25,</span></span>
<span id="cb5-313"><a href="#cb5-313" aria-hidden="true" tabindex="-1"></a><span class="at">  edge_label_offset  = 0.002,</span></span>
<span id="cb5-314"><a href="#cb5-314" aria-hidden="true" tabindex="-1"></a><span class="at">  border_size        = 0.05</span></span>
<span id="cb5-315"><a href="#cb5-315" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-316"><a href="#cb5-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-317"><a href="#cb5-317" aria-hidden="true" tabindex="-1"></a><span class="at">policy_tree_defaults    &lt;- list(</span></span>
<span id="cb5-318"><a href="#cb5-318" aria-hidden="true" tabindex="-1"></a><span class="at">  point_alpha            = 0.5,</span></span>
<span id="cb5-319"><a href="#cb5-319" aria-hidden="true" tabindex="-1"></a><span class="at">  title_size             = 12,</span></span>
<span id="cb5-320"><a href="#cb5-320" aria-hidden="true" tabindex="-1"></a><span class="at">  subtitle_size          = 12,</span></span>
<span id="cb5-321"><a href="#cb5-321" aria-hidden="true" tabindex="-1"></a><span class="at">  axis_title_size        = 12,</span></span>
<span id="cb5-322"><a href="#cb5-322" aria-hidden="true" tabindex="-1"></a><span class="at">  legend_title_size      = 12,</span></span>
<span id="cb5-323"><a href="#cb5-323" aria-hidden="true" tabindex="-1"></a><span class="at">  split_line_color       = "red",</span></span>
<span id="cb5-324"><a href="#cb5-324" aria-hidden="true" tabindex="-1"></a><span class="at">  split_line_alpha       = 0.8,</span></span>
<span id="cb5-325"><a href="#cb5-325" aria-hidden="true" tabindex="-1"></a><span class="at">  split_label_color      = "red",</span></span>
<span id="cb5-326"><a href="#cb5-326" aria-hidden="true" tabindex="-1"></a><span class="at">  split_label_nudge_factor = 0.007</span></span>
<span id="cb5-327"><a href="#cb5-327" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-328"><a href="#cb5-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-329"><a href="#cb5-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-330"><a href="#cb5-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-331"><a href="#cb5-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-332"><a href="#cb5-332" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- load and check model results ---------------------------------------</span></span>
<span id="cb5-333"><a href="#cb5-333" aria-hidden="true" tabindex="-1"></a><span class="at"># takes more time but allows you to flexibly modify plots in the quarto document</span></span>
<span id="cb5-334"><a href="#cb5-334" aria-hidden="true" tabindex="-1"></a><span class="at"># if you use the option comment out this code above</span></span>
<span id="cb5-335"><a href="#cb5-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-336"><a href="#cb5-336" aria-hidden="true" tabindex="-1"></a><span class="at"># takes less time if you used the pre-processed results but a little harder to adjust</span></span>
<span id="cb5-337"><a href="#cb5-337" aria-hidden="true" tabindex="-1"></a><span class="at"># ate_results           &lt;- margot::here_read_qs("ate_results", push_mods)</span></span>
<span id="cb5-338"><a href="#cb5-338" aria-hidden="true" tabindex="-1"></a><span class="at"># margot::margot_size(ate_results)</span></span>
<span id="cb5-339"><a href="#cb5-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-340"><a href="#cb5-340" aria-hidden="true" tabindex="-1"></a><span class="at">models_binary &lt;- margot::here_read_qs("models_binary", push_mods)</span></span>
<span id="cb5-341"><a href="#cb5-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-342"><a href="#cb5-342" aria-hidden="true" tabindex="-1"></a><span class="at"># make ate plots ----------------------------------------------------------</span></span>
<span id="cb5-343"><a href="#cb5-343" aria-hidden="true" tabindex="-1"></a><span class="at">#   ************* NEW - CORRECTION FOR FAMILY-WISE ERROR **********</span></span>
<span id="cb5-344"><a href="#cb5-344" aria-hidden="true" tabindex="-1"></a><span class="at"># then pass to the results</span></span>
<span id="cb5-345"><a href="#cb5-345" aria-hidden="true" tabindex="-1"></a><span class="at">ate_results &lt;- margot_plot(</span></span>
<span id="cb5-346"><a href="#cb5-346" aria-hidden="true" tabindex="-1"></a><span class="at">  models_binary$combined_table, # &lt;- now pass the corrected results.</span></span>
<span id="cb5-347"><a href="#cb5-347" aria-hidden="true" tabindex="-1"></a><span class="at">  options = outcomes_options_all,</span></span>
<span id="cb5-348"><a href="#cb5-348" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping = label_mapping_all,</span></span>
<span id="cb5-349"><a href="#cb5-349" aria-hidden="true" tabindex="-1"></a><span class="at">  include_coefficients = FALSE,</span></span>
<span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a><span class="at">  save_output = FALSE,</span></span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a><span class="at">  order = "evaluebound_asc",</span></span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df = original_df,</span></span>
<span id="cb5-353"><a href="#cb5-353" aria-hidden="true" tabindex="-1"></a><span class="at">  e_val_bound_threshold = 1.2,</span></span>
<span id="cb5-354"><a href="#cb5-354" aria-hidden="true" tabindex="-1"></a><span class="at">  rename_ate = TRUE,</span></span>
<span id="cb5-355"><a href="#cb5-355" aria-hidden="true" tabindex="-1"></a><span class="at">  adjust = "bonferroni", #&lt;- new </span></span>
<span id="cb5-356"><a href="#cb5-356" aria-hidden="true" tabindex="-1"></a><span class="at">  alpha = 0.05 # &lt;- new </span></span>
<span id="cb5-357"><a href="#cb5-357" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-358"><a href="#cb5-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-359"><a href="#cb5-359" aria-hidden="true" tabindex="-1"></a><span class="at"># check</span></span>
<span id="cb5-360"><a href="#cb5-360" aria-hidden="true" tabindex="-1"></a><span class="at">ate_results$plot</span></span>
<span id="cb5-361"><a href="#cb5-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-362"><a href="#cb5-362" aria-hidden="true" tabindex="-1"></a><span class="at"># view</span></span>
<span id="cb5-363"><a href="#cb5-363" aria-hidden="true" tabindex="-1"></a><span class="at">cat(ate_results$interpretation)</span></span>
<span id="cb5-364"><a href="#cb5-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-365"><a href="#cb5-365" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- heterogeneity analysis ---------------------------------------------</span></span>
<span id="cb5-366"><a href="#cb5-366" aria-hidden="true" tabindex="-1"></a><span class="at">models_binary_flipped_all &lt;- here_read_qs("models_binary_flipped_all", push_mods)</span></span>
<span id="cb5-367"><a href="#cb5-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-368"><a href="#cb5-368" aria-hidden="true" tabindex="-1"></a><span class="at"># this is a new function requires margot 1.0.48 or higher</span></span>
<span id="cb5-369"><a href="#cb5-369" aria-hidden="true" tabindex="-1"></a><span class="at"># only useful if you flip labels outcomes -- if so replace "label_mapping_all" </span></span>
<span id="cb5-370"><a href="#cb5-370" aria-hidden="true" tabindex="-1"></a><span class="at"># with "label_mapping_all_flipped" </span></span>
<span id="cb5-371"><a href="#cb5-371" aria-hidden="true" tabindex="-1"></a><span class="at">label_mapping_all_flipped &lt;- margot_reversed_labels(label_mapping_all, </span></span>
<span id="cb5-372"><a href="#cb5-372" aria-hidden="true" tabindex="-1"></a><span class="at">                                                    flip_outcomes)</span></span>
<span id="cb5-373"><a href="#cb5-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-374"><a href="#cb5-374" aria-hidden="true" tabindex="-1"></a><span class="at"># optional</span></span>
<span id="cb5-375"><a href="#cb5-375" aria-hidden="true" tabindex="-1"></a><span class="at"># could be used in an appendix</span></span>
<span id="cb5-376"><a href="#cb5-376" aria-hidden="true" tabindex="-1"></a><span class="at"># result_ominbus_hetero     &lt;- margot_omnibus_hetero_test(</span></span>
<span id="cb5-377"><a href="#cb5-377" aria-hidden="true" tabindex="-1"></a><span class="at">#   models_binary_flipped_all,</span></span>
<span id="cb5-378"><a href="#cb5-378" aria-hidden="true" tabindex="-1"></a><span class="at">#   label_mapping  = label_mapping_all_flipped,</span></span>
<span id="cb5-379"><a href="#cb5-379" aria-hidden="true" tabindex="-1"></a><span class="at">#   alpha          = 0.05,</span></span>
<span id="cb5-380"><a href="#cb5-380" aria-hidden="true" tabindex="-1"></a><span class="at">#   detail_level   = "standard",</span></span>
<span id="cb5-381"><a href="#cb5-381" aria-hidden="true" tabindex="-1"></a><span class="at">#   format         = "markdown"</span></span>
<span id="cb5-382"><a href="#cb5-382" aria-hidden="true" tabindex="-1"></a><span class="at"># )</span></span>
<span id="cb5-383"><a href="#cb5-383" aria-hidden="true" tabindex="-1"></a><span class="at"># result_ominbus_hetero$summary_table |&gt; kbl("markdown")</span></span>
<span id="cb5-384"><a href="#cb5-384" aria-hidden="true" tabindex="-1"></a><span class="at"># cat(result_ominbus_hetero$brief_interpretation)</span></span>
<span id="cb5-385"><a href="#cb5-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-386"><a href="#cb5-386" aria-hidden="true" tabindex="-1"></a><span class="at"># ──────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-387"><a href="#cb5-387" aria-hidden="true" tabindex="-1"></a><span class="at"># SCRIPT:  HETEROGENEITY WORKFLOW</span></span>
<span id="cb5-388"><a href="#cb5-388" aria-hidden="true" tabindex="-1"></a><span class="at"># PURPOSE: screen outcomes for heterogeneity, plot RATE &amp; Qini curves,</span></span>
<span id="cb5-389"><a href="#cb5-389" aria-hidden="true" tabindex="-1"></a><span class="at">#          fit shallow policy trees, and produce plain-language summaries.</span></span>
<span id="cb5-390"><a href="#cb5-390" aria-hidden="true" tabindex="-1"></a><span class="at"># REQUIREMENTS:</span></span>
<span id="cb5-391"><a href="#cb5-391" aria-hidden="true" tabindex="-1"></a><span class="at">#   • margot ≥ 1.0.52</span></span>
<span id="cb5-392"><a href="#cb5-392" aria-hidden="true" tabindex="-1"></a><span class="at">#   • models_binary_flipped_all        – list returned by margot_causal_forest()</span></span>
<span id="cb5-393"><a href="#cb5-393" aria-hidden="true" tabindex="-1"></a><span class="at">#   • original_df                      – raw data frame used in the forest</span></span>
<span id="cb5-394"><a href="#cb5-394" aria-hidden="true" tabindex="-1"></a><span class="at">#   • label_mapping_all_flipped        – named vector of pretty labels</span></span>
<span id="cb5-395"><a href="#cb5-395" aria-hidden="true" tabindex="-1"></a><span class="at">#   • flipped_names                    – vector of outcomes that were flipped</span></span>
<span id="cb5-396"><a href="#cb5-396" aria-hidden="true" tabindex="-1"></a><span class="at">#   • decision_tree_defaults           – list of control parameters</span></span>
<span id="cb5-397"><a href="#cb5-397" aria-hidden="true" tabindex="-1"></a><span class="at">#   • policy_tree_defaults             – list of control parameters</span></span>
<span id="cb5-398"><a href="#cb5-398" aria-hidden="true" tabindex="-1"></a><span class="at">#   • push_mods                        – sub-folder for caches/outputs</span></span>
<span id="cb5-399"><a href="#cb5-399" aria-hidden="true" tabindex="-1"></a><span class="at">#   • use 'models_binary', </span><span class="st">`</span>label_mapping_all<span class="st">`</span><span class="at">, and set </span><span class="st">`</span><span class="at">flipped_names =</span> <span class="st">""`</span><span class="at"> if no outcome flipped</span></span>
<span id="cb5-400"><a href="#cb5-400" aria-hidden="true" tabindex="-1"></a><span class="at"># ──────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-401"><a href="#cb5-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-402"><a href="#cb5-402" aria-hidden="true" tabindex="-1"></a><span class="at"># check package version early</span></span>
<span id="cb5-403"><a href="#cb5-403" aria-hidden="true" tabindex="-1"></a><span class="at">stopifnot(utils::packageVersion("margot") &gt;= "1.0.52")</span></span>
<span id="cb5-404"><a href="#cb5-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-405"><a href="#cb5-405" aria-hidden="true" tabindex="-1"></a><span class="at"># helper: quick kable printer --------------------------------------------------</span></span>
<span id="cb5-406"><a href="#cb5-406" aria-hidden="true" tabindex="-1"></a><span class="at">print_rate &lt;- function(tbl) {</span></span>
<span id="cb5-407"><a href="#cb5-407" aria-hidden="true" tabindex="-1"></a><span class="at">  tbl |&gt;</span></span>
<span id="cb5-408"><a href="#cb5-408" aria-hidden="true" tabindex="-1"></a><span class="at">    mutate(across(where(is.numeric), \(x) round(x, 2))) |&gt;</span></span>
<span id="cb5-409"><a href="#cb5-409" aria-hidden="true" tabindex="-1"></a><span class="at">    kbl(format = "markdown")</span></span>
<span id="cb5-410"><a href="#cb5-410" aria-hidden="true" tabindex="-1"></a><span class="at">}</span></span>
<span id="cb5-411"><a href="#cb5-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-412"><a href="#cb5-412" aria-hidden="true" tabindex="-1"></a><span class="at"># 1  SCREEN FOR HETEROGENEITY (RATE AUTOC + RATE Qini)  ----------------------</span></span>
<span id="cb5-413"><a href="#cb5-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-414"><a href="#cb5-414" aria-hidden="true" tabindex="-1"></a><span class="at">rate_results &lt;- margot_rate(</span></span>
<span id="cb5-415"><a href="#cb5-415" aria-hidden="true" tabindex="-1"></a><span class="at">  models        = models_binary_flipped_all,</span></span>
<span id="cb5-416"><a href="#cb5-416" aria-hidden="true" tabindex="-1"></a><span class="at">  policy        = "treat_best",</span></span>
<span id="cb5-417"><a href="#cb5-417" aria-hidden="true" tabindex="-1"></a><span class="at">  alpha         = 0.20,        # keep raw p &lt; .20</span></span>
<span id="cb5-418"><a href="#cb5-418" aria-hidden="true" tabindex="-1"></a><span class="at">  adjust        = "fdr",       # false-discovery-rate correction</span></span>
<span id="cb5-419"><a href="#cb5-419" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping = label_mapping_all_flipped</span></span>
<span id="cb5-420"><a href="#cb5-420" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-421"><a href="#cb5-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-422"><a href="#cb5-422" aria-hidden="true" tabindex="-1"></a><span class="at">print_rate(rate_results$rate_autoc)</span></span>
<span id="cb5-423"><a href="#cb5-423" aria-hidden="true" tabindex="-1"></a><span class="at">print_rate(rate_results$rate_qini)</span></span>
<span id="cb5-424"><a href="#cb5-424" aria-hidden="true" tabindex="-1"></a><span class="at"># convert RATE numbers into plain-language text</span></span>
<span id="cb5-425"><a href="#cb5-425" aria-hidden="true" tabindex="-1"></a><span class="at">rate_interp &lt;- margot_interpret_rate(</span></span>
<span id="cb5-426"><a href="#cb5-426" aria-hidden="true" tabindex="-1"></a><span class="at">  rate_results,</span></span>
<span id="cb5-427"><a href="#cb5-427" aria-hidden="true" tabindex="-1"></a><span class="at">  flipped_outcomes      = flipped_names,</span></span>
<span id="cb5-428"><a href="#cb5-428" aria-hidden="true" tabindex="-1"></a><span class="at">  adjust_positives_only = TRUE</span></span>
<span id="cb5-429"><a href="#cb5-429" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-430"><a href="#cb5-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-431"><a href="#cb5-431" aria-hidden="true" tabindex="-1"></a><span class="at">cat(rate_interp$comparison, "</span><span class="sc">\n</span><span class="at">")</span></span>
<span id="cb5-432"><a href="#cb5-432" aria-hidden="true" tabindex="-1"></a><span class="at">cli_h2("Analysis ready for Appendix ✔")</span></span>
<span id="cb5-433"><a href="#cb5-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-434"><a href="#cb5-434" aria-hidden="true" tabindex="-1"></a><span class="at"># organise model names by evidence strength</span></span>
<span id="cb5-435"><a href="#cb5-435" aria-hidden="true" tabindex="-1"></a><span class="at">model_groups &lt;- list(</span></span>
<span id="cb5-436"><a href="#cb5-436" aria-hidden="true" tabindex="-1"></a><span class="at">  autoc       = rate_interp$autoc_model_names,</span></span>
<span id="cb5-437"><a href="#cb5-437" aria-hidden="true" tabindex="-1"></a><span class="at">  qini        = rate_interp$qini_model_names,</span></span>
<span id="cb5-438"><a href="#cb5-438" aria-hidden="true" tabindex="-1"></a><span class="at">  either      = rate_interp$either_model_names,</span></span>
<span id="cb5-439"><a href="#cb5-439" aria-hidden="true" tabindex="-1"></a><span class="at">  exploratory = rate_interp$not_excluded_either</span></span>
<span id="cb5-440"><a href="#cb5-440" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-441"><a href="#cb5-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-442"><a href="#cb5-442" aria-hidden="true" tabindex="-1"></a><span class="at"># 2  PLOT RATE AUTOC CURVES ---------------------------------------------------</span></span>
<span id="cb5-443"><a href="#cb5-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-444"><a href="#cb5-444" aria-hidden="true" tabindex="-1"></a><span class="at">autoc_plots &lt;- margot_plot_rate_batch(</span></span>
<span id="cb5-445"><a href="#cb5-445" aria-hidden="true" tabindex="-1"></a><span class="at">  models        = models_binary_flipped_all,</span></span>
<span id="cb5-446"><a href="#cb5-446" aria-hidden="true" tabindex="-1"></a><span class="at">  save_plots    = FALSE,  # set TRUE to store .png files</span></span>
<span id="cb5-447"><a href="#cb5-447" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping = label_mapping_all_flipped,</span></span>
<span id="cb5-448"><a href="#cb5-448" aria-hidden="true" tabindex="-1"></a><span class="at">  model_names   = model_groups$autoc</span></span>
<span id="cb5-449"><a href="#cb5-449" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-450"><a href="#cb5-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-451"><a href="#cb5-451" aria-hidden="true" tabindex="-1"></a><span class="at"># inspect the first curve - note there may be more/none.</span></span>
<span id="cb5-452"><a href="#cb5-452" aria-hidden="true" tabindex="-1"></a><span class="at"># if none, comment out</span></span>
<span id="cb5-453"><a href="#cb5-453" aria-hidden="true" tabindex="-1"></a><span class="at">autoc_plots[[1]]</span></span>
<span id="cb5-454"><a href="#cb5-454" aria-hidden="true" tabindex="-1"></a><span class="at">autoc_name_1 &lt;- rate_results$rate_autoc$outcome[[1]]</span></span>
<span id="cb5-455"><a href="#cb5-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-456"><a href="#cb5-456" aria-hidden="true" tabindex="-1"></a><span class="at"># 3  QINI CURVES + GAIN INTERPRETATION ---------------------------------------</span></span>
<span id="cb5-457"><a href="#cb5-457" aria-hidden="true" tabindex="-1"></a><span class="at">qini_results &lt;- margot_policy(</span></span>
<span id="cb5-458"><a href="#cb5-458" aria-hidden="true" tabindex="-1"></a><span class="at">  models_binary_flipped_all,</span></span>
<span id="cb5-459"><a href="#cb5-459" aria-hidden="true" tabindex="-1"></a><span class="at">  save_plots         = FALSE,</span></span>
<span id="cb5-460"><a href="#cb5-460" aria-hidden="true" tabindex="-1"></a><span class="at">  output_dir         = here::here(push_mods),</span></span>
<span id="cb5-461"><a href="#cb5-461" aria-hidden="true" tabindex="-1"></a><span class="at">  decision_tree_args = decision_tree_args,</span></span>
<span id="cb5-462"><a href="#cb5-462" aria-hidden="true" tabindex="-1"></a><span class="at">  policy_tree_args   = policy_tree_args,</span></span>
<span id="cb5-463"><a href="#cb5-463" aria-hidden="true" tabindex="-1"></a><span class="at">  model_names        = names(models_binary_flipped_all$results),</span></span>
<span id="cb5-464"><a href="#cb5-464" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df        = original_df,</span></span>
<span id="cb5-465"><a href="#cb5-465" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping      = label_mapping_all_flipped,</span></span>
<span id="cb5-466"><a href="#cb5-466" aria-hidden="true" tabindex="-1"></a><span class="at">  max_depth          = 2L,</span></span>
<span id="cb5-467"><a href="#cb5-467" aria-hidden="true" tabindex="-1"></a><span class="at">  output_objects     = c("qini_plot", "diff_gain_summaries")</span></span>
<span id="cb5-468"><a href="#cb5-468" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-469"><a href="#cb5-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-470"><a href="#cb5-470" aria-hidden="true" tabindex="-1"></a><span class="at">qini_gain &lt;- margot_interpret_qini(</span></span>
<span id="cb5-471"><a href="#cb5-471" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_results,</span></span>
<span id="cb5-472"><a href="#cb5-472" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping = label_mapping_all_flipped</span></span>
<span id="cb5-473"><a href="#cb5-473" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-474"><a href="#cb5-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-475"><a href="#cb5-475" aria-hidden="true" tabindex="-1"></a><span class="at">print_rate(qini_gain$summary_table)</span></span>
<span id="cb5-476"><a href="#cb5-476" aria-hidden="true" tabindex="-1"></a><span class="at">cat(qini_gain$qini_explanation, "</span><span class="sc">\n</span><span class="at">")</span></span>
<span id="cb5-477"><a href="#cb5-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-478"><a href="#cb5-478" aria-hidden="true" tabindex="-1"></a><span class="at">reliable_ids &lt;- qini_gain$reliable_model_ids</span></span>
<span id="cb5-479"><a href="#cb5-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-480"><a href="#cb5-480" aria-hidden="true" tabindex="-1"></a><span class="at"># (re-)compute plots only for models that passed Qini reliability</span></span>
<span id="cb5-481"><a href="#cb5-481" aria-hidden="true" tabindex="-1"></a><span class="at">qini_results_valid &lt;- margot_policy(</span></span>
<span id="cb5-482"><a href="#cb5-482" aria-hidden="true" tabindex="-1"></a><span class="at">  models_binary_flipped_all,</span></span>
<span id="cb5-483"><a href="#cb5-483" aria-hidden="true" tabindex="-1"></a><span class="at">  save_plots         = FALSE,</span></span>
<span id="cb5-484"><a href="#cb5-484" aria-hidden="true" tabindex="-1"></a><span class="at">  output_dir         = here::here(push_mods),</span></span>
<span id="cb5-485"><a href="#cb5-485" aria-hidden="true" tabindex="-1"></a><span class="at">  decision_tree_args = decision_tree_args,</span></span>
<span id="cb5-486"><a href="#cb5-486" aria-hidden="true" tabindex="-1"></a><span class="at">  policy_tree_args   = policy_tree_args,</span></span>
<span id="cb5-487"><a href="#cb5-487" aria-hidden="true" tabindex="-1"></a><span class="at">  model_names        = reliable_ids,</span></span>
<span id="cb5-488"><a href="#cb5-488" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df        = original_df,</span></span>
<span id="cb5-489"><a href="#cb5-489" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping      = label_mapping_all_flipped,</span></span>
<span id="cb5-490"><a href="#cb5-490" aria-hidden="true" tabindex="-1"></a><span class="at">  max_depth          = 2L,</span></span>
<span id="cb5-491"><a href="#cb5-491" aria-hidden="true" tabindex="-1"></a><span class="at">  output_objects     = c("qini_plot", "diff_gain_summaries")</span></span>
<span id="cb5-492"><a href="#cb5-492" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-493"><a href="#cb5-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-494"><a href="#cb5-494" aria-hidden="true" tabindex="-1"></a><span class="at">qini_plots &lt;- map(qini_results_valid, ~ .x$qini_plot)</span></span>
<span id="cb5-495"><a href="#cb5-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-496"><a href="#cb5-496" aria-hidden="true" tabindex="-1"></a><span class="at"># grab pretty outcome names</span></span>
<span id="cb5-497"><a href="#cb5-497" aria-hidden="true" tabindex="-1"></a><span class="at">qini_names &lt;- margot_get_labels(reliable_ids, label_mapping_all_flipped)</span></span>
<span id="cb5-498"><a href="#cb5-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-499"><a href="#cb5-499" aria-hidden="true" tabindex="-1"></a><span class="at">cli_h1("Qini curves generated ✔")</span></span>
<span id="cb5-500"><a href="#cb5-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-501"><a href="#cb5-501" aria-hidden="true" tabindex="-1"></a><span class="at"># 4  POLICY TREES (max depth = 2) -------------------------------------------</span></span>
<span id="cb5-502"><a href="#cb5-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-503"><a href="#cb5-503" aria-hidden="true" tabindex="-1"></a><span class="at">policy_results_2L &lt;- margot_policy(</span></span>
<span id="cb5-504"><a href="#cb5-504" aria-hidden="true" tabindex="-1"></a><span class="at">  models_binary_flipped_all,</span></span>
<span id="cb5-505"><a href="#cb5-505" aria-hidden="true" tabindex="-1"></a><span class="at">  save_plots         = FALSE,</span></span>
<span id="cb5-506"><a href="#cb5-506" aria-hidden="true" tabindex="-1"></a><span class="at">  output_dir         = here::here(push_mods),</span></span>
<span id="cb5-507"><a href="#cb5-507" aria-hidden="true" tabindex="-1"></a><span class="at">  decision_tree_args = decision_tree_defaults,</span></span>
<span id="cb5-508"><a href="#cb5-508" aria-hidden="true" tabindex="-1"></a><span class="at">  policy_tree_args   = policy_tree_defaults,</span></span>
<span id="cb5-509"><a href="#cb5-509" aria-hidden="true" tabindex="-1"></a><span class="at">  model_names        = reliable_ids,      # only those passing Qini</span></span>
<span id="cb5-510"><a href="#cb5-510" aria-hidden="true" tabindex="-1"></a><span class="at">  max_depth          = 2L,</span></span>
<span id="cb5-511"><a href="#cb5-511" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df        = original_df,</span></span>
<span id="cb5-512"><a href="#cb5-512" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping      = label_mapping_all_flipped,</span></span>
<span id="cb5-513"><a href="#cb5-513" aria-hidden="true" tabindex="-1"></a><span class="at">  output_objects     = c("combined_plot")</span></span>
<span id="cb5-514"><a href="#cb5-514" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-515"><a href="#cb5-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-516"><a href="#cb5-516" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots &lt;- map(policy_results_2L, ~ .x$combined_plot)</span></span>
<span id="cb5-517"><a href="#cb5-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-518"><a href="#cb5-518" aria-hidden="true" tabindex="-1"></a><span class="at"># ️5  PLAIN-LANGUAGE INTERPRETATION OF TREES ----------------------------------</span></span>
<span id="cb5-519"><a href="#cb5-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-520"><a href="#cb5-520" aria-hidden="true" tabindex="-1"></a><span class="at">policy_text &lt;- margot_interpret_policy_batch(</span></span>
<span id="cb5-521"><a href="#cb5-521" aria-hidden="true" tabindex="-1"></a><span class="at">  models            = models_binary_flipped_all,</span></span>
<span id="cb5-522"><a href="#cb5-522" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df       = original_df,</span></span>
<span id="cb5-523"><a href="#cb5-523" aria-hidden="true" tabindex="-1"></a><span class="at">  model_names       = reliable_ids,</span></span>
<span id="cb5-524"><a href="#cb5-524" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping     = label_mapping_all_flipped,</span></span>
<span id="cb5-525"><a href="#cb5-525" aria-hidden="true" tabindex="-1"></a><span class="at">  max_depth         = 2L</span></span>
<span id="cb5-526"><a href="#cb5-526" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-527"><a href="#cb5-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-528"><a href="#cb5-528" aria-hidden="true" tabindex="-1"></a><span class="at">cat(policy_text, "</span><span class="sc">\n</span><span class="at">")</span></span>
<span id="cb5-529"><a href="#cb5-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-530"><a href="#cb5-530" aria-hidden="true" tabindex="-1"></a><span class="at">cli::cli_h1("Finished: depth-2 policy trees analysed ✔")</span></span>
<span id="cb5-531"><a href="#cb5-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-532"><a href="#cb5-532" aria-hidden="true" tabindex="-1"></a><span class="at"># ───────────────────────────── EOF ────────────────────────────────────────────</span></span>
<span id="cb5-533"><a href="#cb5-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-534"><a href="#cb5-534" aria-hidden="true" tabindex="-1"></a><span class="at"># names of valid models</span></span>
<span id="cb5-535"><a href="#cb5-535" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_1 &lt;- qini_names[[1]]</span></span>
<span id="cb5-536"><a href="#cb5-536" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_2 &lt;- qini_names[[2]]</span></span>
<span id="cb5-537"><a href="#cb5-537" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_3 &lt;- qini_names[[3]]</span></span>
<span id="cb5-538"><a href="#cb5-538" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_4 &lt;- qini_names[[4]]</span></span>
<span id="cb5-539"><a href="#cb5-539" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_5 &lt;- qini_names[[5]]</span></span>
<span id="cb5-540"><a href="#cb5-540" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_6 &lt;- qini_names[[6]]</span></span>
<span id="cb5-541"><a href="#cb5-541" aria-hidden="true" tabindex="-1"></a><span class="at">glued_policy_names_7 &lt;- qini_names[[7]]</span></span>
<span id="cb5-542"><a href="#cb5-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-543"><a href="#cb5-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-544"><a href="#cb5-544" aria-hidden="true" tabindex="-1"></a><span class="at"># cli::cli_h1("Names of Reliable HTE Models Set")</span></span>
<span id="cb5-545"><a href="#cb5-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-546"><a href="#cb5-546" aria-hidden="true" tabindex="-1"></a><span class="at"># GROUP COMPARISON EXAMPLE ------------------------------------------------</span></span>
<span id="cb5-547"><a href="#cb5-547" aria-hidden="true" tabindex="-1"></a><span class="at"># play around with these values</span></span>
<span id="cb5-548"><a href="#cb5-548" aria-hidden="true" tabindex="-1"></a><span class="at">x_offset_comp &lt;- 1.0</span></span>
<span id="cb5-549"><a href="#cb5-549" aria-hidden="true" tabindex="-1"></a><span class="at">x_lim_lo_comp &lt;- -1.0</span></span>
<span id="cb5-550"><a href="#cb5-550" aria-hidden="true" tabindex="-1"></a><span class="at">x_lim_hi_comp &lt;- 1.0 </span></span>
<span id="cb5-551"><a href="#cb5-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-552"><a href="#cb5-552" aria-hidden="true" tabindex="-1"></a><span class="at">base_defaults_comparisons &lt;- list(</span></span>
<span id="cb5-553"><a href="#cb5-553" aria-hidden="true" tabindex="-1"></a><span class="at">  type = "RD",</span></span>
<span id="cb5-554"><a href="#cb5-554" aria-hidden="true" tabindex="-1"></a><span class="at">  title = ate_title,</span></span>
<span id="cb5-555"><a href="#cb5-555" aria-hidden="true" tabindex="-1"></a><span class="at">  e_val_bound_threshold = 1.2,</span></span>
<span id="cb5-556"><a href="#cb5-556" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping = "label_mapping_all",</span></span>
<span id="cb5-557"><a href="#cb5-557" aria-hidden="true" tabindex="-1"></a><span class="at">  adjust = "bonferroni", #&lt;- new</span></span>
<span id="cb5-558"><a href="#cb5-558" aria-hidden="true" tabindex="-1"></a><span class="at">  alpha = 0.05, # &lt;- new</span></span>
<span id="cb5-559"><a href="#cb5-559" aria-hidden="true" tabindex="-1"></a><span class="at">  colors = c(</span></span>
<span id="cb5-560"><a href="#cb5-560" aria-hidden="true" tabindex="-1"></a><span class="at">    "positive" = "#E69F00",</span></span>
<span id="cb5-561"><a href="#cb5-561" aria-hidden="true" tabindex="-1"></a><span class="at">    "not reliable" = "grey50",</span></span>
<span id="cb5-562"><a href="#cb5-562" aria-hidden="true" tabindex="-1"></a><span class="at">    "negative" = "#56B4E9"</span></span>
<span id="cb5-563"><a href="#cb5-563" aria-hidden="true" tabindex="-1"></a><span class="at">  ),</span></span>
<span id="cb5-564"><a href="#cb5-564" aria-hidden="true" tabindex="-1"></a><span class="at">  x_offset = x_offset_comp,</span></span>
<span id="cb5-565"><a href="#cb5-565" aria-hidden="true" tabindex="-1"></a><span class="at">  # will be set based on type</span></span>
<span id="cb5-566"><a href="#cb5-566" aria-hidden="true" tabindex="-1"></a><span class="at">  x_lim_lo = x_lim_lo_comp,</span></span>
<span id="cb5-567"><a href="#cb5-567" aria-hidden="true" tabindex="-1"></a><span class="at">  # will be set based on type</span></span>
<span id="cb5-568"><a href="#cb5-568" aria-hidden="true" tabindex="-1"></a><span class="at">  x_lim_hi = x_lim_hi_comp,</span></span>
<span id="cb5-569"><a href="#cb5-569" aria-hidden="true" tabindex="-1"></a><span class="at">  text_size = 8,</span></span>
<span id="cb5-570"><a href="#cb5-570" aria-hidden="true" tabindex="-1"></a><span class="at">  linewidth = 0.75,</span></span>
<span id="cb5-571"><a href="#cb5-571" aria-hidden="true" tabindex="-1"></a><span class="at">  estimate_scale = 1,</span></span>
<span id="cb5-572"><a href="#cb5-572" aria-hidden="true" tabindex="-1"></a><span class="at">  base_size = 18,</span></span>
<span id="cb5-573"><a href="#cb5-573" aria-hidden="true" tabindex="-1"></a><span class="at">  point_size = 2.5,</span></span>
<span id="cb5-574"><a href="#cb5-574" aria-hidden="true" tabindex="-1"></a><span class="at">  title_size = 19,</span></span>
<span id="cb5-575"><a href="#cb5-575" aria-hidden="true" tabindex="-1"></a><span class="at">  subtitle_size = 16,</span></span>
<span id="cb5-576"><a href="#cb5-576" aria-hidden="true" tabindex="-1"></a><span class="at">  legend_text_size = 10,</span></span>
<span id="cb5-577"><a href="#cb5-577" aria-hidden="true" tabindex="-1"></a><span class="at">  legend_title_size = 10,</span></span>
<span id="cb5-578"><a href="#cb5-578" aria-hidden="true" tabindex="-1"></a><span class="at">  include_coefficients = FALSE</span></span>
<span id="cb5-579"><a href="#cb5-579" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-580"><a href="#cb5-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-581"><a href="#cb5-581" aria-hidden="true" tabindex="-1"></a><span class="at"># see</span></span>
<span id="cb5-582"><a href="#cb5-582" aria-hidden="true" tabindex="-1"></a><span class="at">complex_condition_age  &lt;- between(X[,"t0_age_z"], -1, 1)</span></span>
<span id="cb5-583"><a href="#cb5-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-584"><a href="#cb5-584" aria-hidden="true" tabindex="-1"></a><span class="at"># sanity‑check age bounds on the raw scale</span></span>
<span id="cb5-585"><a href="#cb5-585" aria-hidden="true" tabindex="-1"></a><span class="at">mean(original_df$t0_age) + c(-1, 1) * sd(original_df$t0_age)</span></span>
<span id="cb5-586"><a href="#cb5-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-587"><a href="#cb5-587" aria-hidden="true" tabindex="-1"></a><span class="at"># age subsets</span></span>
<span id="cb5-588"><a href="#cb5-588" aria-hidden="true" tabindex="-1"></a><span class="at">subsets_standard_age &lt;- list(</span></span>
<span id="cb5-589"><a href="#cb5-589" aria-hidden="true" tabindex="-1"></a><span class="at">  Younger = list(</span></span>
<span id="cb5-590"><a href="#cb5-590" aria-hidden="true" tabindex="-1"></a><span class="at">    var = "t0_age_z",</span></span>
<span id="cb5-591"><a href="#cb5-591" aria-hidden="true" tabindex="-1"></a><span class="at">    value = -1,</span></span>
<span id="cb5-592"><a href="#cb5-592" aria-hidden="true" tabindex="-1"></a><span class="at">    operator = "&lt;",</span></span>
<span id="cb5-593"><a href="#cb5-593" aria-hidden="true" tabindex="-1"></a><span class="at">    label = "Age &lt; 35"</span></span>
<span id="cb5-594"><a href="#cb5-594" aria-hidden="true" tabindex="-1"></a><span class="at">  ),</span></span>
<span id="cb5-595"><a href="#cb5-595" aria-hidden="true" tabindex="-1"></a><span class="at">  Middle = list(</span></span>
<span id="cb5-596"><a href="#cb5-596" aria-hidden="true" tabindex="-1"></a><span class="at">    var = "t0_age_z",</span></span>
<span id="cb5-597"><a href="#cb5-597" aria-hidden="true" tabindex="-1"></a><span class="at">    # operator = "&lt;",</span></span>
<span id="cb5-598"><a href="#cb5-598" aria-hidden="true" tabindex="-1"></a><span class="at">    subset_condition = complex_condition_age,</span></span>
<span id="cb5-599"><a href="#cb5-599" aria-hidden="true" tabindex="-1"></a><span class="at">    label = "Age 35-62"</span></span>
<span id="cb5-600"><a href="#cb5-600" aria-hidden="true" tabindex="-1"></a><span class="at">  ),</span></span>
<span id="cb5-601"><a href="#cb5-601" aria-hidden="true" tabindex="-1"></a><span class="at">  Older = list(</span></span>
<span id="cb5-602"><a href="#cb5-602" aria-hidden="true" tabindex="-1"></a><span class="at">    var = "t0_age_z",</span></span>
<span id="cb5-603"><a href="#cb5-603" aria-hidden="true" tabindex="-1"></a><span class="at">    value = 1,</span></span>
<span id="cb5-604"><a href="#cb5-604" aria-hidden="true" tabindex="-1"></a><span class="at">    operator = "&gt;",</span></span>
<span id="cb5-605"><a href="#cb5-605" aria-hidden="true" tabindex="-1"></a><span class="at">    label = "Age &gt; 62"</span></span>
<span id="cb5-606"><a href="#cb5-606" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-607"><a href="#cb5-607" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-608"><a href="#cb5-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-609"><a href="#cb5-609" aria-hidden="true" tabindex="-1"></a><span class="at"># 3. batch subgroup analysis -----------------------------------------</span></span>
<span id="cb5-610"><a href="#cb5-610" aria-hidden="true" tabindex="-1"></a><span class="at">planned_subset_results &lt;- margot_planned_subgroups_batch(</span></span>
<span id="cb5-611"><a href="#cb5-611" aria-hidden="true" tabindex="-1"></a><span class="at">  domain_models  = list(models_binary),</span></span>
<span id="cb5-612"><a href="#cb5-612" aria-hidden="true" tabindex="-1"></a><span class="at">  X              = X,</span></span>
<span id="cb5-613"><a href="#cb5-613" aria-hidden="true" tabindex="-1"></a><span class="at">  base_defaults  = base_defaults_comparisons,</span></span>
<span id="cb5-614"><a href="#cb5-614" aria-hidden="true" tabindex="-1"></a><span class="at">  subset_types   = list(cohort = subsets_standard_age),</span></span>
<span id="cb5-615"><a href="#cb5-615" aria-hidden="true" tabindex="-1"></a><span class="at">  original_df    = original_df,</span></span>
<span id="cb5-616"><a href="#cb5-616" aria-hidden="true" tabindex="-1"></a><span class="at">  label_mapping  = label_mapping_all,          # ← supply it here</span></span>
<span id="cb5-617"><a href="#cb5-617" aria-hidden="true" tabindex="-1"></a><span class="at">  domain_names   = "wellbeing",</span></span>
<span id="cb5-618"><a href="#cb5-618" aria-hidden="true" tabindex="-1"></a><span class="at">  subtitles      = "",</span></span>
<span id="cb5-619"><a href="#cb5-619" aria-hidden="true" tabindex="-1"></a><span class="at">  adjust         = "bonferroni",  # ← here</span></span>
<span id="cb5-620"><a href="#cb5-620" aria-hidden="true" tabindex="-1"></a><span class="at">  alpha          = 0.05           # ← and here</span></span>
<span id="cb5-621"><a href="#cb5-621" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-622"><a href="#cb5-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-623"><a href="#cb5-623" aria-hidden="true" tabindex="-1"></a><span class="at"># make comparison plot</span></span>
<span id="cb5-624"><a href="#cb5-624" aria-hidden="true" tabindex="-1"></a><span class="at">plots_subgroup_age_young_old&lt;- wrap_plots(</span></span>
<span id="cb5-625"><a href="#cb5-625" aria-hidden="true" tabindex="-1"></a><span class="at">  list(</span></span>
<span id="cb5-626"><a href="#cb5-626" aria-hidden="true" tabindex="-1"></a><span class="at">    planned_subset_results$wellbeing$cohort$results$</span><span class="st">`</span>Age <span class="sc">&lt;</span> <span class="dv">35</span><span class="st">`</span><span class="at">$plot,</span></span>
<span id="cb5-627"><a href="#cb5-627" aria-hidden="true" tabindex="-1"></a><span class="at">    planned_subset_results$wellbeing$cohort$results$</span><span class="st">`</span>Age <span class="sc">&gt;</span> <span class="dv">62</span><span class="st">`</span><span class="at">$plot</span></span>
<span id="cb5-628"><a href="#cb5-628" aria-hidden="true" tabindex="-1"></a><span class="at">  ), ncol = 1) +</span></span>
<span id="cb5-629"><a href="#cb5-629" aria-hidden="true" tabindex="-1"></a><span class="at">  plot_annotation(</span></span>
<span id="cb5-630"><a href="#cb5-630" aria-hidden="true" tabindex="-1"></a><span class="at">    title = "Younger vs Older",</span></span>
<span id="cb5-631"><a href="#cb5-631" aria-hidden="true" tabindex="-1"></a><span class="at">    theme = theme(plot.title = element_text(size = 18, face = "bold"))</span></span>
<span id="cb5-632"><a href="#cb5-632" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-633"><a href="#cb5-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-634"><a href="#cb5-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-635"><a href="#cb5-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-636"><a href="#cb5-636" aria-hidden="true" tabindex="-1"></a><span class="at"># are groups different from each other? </span></span>
<span id="cb5-637"><a href="#cb5-637" aria-hidden="true" tabindex="-1"></a><span class="at"># example: young (&lt;35) vs older (&gt;62)</span></span>
<span id="cb5-638"><a href="#cb5-638" aria-hidden="true" tabindex="-1"></a><span class="at">group_comparison_age_young_old &lt;- margot_compare_groups(</span></span>
<span id="cb5-639"><a href="#cb5-639" aria-hidden="true" tabindex="-1"></a><span class="at">  group1_name = "People Under 35 Years Old",</span></span>
<span id="cb5-640"><a href="#cb5-640" aria-hidden="true" tabindex="-1"></a><span class="at">  group2_name = "People Over 62 Years Old", </span></span>
<span id="cb5-641"><a href="#cb5-641" aria-hidden="true" tabindex="-1"></a><span class="at">  planned_subset_results$wellbeing$cohort$results$</span><span class="st">`</span>Age <span class="sc">&lt;</span> <span class="dv">35</span><span class="st">`</span><span class="at">$transformed_table, # reference</span></span>
<span id="cb5-642"><a href="#cb5-642" aria-hidden="true" tabindex="-1"></a><span class="at">  planned_subset_results$wellbeing$cohort$results$</span><span class="st">`</span>Age <span class="sc">&gt;</span> <span class="dv">62</span><span class="st">`</span><span class="at">$transformed_table, # comparison</span></span>
<span id="cb5-643"><a href="#cb5-643" aria-hidden="true" tabindex="-1"></a><span class="at">  type            = "RD",          # risk‑difference scale</span></span>
<span id="cb5-644"><a href="#cb5-644" aria-hidden="true" tabindex="-1"></a><span class="at">  decimal_places  = 3</span></span>
<span id="cb5-645"><a href="#cb5-645" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-646"><a href="#cb5-646" aria-hidden="true" tabindex="-1"></a><span class="at">print(group_comparison_age_young_old$results |&gt; kbl("markdown", digits = 3))</span></span>
<span id="cb5-647"><a href="#cb5-647" aria-hidden="true" tabindex="-1"></a><span class="at">cat(group_comparison_age_young_old$interpretation)</span></span>
<span id="cb5-648"><a href="#cb5-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-649"><a href="#cb5-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-650"><a href="#cb5-650" aria-hidden="true" tabindex="-1"></a><span class="at"># ---- define global variables for text generation ------------------------</span></span>
<span id="cb5-651"><a href="#cb5-651" aria-hidden="true" tabindex="-1"></a><span class="at">global_vars &lt;- list(</span></span>
<span id="cb5-652"><a href="#cb5-652" aria-hidden="true" tabindex="-1"></a><span class="at">  name_exposure_variable     = nice_name_exposure_variable,</span></span>
<span id="cb5-653"><a href="#cb5-653" aria-hidden="true" tabindex="-1"></a><span class="at">  n_total                    = n_total,</span></span>
<span id="cb5-654"><a href="#cb5-654" aria-hidden="true" tabindex="-1"></a><span class="at">  ate_adjustment             = "bonferroni", </span></span>
<span id="cb5-655"><a href="#cb5-655" aria-hidden="true" tabindex="-1"></a><span class="at">  ate_alpha                  = "0.05",</span></span>
<span id="cb5-656"><a href="#cb5-656" aria-hidden="true" tabindex="-1"></a><span class="at">  cate_adjustment            = "Benjamini–Hochberg false-discovery-rate adjustment",</span></span>
<span id="cb5-657"><a href="#cb5-657" aria-hidden="true" tabindex="-1"></a><span class="at">  cate_alpha                 =  "0.1",             </span></span>
<span id="cb5-658"><a href="#cb5-658" aria-hidden="true" tabindex="-1"></a><span class="at">  sample_ratio_policy        =  "70/30",</span></span>
<span id="cb5-659"><a href="#cb5-659" aria-hidden="true" tabindex="-1"></a><span class="at">  n_participants             = n_participants,</span></span>
<span id="cb5-660"><a href="#cb5-660" aria-hidden="true" tabindex="-1"></a><span class="at">  exposure_variable          = name_exposure,</span></span>
<span id="cb5-661"><a href="#cb5-661" aria-hidden="true" tabindex="-1"></a><span class="at">  name_exposure_lower        = name_exposure_lower,</span></span>
<span id="cb5-662"><a href="#cb5-662" aria-hidden="true" tabindex="-1"></a><span class="at">  name_control_regime_lower  = name_control_regime_lower,</span></span>
<span id="cb5-663"><a href="#cb5-663" aria-hidden="true" tabindex="-1"></a><span class="at">  name_outcome_variables     = "Self Esteem", # &lt;- adjust to your study, your decision</span></span>
<span id="cb5-664"><a href="#cb5-664" aria-hidden="true" tabindex="-1"></a><span class="at">  name_outcomes_lower        = name_outcomes_lower,</span></span>
<span id="cb5-665"><a href="#cb5-665" aria-hidden="true" tabindex="-1"></a><span class="at">  name_exposure_capfirst     = nice_name_exposure_variable,</span></span>
<span id="cb5-666"><a href="#cb5-666" aria-hidden="true" tabindex="-1"></a><span class="at">  measures_exposure          = measures_exposure,</span></span>
<span id="cb5-667"><a href="#cb5-667" aria-hidden="true" tabindex="-1"></a><span class="at">  value_exposure_regime      = value_exposure_regime,</span></span>
<span id="cb5-668"><a href="#cb5-668" aria-hidden="true" tabindex="-1"></a><span class="at">  value_control_regime       = value_control_regime,</span></span>
<span id="cb5-669"><a href="#cb5-669" aria-hidden="true" tabindex="-1"></a><span class="at">  flipped_list               = flipped_list, # set flipped_list = "" if nothing flipped</span></span>
<span id="cb5-670"><a href="#cb5-670" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_explain_grf       = "E",</span></span>
<span id="cb5-671"><a href="#cb5-671" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_assumptions_grf   = "F",</span></span>
<span id="cb5-672"><a href="#cb5-672" aria-hidden="true" tabindex="-1"></a><span class="at">  name_exposure_threshold    =  "1",</span></span>
<span id="cb5-673"><a href="#cb5-673" aria-hidden="true" tabindex="-1"></a><span class="at">  name_control_threshold     =  "0",</span></span>
<span id="cb5-674"><a href="#cb5-674" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_measures          =  "A",</span></span>
<span id="cb5-675"><a href="#cb5-675" aria-hidden="true" tabindex="-1"></a><span class="at">  value_control              = value_control,     # ← named</span></span>
<span id="cb5-676"><a href="#cb5-676" aria-hidden="true" tabindex="-1"></a><span class="at">  value_exposure             = value_exposure,    # ← named</span></span>
<span id="cb5-677"><a href="#cb5-677" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_positivity        = "C",</span></span>
<span id="cb5-678"><a href="#cb5-678" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_rate              = "D",</span></span>
<span id="cb5-679"><a href="#cb5-679" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_qini_curve        = "D",</span></span>
<span id="cb5-680"><a href="#cb5-680" aria-hidden="true" tabindex="-1"></a><span class="at">  train_proportion_decision_tree = ".7",</span></span>
<span id="cb5-681"><a href="#cb5-681" aria-hidden="true" tabindex="-1"></a><span class="at">  traning_proportion         = ".7",</span></span>
<span id="cb5-682"><a href="#cb5-682" aria-hidden="true" tabindex="-1"></a><span class="at">  sample_split              = "70/30",</span></span>
<span id="cb5-683"><a href="#cb5-683" aria-hidden="true" tabindex="-1"></a><span class="at">  sample_ratio_policy        = "70/30",</span></span>
<span id="cb5-684"><a href="#cb5-684" aria-hidden="true" tabindex="-1"></a><span class="at">  baseline_wave              = baseline_wave,</span></span>
<span id="cb5-685"><a href="#cb5-685" aria-hidden="true" tabindex="-1"></a><span class="at">  exposure_waves             = exposure_waves,</span></span>
<span id="cb5-686"><a href="#cb5-686" aria-hidden="true" tabindex="-1"></a><span class="at">  outcome_wave               = outcome_wave,</span></span>
<span id="cb5-687"><a href="#cb5-687" aria-hidden="true" tabindex="-1"></a><span class="at">  protocol_url               = "https://osf.io/ce4t9/", # if used</span></span>
<span id="cb5-688"><a href="#cb5-688" aria-hidden="true" tabindex="-1"></a><span class="at">  appendix_timeline          = "A" # if used</span></span>
<span id="cb5-689"><a href="#cb5-689" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-690"><a href="#cb5-690" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-691"><a href="#cb5-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-692"><a href="#cb5-692" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-693"><a href="#cb5-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-694"><a href="#cb5-694" aria-hidden="true" tabindex="-1"></a><span class="do">## Introduction</span></span>
<span id="cb5-695"><a href="#cb5-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-696"><a href="#cb5-696" aria-hidden="true" tabindex="-1"></a><span class="sc">**</span>Your place to shine here<span class="sc">**</span></span>
<span id="cb5-697"><a href="#cb5-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-698"><a href="#cb5-698" aria-hidden="true" tabindex="-1"></a><span class="do">## Method</span></span>
<span id="cb5-699"><a href="#cb5-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-700"><a href="#cb5-700" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-701"><a href="#cb5-701" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # |eval: false # &lt;- set to false as needed/desired for your own material</span></span>
<span id="cb5-702"><a href="#cb5-702" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-703"><a href="#cb5-703" aria-hidden="true" tabindex="-1"></a><span class="at">library(boilerplate)</span></span>
<span id="cb5-704"><a href="#cb5-704" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-705"><a href="#cb5-705" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-706"><a href="#cb5-706" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "methods",      # ← choose the right top-level list</span></span>
<span id="cb5-707"><a href="#cb5-707" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c(</span></span>
<span id="cb5-708"><a href="#cb5-708" aria-hidden="true" tabindex="-1"></a><span class="at">      "student_sample.nzavs",</span></span>
<span id="cb5-709"><a href="#cb5-709" aria-hidden="true" tabindex="-1"></a><span class="at">      "student_target_population",</span></span>
<span id="cb5-710"><a href="#cb5-710" aria-hidden="true" tabindex="-1"></a><span class="at">      "eligibility.standard",</span></span>
<span id="cb5-711"><a href="#cb5-711" aria-hidden="true" tabindex="-1"></a><span class="at">      "causal_intervention.grf_simple_text",</span></span>
<span id="cb5-712"><a href="#cb5-712" aria-hidden="true" tabindex="-1"></a><span class="at">      "analytic_approach.general_approach_cate_long", # &lt;- new</span></span>
<span id="cb5-713"><a href="#cb5-713" aria-hidden="true" tabindex="-1"></a><span class="at">      "exposure_indicator",</span></span>
<span id="cb5-714"><a href="#cb5-714" aria-hidden="true" tabindex="-1"></a><span class="at">      "causal_identification_criteria",</span></span>
<span id="cb5-715"><a href="#cb5-715" aria-hidden="true" tabindex="-1"></a><span class="at">      "confounding_control.vanderweele",</span></span>
<span id="cb5-716"><a href="#cb5-716" aria-hidden="true" tabindex="-1"></a><span class="at">      "statistical_models.grf_short_explanation",</span></span>
<span id="cb5-717"><a href="#cb5-717" aria-hidden="true" tabindex="-1"></a><span class="at">      "missing_data.missing_grf_simple",</span></span>
<span id="cb5-718"><a href="#cb5-718" aria-hidden="true" tabindex="-1"></a><span class="at">      "sensitivity_analysis.short_evalue"</span></span>
<span id="cb5-719"><a href="#cb5-719" aria-hidden="true" tabindex="-1"></a><span class="at">    ),</span></span>
<span id="cb5-720"><a href="#cb5-720" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-721"><a href="#cb5-721" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-722"><a href="#cb5-722" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-723"><a href="#cb5-723" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-724"><a href="#cb5-724" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-725"><a href="#cb5-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-726"><a href="#cb5-726" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-727"><a href="#cb5-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-728"><a href="#cb5-728" aria-hidden="true" tabindex="-1"></a><span class="do">## Results</span></span>
<span id="cb5-729"><a href="#cb5-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-730"><a href="#cb5-730" aria-hidden="true" tabindex="-1"></a><span class="do">### Average Treatement Effects</span></span>
<span id="cb5-731"><a href="#cb5-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-732"><a href="#cb5-732" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-733"><a href="#cb5-733" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-ate</span></span>
<span id="cb5-734"><a href="#cb5-734" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Average Treatment Effects on Multi-dimensional Wellbeing"</span></span>
<span id="cb5-735"><a href="#cb5-735" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # |eval: false # &lt;- set to false as needed/desired for your own material</span></span>
<span id="cb5-736"><a href="#cb5-736" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 14</span></span>
<span id="cb5-737"><a href="#cb5-737" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 18</span></span>
<span id="cb5-738"><a href="#cb5-738" aria-hidden="true" tabindex="-1"></a><span class="at">ate_results$plot</span></span>
<span id="cb5-739"><a href="#cb5-739" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-740"><a href="#cb5-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-741"><a href="#cb5-741" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-742"><a href="#cb5-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-743"><a href="#cb5-743" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-744"><a href="#cb5-744" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: tbl-outcomes</span></span>
<span id="cb5-745"><a href="#cb5-745" aria-hidden="true" tabindex="-1"></a><span class="at">#| tbl-cap: "Average Treatment Effects on Multi-dimensional Wellbeing"</span></span>
<span id="cb5-746"><a href="#cb5-746" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # |eval: false # &lt;- set to false as needed/desired for your own material</span></span>
<span id="cb5-747"><a href="#cb5-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-748"><a href="#cb5-748" aria-hidden="true" tabindex="-1"></a><span class="at"># ate_results$transformed_table|&gt; kbl("markdown")</span></span>
<span id="cb5-749"><a href="#cb5-749" aria-hidden="true" tabindex="-1"></a><span class="at">margot_bind_tables_markdown</span></span>
<span id="cb5-750"><a href="#cb5-750" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-751"><a href="#cb5-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-752"><a href="#cb5-752" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-753"><a href="#cb5-753" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # |eval: false # &lt;- set to false as needed/desired for your own material</span></span>
<span id="cb5-754"><a href="#cb5-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-755"><a href="#cb5-755" aria-hidden="true" tabindex="-1"></a><span class="at">cat(ate_results$interpretation)</span></span>
<span id="cb5-756"><a href="#cb5-756" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-757"><a href="#cb5-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-758"><a href="#cb5-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-759"><a href="#cb5-759" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-760"><a href="#cb5-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-761"><a href="#cb5-761" aria-hidden="true" tabindex="-1"></a><span class="do">### Heterogeneous Treatment Effects</span></span>
<span id="cb5-762"><a href="#cb5-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-763"><a href="#cb5-763" aria-hidden="true" tabindex="-1"></a><span class="do">#### Qini Curves: (How Much Do We Gain By Treating Using $\tau{x}$ At Different Budgets?) {#results-qini-curve}</span></span>
<span id="cb5-764"><a href="#cb5-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-765"><a href="#cb5-765" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-766"><a href="#cb5-766" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true  # &lt;- set to false: copy and paste your own text using this material</span></span>
<span id="cb5-767"><a href="#cb5-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-768"><a href="#cb5-768" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-769"><a href="#cb5-769" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-770"><a href="#cb5-770" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "results",      # ← choose the right top-level list</span></span>
<span id="cb5-771"><a href="#cb5-771" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c(</span></span>
<span id="cb5-772"><a href="#cb5-772" aria-hidden="true" tabindex="-1"></a><span class="at">    "grf.interpretation_qini"</span></span>
<span id="cb5-773"><a href="#cb5-773" aria-hidden="true" tabindex="-1"></a><span class="at">    ),</span></span>
<span id="cb5-774"><a href="#cb5-774" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-775"><a href="#cb5-775" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-776"><a href="#cb5-776" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-777"><a href="#cb5-777" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-778"><a href="#cb5-778" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-779"><a href="#cb5-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-780"><a href="#cb5-780" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-781"><a href="#cb5-781" aria-hidden="true" tabindex="-1"></a><span class="at"># only reliable results</span></span>
<span id="cb5-782"><a href="#cb5-782" aria-hidden="true" tabindex="-1"></a><span class="at">cat(qini_gain$qini_explanation) </span></span>
<span id="cb5-783"><a href="#cb5-783" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-784"><a href="#cb5-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-785"><a href="#cb5-785" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span>tbl<span class="sc">-</span>qini presents results <span class="cf">for</span> our Qini curve analysis at different spend rates.</span>
<span id="cb5-786"><a href="#cb5-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-787"><a href="#cb5-787" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-788"><a href="#cb5-788" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: tbl-qini</span></span>
<span id="cb5-789"><a href="#cb5-789" aria-hidden="true" tabindex="-1"></a><span class="at">#| tbl-cap: "Qini Curve Results"</span></span>
<span id="cb5-790"><a href="#cb5-790" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true  # &lt;- set to false: copy and paste your own text using this material</span></span>
<span id="cb5-791"><a href="#cb5-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-792"><a href="#cb5-792" aria-hidden="true" tabindex="-1"></a><span class="at"># table (only use if more than one qini gain interpretation)</span></span>
<span id="cb5-793"><a href="#cb5-793" aria-hidden="true" tabindex="-1"></a><span class="at">qini_gain$summary_table |&gt; </span></span>
<span id="cb5-794"><a href="#cb5-794" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;%</span></span>
<span id="cb5-795"><a href="#cb5-795" aria-hidden="true" tabindex="-1"></a><span class="at">  kbl(format = "markdown") #&lt;-- only if you have this, otherwise delete this code</span></span>
<span id="cb5-796"><a href="#cb5-796" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-797"><a href="#cb5-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-798"><a href="#cb5-798" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span>fig<span class="sc">-</span>qini<span class="dv">-1</span> presents results <span class="cf">for</span> reliable Qini results</span>
<span id="cb5-799"><a href="#cb5-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-800"><a href="#cb5-800" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-801"><a href="#cb5-801" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-qini-1</span></span>
<span id="cb5-802"><a href="#cb5-802" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Qini Graphs"</span></span>
<span id="cb5-803"><a href="#cb5-803" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false as needed/desired</span></span>
<span id="cb5-804"><a href="#cb5-804" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-805"><a href="#cb5-805" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 18</span></span>
<span id="cb5-806"><a href="#cb5-806" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 12</span></span>
<span id="cb5-807"><a href="#cb5-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-808"><a href="#cb5-808" aria-hidden="true" tabindex="-1"></a><span class="at">library(patchwork)</span></span>
<span id="cb5-809"><a href="#cb5-809" aria-hidden="true" tabindex="-1"></a><span class="at"># combine first column of plots (4,6,7,8) and second column (9,11,12)</span></span>
<span id="cb5-810"><a href="#cb5-810" aria-hidden="true" tabindex="-1"></a><span class="at"># these showed reliable qini results</span></span>
<span id="cb5-811"><a href="#cb5-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-812"><a href="#cb5-812" aria-hidden="true" tabindex="-1"></a><span class="at">combined_qini &lt;- (</span></span>
<span id="cb5-813"><a href="#cb5-813" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[1]] /</span></span>
<span id="cb5-814"><a href="#cb5-814" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[2]] /</span></span>
<span id="cb5-815"><a href="#cb5-815" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[3]] /</span></span>
<span id="cb5-816"><a href="#cb5-816" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[4]]</span></span>
<span id="cb5-817"><a href="#cb5-817" aria-hidden="true" tabindex="-1"></a><span class="at">) | (</span></span>
<span id="cb5-818"><a href="#cb5-818" aria-hidden="true" tabindex="-1"></a><span class="at">  # remove this block if you don't have plots 9,11,12</span></span>
<span id="cb5-819"><a href="#cb5-819" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[5]] /</span></span>
<span id="cb5-820"><a href="#cb5-820" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[6]] /</span></span>
<span id="cb5-821"><a href="#cb5-821" aria-hidden="true" tabindex="-1"></a><span class="at">  qini_plots[[7]]</span></span>
<span id="cb5-822"><a href="#cb5-822" aria-hidden="true" tabindex="-1"></a><span class="at">) +</span></span>
<span id="cb5-823"><a href="#cb5-823" aria-hidden="true" tabindex="-1"></a><span class="at">  # collect all legends into one shared guide</span></span>
<span id="cb5-824"><a href="#cb5-824" aria-hidden="true" tabindex="-1"></a><span class="at">  plot_layout(guides = "collect") +</span></span>
<span id="cb5-825"><a href="#cb5-825" aria-hidden="true" tabindex="-1"></a><span class="at">  # add title (and optionally subtitle)</span></span>
<span id="cb5-826"><a href="#cb5-826" aria-hidden="true" tabindex="-1"></a><span class="at">  plot_annotation(</span></span>
<span id="cb5-827"><a href="#cb5-827" aria-hidden="true" tabindex="-1"></a><span class="at">    title    = "Combined Qini Plots",</span></span>
<span id="cb5-828"><a href="#cb5-828" aria-hidden="true" tabindex="-1"></a><span class="at">    subtitle = "Panels arranged with shared legend"</span></span>
<span id="cb5-829"><a href="#cb5-829" aria-hidden="true" tabindex="-1"></a><span class="at">  ) &amp;</span></span>
<span id="cb5-830"><a href="#cb5-830" aria-hidden="true" tabindex="-1"></a><span class="at">  # apply theme modifications to all subplots</span></span>
<span id="cb5-831"><a href="#cb5-831" aria-hidden="true" tabindex="-1"></a><span class="at">  theme(</span></span>
<span id="cb5-832"><a href="#cb5-832" aria-hidden="true" tabindex="-1"></a><span class="at">    legend.position   = "bottom",           # place legend below</span></span>
<span id="cb5-833"><a href="#cb5-833" aria-hidden="true" tabindex="-1"></a><span class="at">    plot.title        = element_text(hjust = 0.5),  # centre title</span></span>
<span id="cb5-834"><a href="#cb5-834" aria-hidden="true" tabindex="-1"></a><span class="at">    plot.subtitle     = element_text(hjust = 0.5)   # centre subtitle</span></span>
<span id="cb5-835"><a href="#cb5-835" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-836"><a href="#cb5-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-837"><a href="#cb5-837" aria-hidden="true" tabindex="-1"></a><span class="at"># draw it</span></span>
<span id="cb5-838"><a href="#cb5-838" aria-hidden="true" tabindex="-1"></a><span class="at">print(combined_qini)</span></span>
<span id="cb5-839"><a href="#cb5-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-840"><a href="#cb5-840" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-841"><a href="#cb5-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-842"><a href="#cb5-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-843"><a href="#cb5-843" aria-hidden="true" tabindex="-1"></a><span class="do">#### Decision Rules (Who is Most Sensitive to Treatment?)</span></span>
<span id="cb5-844"><a href="#cb5-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-845"><a href="#cb5-845" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-846"><a href="#cb5-846" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true  # &lt;- set to false: copy and paste your own text using this material</span></span>
<span id="cb5-847"><a href="#cb5-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-848"><a href="#cb5-848" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-849"><a href="#cb5-849" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-850"><a href="#cb5-850" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "results",      # ← choose the right top-level list</span></span>
<span id="cb5-851"><a href="#cb5-851" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c(</span></span>
<span id="cb5-852"><a href="#cb5-852" aria-hidden="true" tabindex="-1"></a><span class="at">    "grf.interpretation_policy_tree"</span></span>
<span id="cb5-853"><a href="#cb5-853" aria-hidden="true" tabindex="-1"></a><span class="at">    ),</span></span>
<span id="cb5-854"><a href="#cb5-854" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-855"><a href="#cb5-855" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-856"><a href="#cb5-856" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-857"><a href="#cb5-857" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-858"><a href="#cb5-858" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-859"><a href="#cb5-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-860"><a href="#cb5-860" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-861"><a href="#cb5-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-862"><a href="#cb5-862" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-863"><a href="#cb5-863" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-1</span></span>
<span id="cb5-864"><a href="#cb5-864" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_1}"</span></span>
<span id="cb5-865"><a href="#cb5-865" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-866"><a href="#cb5-866" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-867"><a href="#cb5-867" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-868"><a href="#cb5-868" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-869"><a href="#cb5-869" aria-hidden="true" tabindex="-1"></a><span class="at"># plot 1</span></span>
<span id="cb5-870"><a href="#cb5-870" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[1]]</span></span>
<span id="cb5-871"><a href="#cb5-871" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-872"><a href="#cb5-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-873"><a href="#cb5-873" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-874"><a href="#cb5-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-875"><a href="#cb5-875" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-876"><a href="#cb5-876" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-2</span></span>
<span id="cb5-877"><a href="#cb5-877" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_2}"</span></span>
<span id="cb5-878"><a href="#cb5-878" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-879"><a href="#cb5-879" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-880"><a href="#cb5-880" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-881"><a href="#cb5-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-882"><a href="#cb5-882" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[2]]</span></span>
<span id="cb5-883"><a href="#cb5-883" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-884"><a href="#cb5-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-885"><a href="#cb5-885" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-886"><a href="#cb5-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-887"><a href="#cb5-887" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-888"><a href="#cb5-888" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-3</span></span>
<span id="cb5-889"><a href="#cb5-889" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_3}"</span></span>
<span id="cb5-890"><a href="#cb5-890" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-891"><a href="#cb5-891" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-892"><a href="#cb5-892" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-893"><a href="#cb5-893" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-894"><a href="#cb5-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-895"><a href="#cb5-895" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[3]]</span></span>
<span id="cb5-896"><a href="#cb5-896" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-897"><a href="#cb5-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-898"><a href="#cb5-898" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-899"><a href="#cb5-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-900"><a href="#cb5-900" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-901"><a href="#cb5-901" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-4</span></span>
<span id="cb5-902"><a href="#cb5-902" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_4}"</span></span>
<span id="cb5-903"><a href="#cb5-903" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-904"><a href="#cb5-904" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-905"><a href="#cb5-905" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-906"><a href="#cb5-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-907"><a href="#cb5-907" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[4]]</span></span>
<span id="cb5-908"><a href="#cb5-908" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-909"><a href="#cb5-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-910"><a href="#cb5-910" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-911"><a href="#cb5-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-912"><a href="#cb5-912" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-913"><a href="#cb5-913" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-5</span></span>
<span id="cb5-914"><a href="#cb5-914" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_5}"</span></span>
<span id="cb5-915"><a href="#cb5-915" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-916"><a href="#cb5-916" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-917"><a href="#cb5-917" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-918"><a href="#cb5-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-919"><a href="#cb5-919" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[5]]</span></span>
<span id="cb5-920"><a href="#cb5-920" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-921"><a href="#cb5-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-922"><a href="#cb5-922" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-923"><a href="#cb5-923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-924"><a href="#cb5-924" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-925"><a href="#cb5-925" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-6</span></span>
<span id="cb5-926"><a href="#cb5-926" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_6}"</span></span>
<span id="cb5-927"><a href="#cb5-927" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-928"><a href="#cb5-928" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-929"><a href="#cb5-929" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-930"><a href="#cb5-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-931"><a href="#cb5-931" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[6]]</span></span>
<span id="cb5-932"><a href="#cb5-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-933"><a href="#cb5-933" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-934"><a href="#cb5-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-935"><a href="#cb5-935" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-936"><a href="#cb5-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-937"><a href="#cb5-937" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-938"><a href="#cb5-938" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-policy-7</span></span>
<span id="cb5-939"><a href="#cb5-939" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Decision Tree: {glued_policy_names_7}"</span></span>
<span id="cb5-940"><a href="#cb5-940" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-941"><a href="#cb5-941" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-942"><a href="#cb5-942" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-943"><a href="#cb5-943" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-944"><a href="#cb5-944" aria-hidden="true" tabindex="-1"></a><span class="at">policy_plots[[7]]</span></span>
<span id="cb5-945"><a href="#cb5-945" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-946"><a href="#cb5-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-947"><a href="#cb5-947" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-948"><a href="#cb5-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-949"><a href="#cb5-949" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-950"><a href="#cb5-950" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false if you want to copy and paste your own text</span></span>
<span id="cb5-951"><a href="#cb5-951" aria-hidden="true" tabindex="-1"></a><span class="at">cat(policy_text, "</span><span class="sc">\n</span><span class="at">")</span></span>
<span id="cb5-952"><a href="#cb5-952" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-953"><a href="#cb5-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-954"><a href="#cb5-954" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}} </span>
<span id="cb5-955"><a href="#cb5-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-956"><a href="#cb5-956" aria-hidden="true" tabindex="-1"></a><span class="do">## Planned Subgroup Comparisons (Optional)</span></span>
<span id="cb5-957"><a href="#cb5-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-958"><a href="#cb5-958" aria-hidden="true" tabindex="-1"></a>Based on theoretical findings we expected that the effects of {name_exposure} would vary by age...\<span class="sc">@</span>fig<span class="sc">-</span>planned<span class="sc">-</span>comparison and <span class="sc">@</span>tbl<span class="sc">-</span>planned<span class="sc">-</span>comparison</span>
<span id="cb5-959"><a href="#cb5-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-960"><a href="#cb5-960" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-961"><a href="#cb5-961" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-planned-comparison</span></span>
<span id="cb5-962"><a href="#cb5-962" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "Planned Comparison Plot"</span></span>
<span id="cb5-963"><a href="#cb5-963" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-964"><a href="#cb5-964" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-965"><a href="#cb5-965" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 16</span></span>
<span id="cb5-966"><a href="#cb5-966" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 9</span></span>
<span id="cb5-967"><a href="#cb5-967" aria-hidden="true" tabindex="-1"></a><span class="at">plots_subgroup_age_young_old</span></span>
<span id="cb5-968"><a href="#cb5-968" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-969"><a href="#cb5-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-970"><a href="#cb5-970" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-971"><a href="#cb5-971" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: tbl-planned-comparison</span></span>
<span id="cb5-972"><a href="#cb5-972" aria-hidden="true" tabindex="-1"></a><span class="at">#| tbl-cap: "Planned Comparison Table"</span></span>
<span id="cb5-973"><a href="#cb5-973" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true  # &lt;- set to false: copy and paste your own text using this material</span></span>
<span id="cb5-974"><a href="#cb5-974" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-975"><a href="#cb5-975" aria-hidden="true" tabindex="-1"></a><span class="at"># table (only use if more than one qini gain interpretation)</span></span>
<span id="cb5-976"><a href="#cb5-976" aria-hidden="true" tabindex="-1"></a><span class="at">group_comparison_age_young_old$results |&gt; </span></span>
<span id="cb5-977"><a href="#cb5-977" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;%</span></span>
<span id="cb5-978"><a href="#cb5-978" aria-hidden="true" tabindex="-1"></a><span class="at">  kbl(format = "markdown")</span></span>
<span id="cb5-979"><a href="#cb5-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-980"><a href="#cb5-980" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-981"><a href="#cb5-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-982"><a href="#cb5-982" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-983"><a href="#cb5-983" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false if you want to copy and paste your own text</span></span>
<span id="cb5-984"><a href="#cb5-984" aria-hidden="true" tabindex="-1"></a><span class="at">cat(group_comparison_age_young_old$interpretation)</span></span>
<span id="cb5-985"><a href="#cb5-985" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-986"><a href="#cb5-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-987"><a href="#cb5-987" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-988"><a href="#cb5-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-989"><a href="#cb5-989" aria-hidden="true" tabindex="-1"></a><span class="do">## Discussion</span></span>
<span id="cb5-990"><a href="#cb5-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-991"><a href="#cb5-991" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r,  results='asis'}</span></span>
<span id="cb5-992"><a href="#cb5-992" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: false  # &lt;- set to false: copy and paste your own text using this material</span></span>
<span id="cb5-993"><a href="#cb5-993" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-994"><a href="#cb5-994" aria-hidden="true" tabindex="-1"></a><span class="at">cat(boilerplate_generate_text(</span></span>
<span id="cb5-995"><a href="#cb5-995" aria-hidden="true" tabindex="-1"></a><span class="at">  category = "discussion",</span></span>
<span id="cb5-996"><a href="#cb5-996" aria-hidden="true" tabindex="-1"></a><span class="at">  sections = c(</span></span>
<span id="cb5-997"><a href="#cb5-997" aria-hidden="true" tabindex="-1"></a><span class="at">    "student_ethics",</span></span>
<span id="cb5-998"><a href="#cb5-998" aria-hidden="true" tabindex="-1"></a><span class="at">    "student_data",</span></span>
<span id="cb5-999"><a href="#cb5-999" aria-hidden="true" tabindex="-1"></a><span class="at">    "student_authors_statement"  ),</span></span>
<span id="cb5-1000"><a href="#cb5-1000" aria-hidden="true" tabindex="-1"></a><span class="at">  global_vars = list(</span></span>
<span id="cb5-1001"><a href="#cb5-1001" aria-hidden="true" tabindex="-1"></a><span class="at">    exposure_variable = name_exposure</span></span>
<span id="cb5-1002"><a href="#cb5-1002" aria-hidden="true" tabindex="-1"></a><span class="at">  ),</span></span>
<span id="cb5-1003"><a href="#cb5-1003" aria-hidden="true" tabindex="-1"></a><span class="at">  db = unified_db</span></span>
<span id="cb5-1004"><a href="#cb5-1004" aria-hidden="true" tabindex="-1"></a><span class="at">))</span></span>
<span id="cb5-1005"><a href="#cb5-1005" aria-hidden="true" tabindex="-1"></a><span class="at">unified_db$discussion$student_authors_statement</span></span>
<span id="cb5-1006"><a href="#cb5-1006" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1007"><a href="#cb5-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1008"><a href="#cb5-1008" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1009"><a href="#cb5-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1010"><a href="#cb5-1010" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix A: Measures {#appendix-measures}</span></span>
<span id="cb5-1011"><a href="#cb5-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1012"><a href="#cb5-1012" aria-hidden="true" tabindex="-1"></a><span class="do">### Measures</span></span>
<span id="cb5-1013"><a href="#cb5-1013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1014"><a href="#cb5-1014" aria-hidden="true" tabindex="-1"></a><span class="do">#### Baseline Covariate Measures</span></span>
<span id="cb5-1015"><a href="#cb5-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1016"><a href="#cb5-1016" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1017"><a href="#cb5-1017" aria-hidden="true" tabindex="-1"></a><span class="at">cat(baseline_measures_text)</span></span>
<span id="cb5-1018"><a href="#cb5-1018" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1019"><a href="#cb5-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1020"><a href="#cb5-1020" aria-hidden="true" tabindex="-1"></a><span class="do">#### Exposure Measures</span></span>
<span id="cb5-1021"><a href="#cb5-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1022"><a href="#cb5-1022" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1023"><a href="#cb5-1023" aria-hidden="true" tabindex="-1"></a><span class="at">cat(exposure_measures_text)</span></span>
<span id="cb5-1024"><a href="#cb5-1024" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1025"><a href="#cb5-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1026"><a href="#cb5-1026" aria-hidden="true" tabindex="-1"></a><span class="do">#### Outcome Measures</span></span>
<span id="cb5-1027"><a href="#cb5-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1028"><a href="#cb5-1028" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1029"><a href="#cb5-1029" aria-hidden="true" tabindex="-1"></a><span class="at">cat(outcome_measures_text)</span></span>
<span id="cb5-1030"><a href="#cb5-1030" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1031"><a href="#cb5-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1032"><a href="#cb5-1032" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1033"><a href="#cb5-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1034"><a href="#cb5-1034" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix B: Sample Characteristics {#appendix-sample}</span></span>
<span id="cb5-1035"><a href="#cb5-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1036"><a href="#cb5-1036" aria-hidden="true" tabindex="-1"></a><span class="do">#### Sample Statistics: Baseline Covariates</span></span>
<span id="cb5-1037"><a href="#cb5-1037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1038"><a href="#cb5-1038" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span>tbl<span class="sc">-</span>appendix<span class="sc">-</span>baseline presents sample demographic statistics.</span>
<span id="cb5-1039"><a href="#cb5-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1040"><a href="#cb5-1040" aria-hidden="true" tabindex="-1"></a><span class="sc">:::</span> {<span class="co">#tbl-appendix-baseline}</span></span>
<span id="cb5-1041"><a href="#cb5-1041" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1042"><a href="#cb5-1042" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-1043"><a href="#cb5-1043" aria-hidden="true" tabindex="-1"></a><span class="at">#| include: true</span></span>
<span id="cb5-1044"><a href="#cb5-1044" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1045"><a href="#cb5-1045" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_baseline</span></span>
<span id="cb5-1046"><a href="#cb5-1046" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1047"><a href="#cb5-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1048"><a href="#cb5-1048" aria-hidden="true" tabindex="-1"></a>Demographic statistics <span class="cf">for</span> New Zealand Attitudes and Values Cohort<span class="sc">:</span> {baseline_wave_glued}.</span>
<span id="cb5-1049"><a href="#cb5-1049" aria-hidden="true" tabindex="-1"></a><span class="sc">:::</span></span>
<span id="cb5-1050"><a href="#cb5-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1051"><a href="#cb5-1051" aria-hidden="true" tabindex="-1"></a><span class="do">### Sample Statistics: Exposure Variable {#appendix-exposure}</span></span>
<span id="cb5-1052"><a href="#cb5-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1053"><a href="#cb5-1053" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span><span class="sc">!--</span> <span class="er">@</span>tbl<span class="sc">-</span>sample<span class="sc">-</span>exposures presents sample statistics <span class="cf">for</span> the exposure variable, religious service attendance, during the baseline and exposure waves. This variable was not measured <span class="cf">in</span> part of NZAVS time <span class="dv">12</span> (years <span class="dv">2020-2021</span>) and part of NZAVS time <span class="dv">13</span> (years <span class="dv">2021-2022</span>). To address missingness, <span class="cf">if</span> a value was observed after NZAVS time <span class="dv">14</span>, we carried the previous observation forward and created and <span class="cn">NA</span> indicator. If there was no future observation, the participant was treated as censored, and inverse probability of censoring weights were applied, following our standard method <span class="cf">for</span> handling missing <span class="fu">observations</span> (see mansucript <span class="sc">**</span>Method<span class="sc">**</span><span class="er">/**</span>Handling of Missing Data<span class="sc">**</span>). Here, our carry<span class="sc">-</span>forward imputation approach may result <span class="cf">in</span> conservative causal effect estimation because it introduces measurement error. However, this approach would not generally bias causal effect estimation away from the null because the measurement error is unsystematic and random and unrelated to the outcomes. <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb5-1054"><a href="#cb5-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1055"><a href="#cb5-1055" aria-hidden="true" tabindex="-1"></a><span class="er">:::</span> {<span class="co">#tbl-appendix-exposures}</span></span>
<span id="cb5-1056"><a href="#cb5-1056" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1057"><a href="#cb5-1057" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-1058"><a href="#cb5-1058" aria-hidden="true" tabindex="-1"></a><span class="at">#| include: true</span></span>
<span id="cb5-1059"><a href="#cb5-1059" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1060"><a href="#cb5-1060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1061"><a href="#cb5-1061" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_exposures</span></span>
<span id="cb5-1062"><a href="#cb5-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1063"><a href="#cb5-1063" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1064"><a href="#cb5-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1065"><a href="#cb5-1065" aria-hidden="true" tabindex="-1"></a>Demographic statistics <span class="cf">for</span> New Zealand Attitudes and Values Cohort waves <span class="fl">2018.</span></span>
<span id="cb5-1066"><a href="#cb5-1066" aria-hidden="true" tabindex="-1"></a><span class="sc">:::</span></span>
<span id="cb5-1067"><a href="#cb5-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1068"><a href="#cb5-1068" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1069"><a href="#cb5-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1070"><a href="#cb5-1070" aria-hidden="true" tabindex="-1"></a><span class="do">### Sample Statistics: Outcome Variables {#appendix-outcomes}</span></span>
<span id="cb5-1071"><a href="#cb5-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1072"><a href="#cb5-1072" aria-hidden="true" tabindex="-1"></a><span class="sc">:::</span> {<span class="co">#tbl-appendix-outcomes}</span></span>
<span id="cb5-1073"><a href="#cb5-1073" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1074"><a href="#cb5-1074" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-1075"><a href="#cb5-1075" aria-hidden="true" tabindex="-1"></a><span class="at">#| include: true</span></span>
<span id="cb5-1076"><a href="#cb5-1076" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1077"><a href="#cb5-1077" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1078"><a href="#cb5-1078" aria-hidden="true" tabindex="-1"></a><span class="at">markdown_table_outcomes</span></span>
<span id="cb5-1079"><a href="#cb5-1079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1080"><a href="#cb5-1080" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1081"><a href="#cb5-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1082"><a href="#cb5-1082" aria-hidden="true" tabindex="-1"></a>Outcome variables measured at {baseline_wave_glued} and {outcome_wave}</span>
<span id="cb5-1083"><a href="#cb5-1083" aria-hidden="true" tabindex="-1"></a><span class="sc">:::</span></span>
<span id="cb5-1084"><a href="#cb5-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1085"><a href="#cb5-1085" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1086"><a href="#cb5-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1087"><a href="#cb5-1087" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix C: Transition Matrix to Check The Positivity Assumption {#appendix-transition}</span></span>
<span id="cb5-1088"><a href="#cb5-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1089"><a href="#cb5-1089" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1090"><a href="#cb5-1090" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: tbl-transition</span></span>
<span id="cb5-1091"><a href="#cb5-1091" aria-hidden="true" tabindex="-1"></a><span class="at">#| tbl-cap: "Transition Matrix Showing Change"</span></span>
<span id="cb5-1092"><a href="#cb5-1092" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-1093"><a href="#cb5-1093" aria-hidden="true" tabindex="-1"></a><span class="at">#| include: true</span></span>
<span id="cb5-1094"><a href="#cb5-1094" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1095"><a href="#cb5-1095" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1096"><a href="#cb5-1096" aria-hidden="true" tabindex="-1"></a><span class="at">transition_tables_binary$tables[[1]]</span></span>
<span id="cb5-1097"><a href="#cb5-1097" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1098"><a href="#cb5-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1099"><a href="#cb5-1099" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1100"><a href="#cb5-1100" aria-hidden="true" tabindex="-1"></a><span class="at">cat(transition_tables_binary$explanation)</span></span>
<span id="cb5-1101"><a href="#cb5-1101" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1102"><a href="#cb5-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1103"><a href="#cb5-1103" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1104"><a href="#cb5-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1105"><a href="#cb5-1105" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix D: RATE AUTOC and RATE Qini {#appendix-rate}</span></span>
<span id="cb5-1106"><a href="#cb5-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1107"><a href="#cb5-1107" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1108"><a href="#cb5-1108" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false as needed/desired</span></span>
<span id="cb5-1109"><a href="#cb5-1109" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1110"><a href="#cb5-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1111"><a href="#cb5-1111" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-1112"><a href="#cb5-1112" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-1113"><a href="#cb5-1113" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "results",</span></span>
<span id="cb5-1114"><a href="#cb5-1114" aria-hidden="true" tabindex="-1"></a><span class="at">    # ← choose the right top-level list</span></span>
<span id="cb5-1115"><a href="#cb5-1115" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c("grf.interpretation_rate"),</span></span>
<span id="cb5-1116"><a href="#cb5-1116" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-1117"><a href="#cb5-1117" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-1118"><a href="#cb5-1118" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-1119"><a href="#cb5-1119" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-1120"><a href="#cb5-1120" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1121"><a href="#cb5-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1122"><a href="#cb5-1122" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1123"><a href="#cb5-1123" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false as needed/desired</span></span>
<span id="cb5-1124"><a href="#cb5-1124" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1125"><a href="#cb5-1125" aria-hidden="true" tabindex="-1"></a><span class="at">cat(rate_interp$comparison)</span></span>
<span id="cb5-1126"><a href="#cb5-1126" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1127"><a href="#cb5-1127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1128"><a href="#cb5-1128" aria-hidden="true" tabindex="-1"></a>Refer to [Appendix D](<span class="co">#appendix-cate-validation) for details.</span></span>
<span id="cb5-1129"><a href="#cb5-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1130"><a href="#cb5-1130" aria-hidden="true" tabindex="-1"></a><span class="do">##### RATE AUTOC RESULTS</span></span>
<span id="cb5-1131"><a href="#cb5-1131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1132"><a href="#cb5-1132" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results = 'asis'}</span></span>
<span id="cb5-1133"><a href="#cb5-1133" aria-hidden="true" tabindex="-1"></a><span class="at"># only reliable results</span></span>
<span id="cb5-1134"><a href="#cb5-1134" aria-hidden="true" tabindex="-1"></a><span class="at">cat(rate_interp$autoc_results)</span></span>
<span id="cb5-1135"><a href="#cb5-1135" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1136"><a href="#cb5-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1137"><a href="#cb5-1137" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb5-1138"><a href="#cb5-1138" aria-hidden="true" tabindex="-1"></a><span class="at">#| label: fig-rate-1</span></span>
<span id="cb5-1139"><a href="#cb5-1139" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-cap: "RATE AUTOC Graphs"</span></span>
<span id="cb5-1140"><a href="#cb5-1140" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true  # &lt;- set to false as needed/desired</span></span>
<span id="cb5-1141"><a href="#cb5-1141" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1142"><a href="#cb5-1142" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-height: 12</span></span>
<span id="cb5-1143"><a href="#cb5-1143" aria-hidden="true" tabindex="-1"></a><span class="at">#| fig-width: 8</span></span>
<span id="cb5-1144"><a href="#cb5-1144" aria-hidden="true" tabindex="-1"></a><span class="at">autoc_plots[[1]]</span></span>
<span id="cb5-1145"><a href="#cb5-1145" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1146"><a href="#cb5-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1147"><a href="#cb5-1147" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span>fig<span class="sc">-</span>rate<span class="dv">-1</span> presents the RATE AUTOC curve <span class="cf">for</span> <span class="st">`</span><span class="at">r autoc_name_1</span><span class="st">`</span></span>
<span id="cb5-1148"><a href="#cb5-1148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1149"><a href="#cb5-1149" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1150"><a href="#cb5-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1151"><a href="#cb5-1151" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix E: Approach to Heterogeneous Treatment Effects {#appendix-cate-validation}</span></span>
<span id="cb5-1152"><a href="#cb5-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1153"><a href="#cb5-1153" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1154"><a href="#cb5-1154" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true</span></span>
<span id="cb5-1155"><a href="#cb5-1155" aria-hidden="true" tabindex="-1"></a><span class="at">#| echo: false</span></span>
<span id="cb5-1156"><a href="#cb5-1156" aria-hidden="true" tabindex="-1"></a><span class="at">library(boilerplate)</span></span>
<span id="cb5-1157"><a href="#cb5-1157" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-1158"><a href="#cb5-1158" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-1159"><a href="#cb5-1159" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "appendix",</span></span>
<span id="cb5-1160"><a href="#cb5-1160" aria-hidden="true" tabindex="-1"></a><span class="at">    # ← choose the right top-level list</span></span>
<span id="cb5-1161"><a href="#cb5-1161" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c("explain.grf_short"),</span></span>
<span id="cb5-1162"><a href="#cb5-1162" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-1163"><a href="#cb5-1163" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-1164"><a href="#cb5-1164" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-1165"><a href="#cb5-1165" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-1166"><a href="#cb5-1166" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1167"><a href="#cb5-1167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1168"><a href="#cb5-1168" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">&lt;</span> pagebreak <span class="sc">&gt;</span>}}</span>
<span id="cb5-1169"><a href="#cb5-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1170"><a href="#cb5-1170" aria-hidden="true" tabindex="-1"></a><span class="do">## Appendix F: Strengths and Limitations of Causal Forests  {#appendix-rate}</span></span>
<span id="cb5-1171"><a href="#cb5-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1172"><a href="#cb5-1172" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, results='asis'}</span></span>
<span id="cb5-1173"><a href="#cb5-1173" aria-hidden="true" tabindex="-1"></a><span class="at">#| eval: true # &lt;- set to false as needed/desired</span></span>
<span id="cb5-1174"><a href="#cb5-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1175"><a href="#cb5-1175" aria-hidden="true" tabindex="-1"></a><span class="at">cat(</span></span>
<span id="cb5-1176"><a href="#cb5-1176" aria-hidden="true" tabindex="-1"></a><span class="at">  boilerplate::boilerplate_generate_text(</span></span>
<span id="cb5-1177"><a href="#cb5-1177" aria-hidden="true" tabindex="-1"></a><span class="at">    category     = "discussion",</span></span>
<span id="cb5-1178"><a href="#cb5-1178" aria-hidden="true" tabindex="-1"></a><span class="at">    # ← choose the right top-level list</span></span>
<span id="cb5-1179"><a href="#cb5-1179" aria-hidden="true" tabindex="-1"></a><span class="at">    sections     = c("strengths.strengths_grf_short"),</span></span>
<span id="cb5-1180"><a href="#cb5-1180" aria-hidden="true" tabindex="-1"></a><span class="at">    global_vars  = global_vars,</span></span>
<span id="cb5-1181"><a href="#cb5-1181" aria-hidden="true" tabindex="-1"></a><span class="at">    db           = unified_db</span></span>
<span id="cb5-1182"><a href="#cb5-1182" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb5-1183"><a href="#cb5-1183" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb5-1184"><a href="#cb5-1184" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb5-1185"><a href="#cb5-1185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1186"><a href="#cb5-1186" aria-hidden="true" tabindex="-1"></a><span class="do">## References {.appendix-refs}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="pro-tip" class="level4">
<h4 class="anchored" data-anchor-id="pro-tip">Pro Tip</h4>
<p>You can adjust figure by changing:</p>
<p><code>#| fig-height: 16</code> and <code>#| fig-width: 9</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-policy-6</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Decision Tree: {glued_policy_names_6}"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 16 # &lt;- change here</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 9 # &lt;- change here</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>policy_plots[[<span class="dv">6</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="what-you-have-learned" class="level2">
<h2 class="anchored" data-anchor-id="what-you-have-learned">What You Have Learned</h2>
<ul>
<li><p><strong>How to create a publication quality manuscript</strong></p></li>
<li><p><strong>How to create a workflow for references</strong></p></li>
<li><p><strong>How to import results into your manuscript</strong></p></li>
<li><p><strong>How to make graphs of your results (using) <code>margot</code></strong></p></li>
<li><p><strong>How to report your results</strong></p></li>
<li><p><strong>How to interpret your results</strong></p></li>
</ul>
</section>
<section id="frequently-asked-questions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="frequently-asked-questions">Frequently Asked Questions</h2>
<section id="do-i-need-to-use-quarto-for-making-my-report" class="level3">
<h3 class="anchored" data-anchor-id="do-i-need-to-use-quarto-for-making-my-report">Do I need to use <code>quarto</code> for making my report?</h3>
<p>No.&nbsp;The suggested workflow should make your life <em>easier</em>. If, after a fair trial – <em>and</em> after asking us for help – <code>quarto</code> still feels like extra friction, switch to whatever you like (<code>rmarkdown</code>, plain <code>R</code> scripts, or even Word). The science matters more than the wrapper.</p>
<p>👉 Quick-start: <a href="https://quarto.org/docs/get-started/" class="uri">https://quarto.org/docs/get-started/</a></p>
<hr>
</section>
<section id="i-cannot-save-or-retrieve-files-from-folders" class="level3">
<h3 class="anchored" data-anchor-id="i-cannot-save-or-retrieve-files-from-folders">I cannot save or retrieve files from folders</h3>
<p>When hunting path errors, ask yourself:</p>
<ul>
<li><strong>Packages</strong> – have I updated everything, especially <strong><code>margot</code></strong> and <strong><code>here</code></strong>?<br>
</li>
<li><strong>Clean slate</strong> – did I restart R (⌘⇧F10) <em>and</em> rerun the data-prep scripts from the top?<br>
</li>
<li><strong>Project root</strong> – am I inside the correct <strong>RStudio Project</strong>? Check with <code>here::here()</code>.<br>
</li>
<li><strong>Search</strong> – have I used <em>Edit → Find in Files</em> (⌘⇧F / Ctrl⇧F) to locate the object or path?<br>
</li>
<li><strong>Data really there?</strong> – do the objects exist in my data frame?</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># waves where `variable_name` was measured</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(df_nz_long, <span class="fu">table</span>(variable_name, wave))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Permissions / cloud sync</strong> – is the save folder writable <em>and</em> local? Dropbox/OneDrive may off-load files; right-click and choose <em>Make available offline</em>.</li>
</ul>
<hr>
</section>
<section id="i-cannot-run-margot_causal_forest_parallel" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="i-cannot-run-margot_causal_forest_parallel">I cannot run <code>margot_causal_forest_parallel()</code></h3>
<ul>
<li><strong>Fallback</strong> – does <code>margot_causal_forest()</code> work? It is slower but prints progress.<br>
</li>
<li><strong>Formula richness</strong> – causal forests need many covariates <span class="citation" data-cites="grf2024">(<a href="#ref-grf2024" role="doc-biblioref">Tibshirani et al. 2024</a>)</span>. Include the full demographic block.<br>
</li>
<li><strong>Resources</strong> – parallel forests spawn one worker per core. Keep some RAM free.<br>
</li>
<li><strong>Reduce load</strong> – try fewer trees or a smaller variable pool:</li>
</ul>
<div class="no-row-height column-margin column-container"><div id="ref-grf2024" class="csl-entry" role="listitem">
Tibshirani, Julie, Susan Athey, Erik Sverdrup, and Stefan Wager. 2024. <em>Grf: Generalized Random Forests</em>. <a href="https://github.com/grf-labs/grf">https://github.com/grf-labs/grf</a>.
</div></div><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>grf_defaults <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed             =</span> <span class="dv">123</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stabilize.splits =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">num.trees        =</span> <span class="dv">1000</span>,  <span class="co"># fewer trees</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">top_n_vars       =</span> <span class="dv">10</span>     <span class="co"># smaller policy-tree search space</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="i-cannot-run-margot_flip_forests_parallel" class="level3">
<h3 class="anchored" data-anchor-id="i-cannot-run-margot_flip_forests_parallel">I cannot run <code>margot_flip_forests_parallel()</code></h3>
<p>First test the serial version <code>margot_flip_forests()</code>. All parallel caveats above apply.</p>
<hr>
</section>
<section id="my-r-code-is-not-working" class="level3">
<h3 class="anchored" data-anchor-id="my-r-code-is-not-working">My R code is not working</h3>
<ul>
<li>Update packages (<code>pak::pak()</code> is handy).<br>
</li>
<li>Re-download the example code and run from the top.<br>
</li>
<li>Read the full error and traceback (<code>rlang::last_trace()</code>).<br>
</li>
<li>Compare with the example: what is different in <em>your</em> data or model?</li>
</ul>
<hr>
</section>
<section id="i-do-not-know-how-margot-functions-work" class="level3">
<h3 class="anchored" data-anchor-id="i-do-not-know-how-margot-functions-work">I do not know how <code>margot</code> functions work</h3>
<p>See the indexed reference: <a href="https://go-bayes.github.io/margot/reference/index.html" class="uri">https://go-bayes.github.io/margot/reference/index.html</a></p>
<hr>
</section>
<section id="what-is-the-recommended-workflow-for-investigating-heterogeneity" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-recommended-workflow-for-investigating-heterogeneity">What is the recommended workflow for investigating heterogeneity?</h3>
<ol type="1">
<li><strong>State your causal question.</strong> Statistics cannot rescue an ill-posed question.<br>
</li>
<li>Estimate the <strong>ATE</strong> for the target population.<br>
</li>
<li>Compute <strong>CATEs</strong> and evaluate gain at 20 % and 50 % budget constraints with the <strong>Qini</strong> metric.<br>
</li>
<li>For outcomes with convincing heterogeneity, fit shallow <strong>policy trees</strong> (depth = 2) to obtain transparent rules.<br>
</li>
<li>Optionally, compare pre-specified subgroups directly.<br>
</li>
<li>Report <strong>RATE–AUTOC</strong> and <strong>RATE–Qini</strong> tables in an online supplement.</li>
</ol>
<p><em>Take-away:</em> start from a clean, updated project, read errors carefully, and ensure each step answers <em>your</em> research question.</p>
<hr>
</section>
<section id="i-cannot-create-a-quarto-document" class="level3">
<h3 class="anchored" data-anchor-id="i-cannot-create-a-quarto-document">I cannot create a <code>quarto</code> document</h3>
<ul>
<li>Save the file with a <code>.qmd</code> suffix <strong>inside</strong> the <code>quarto</code> folder.<br>
</li>
<li>Ensure the boiler-plate directory structure exists (run Script 0 and Script 1).<br>
</li>
<li>Run the initial code block line-by-line before hitting <strong>Render</strong>.<br>
</li>
<li>Define all <code>global_vars</code> required by the boiler-plate.<br>
</li>
<li>If you are <em>not</em> flipping outcomes, stub the flip variables:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>flipped_names <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>flip_outcomes <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>flipped_list  <span class="ot">&lt;-</span> <span class="st">""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are not flipping forests, comment out or edit any boiler-plate code that assumes flips.</p>
</div>
</div>
<hr>
</section>
<section id="i-cannot-render-the-quarto-document-as-pdf" class="level3">
<h3 class="anchored" data-anchor-id="i-cannot-render-the-quarto-document-as-pdf">I cannot render the <code>quarto</code> document as PDF</h3>
<p>Install <strong>TinyTeX</strong> once:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, in your YAML front-matter, comment out unwanted formats. For PDF-only output:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">  # docx:</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">  #   default: false</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf</span><span class="kw">:</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pdf-engine</span><span class="kw">:</span><span class="at"> lualatex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="is-it-plagiarism-to-use-the-boiler-plate-outputs-verbatim" class="level3">
<h3 class="anchored" data-anchor-id="is-it-plagiarism-to-use-the-boiler-plate-outputs-verbatim">Is it plagiarism to use the boiler-plate outputs verbatim?</h3>
<p>No—provided you cite the source. The templates come from the NZAVS and EPIC (Bulbulia) Lab. Tailor the text to match your study and give credit. To edit, set <code>eval: false</code>, render, and copy-paste the plain text blocks.</p>
<hr>
</section>
<section id="i-do-not-have-a-boiler-plate-template-used-in-the-example-script" class="level3">
<h3 class="anchored" data-anchor-id="i-do-not-have-a-boiler-plate-template-used-in-the-example-script">I do not have a boiler-plate template used in the example script</h3>
<p>Run <strong>Script 0</strong> and <strong>Script 1</strong> from the start; they refresh every template.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>report<span class="sc">::</span><span class="fu">cite_packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  - Bulbulia J (2024). _margot: MARGinal Observational Treatment-effects_. doi:10.5281/zenodo.10907724 &lt;https://doi.org/10.5281/zenodo.10907724&gt;, R package version 1.0.52 Functions to obtain MARGinal Observational Treatment-effects from observational data., &lt;https://go-bayes.github.io/margot/&gt;.
  - Chang W (2023). _extrafont: Tools for Using Fonts_. doi:10.32614/CRAN.package.extrafont &lt;https://doi.org/10.32614/CRAN.package.extrafont&gt;, R package version 0.19, &lt;https://CRAN.R-project.org/package=extrafont&gt;.
  - Grolemund G, Wickham H (2011). "Dates and Times Made Easy with lubridate." _Journal of Statistical Software_, *40*(3), 1-25. &lt;https://www.jstatsoft.org/v40/i03/&gt;.
  - Müller K, Wickham H (2023). _tibble: Simple Data Frames_. doi:10.32614/CRAN.package.tibble &lt;https://doi.org/10.32614/CRAN.package.tibble&gt;, R package version 3.2.1, &lt;https://CRAN.R-project.org/package=tibble&gt;.
  - R Core Team (2025). _R: A Language and Environment for Statistical Computing_. R Foundation for Statistical Computing, Vienna, Austria. &lt;https://www.R-project.org/&gt;.
  - Wickham H (2016). _ggplot2: Elegant Graphics for Data Analysis_. Springer-Verlag New York. ISBN 978-3-319-24277-4, &lt;https://ggplot2.tidyverse.org&gt;.
  - Wickham H (2023). _forcats: Tools for Working with Categorical Variables (Factors)_. doi:10.32614/CRAN.package.forcats &lt;https://doi.org/10.32614/CRAN.package.forcats&gt;, R package version 1.0.0, &lt;https://CRAN.R-project.org/package=forcats&gt;.
  - Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common String Operations_. doi:10.32614/CRAN.package.stringr &lt;https://doi.org/10.32614/CRAN.package.stringr&gt;, R package version 1.5.1, &lt;https://CRAN.R-project.org/package=stringr&gt;.
  - Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K, Yutani H (2019). "Welcome to the tidyverse." _Journal of Open Source Software_, *4*(43), 1686. doi:10.21105/joss.01686 &lt;https://doi.org/10.21105/joss.01686&gt;.
  - Wickham H, François R, Henry L, Müller K, Vaughan D (2023). _dplyr: A Grammar of Data Manipulation_. doi:10.32614/CRAN.package.dplyr &lt;https://doi.org/10.32614/CRAN.package.dplyr&gt;, R package version 1.1.4, &lt;https://CRAN.R-project.org/package=dplyr&gt;.
  - Wickham H, Henry L (2025). _purrr: Functional Programming Tools_. doi:10.32614/CRAN.package.purrr &lt;https://doi.org/10.32614/CRAN.package.purrr&gt;, R package version 1.0.4, &lt;https://CRAN.R-project.org/package=purrr&gt;.
  - Wickham H, Hester J, Bryan J (2024). _readr: Read Rectangular Text Data_. doi:10.32614/CRAN.package.readr &lt;https://doi.org/10.32614/CRAN.package.readr&gt;, R package version 2.1.5, &lt;https://CRAN.R-project.org/package=readr&gt;.
  - Wickham H, Vaughan D, Girlich M (2024). _tidyr: Tidy Messy Data_. doi:10.32614/CRAN.package.tidyr &lt;https://doi.org/10.32614/CRAN.package.tidyr&gt;, R package version 1.3.1, &lt;https://CRAN.R-project.org/package=tidyr&gt;.
  - Xie Y (2025). _tinytex: Helper Functions to Install and Maintain TeX Live, and Compile LaTeX Documents_. R package version 0.57, &lt;https://github.com/rstudio/tinytex&gt;. Xie Y (2019). "TinyTeX: A lightweight, cross-platform, and easy-to-maintain LaTeX distribution based on TeX Live." _TUGboat_, *40*(1), 30-32. &lt;https://tug.org/TUGboat/Contents/contents40-1.html&gt;.</code></pre>
</div>
</div>


<!-- -->


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb14" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Hands On Working With Quarto Manuscript"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-MAY-13"</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> /Users/joseph/GIT/templates/bib/references.bib</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">    warnings: FALSE</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">    error: FALSE</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">    messages: FALSE</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: scroll</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight-style: Ayu</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools:</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: FALSE</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="an">html-math-method:</span><span class="co"> katex</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="an">reference-location:</span><span class="co"> margin</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="an">citation-location:</span><span class="co"> margin</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="an">cap-location:</span><span class="co"> margin</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="an">code-block-border-left:</span><span class="co"> true</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1: Quarto manuscripts</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">#read libraries</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(extrafont)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="fu">loadfonts</span>(<span class="at">device =</span> <span class="st">"all"</span>)</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"margot"</span>)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>**Required**</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>Download Quarto here: </span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use the <span class="in">`prelease`</span> version: https://quarto.org/docs/download/</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>**Optional**</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">@Bulbulia2024PracticalGuide</span><span class="co">] [link]</span>(https://osf.io/preprints/psyarxiv/uyg3d)</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">@hoffman2023</span><span class="co">] [link]</span>(https://arxiv.org/pdf/2304.09460.pdf)</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key concepts</span></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Entering bibliographic details</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Writing up your manuscript</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a><span class="fu"># Code review: YOUR analysis</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a><span class="ss">-  </span>Create a new Rstudio project</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a><span class="ss">-  </span>Modify *these* scripts</span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>::: {.callout-note-script-0}</span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Download full lab scripts 0</span><span class="co">](../laboratory/lab-10/00-setup-L10.R)</span></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>::: {.callout-note-script-1}</span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Download full lab scripts 1</span><span class="co">](../laboratory/ ../laboratory/lab-10/01-init-L10.R)</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>::: {.callout-note-script-2}</span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Download full lab scripts 2</span><span class="co">]( ../laboratory/lab-10/02-make-wide-L10.R)</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>::: {.callout-note-script-3}</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Download full lab scripts 3</span><span class="co">](../laboratory/lab-10/03-models-L10-v3.R)</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a><span class="fu">#  Quarto with `boilerplate`</span></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>::: {.callout-quarto-manuscript-template}</span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Download Quarto Template</span><span class="co">](../quarto/initial_quarto_document.qmd)</span></span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a><span class="fu">## Script 0: Set up your library/</span></span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a>Note -- rerun this script if you are missing updated templates, as they have been updated 23 May 2025</span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: true</span></span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: ../laboratory/lab-11/00-boilerplate-setup.R</span></span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-102"><a href="#cb14-102" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb14-103"><a href="#cb14-103" aria-hidden="true" tabindex="-1"></a>Type <span class="in">`y`</span> when R asks whether to overwrite the boilerplate files; this replaces them with the latest versions.</span>
<span id="cb14-104"><a href="#cb14-104" aria-hidden="true" tabindex="-1"></a>Press <span class="in">`n`</span> (or just hit Enter) to keep what you already have.</span>
<span id="cb14-105"><a href="#cb14-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-106"><a href="#cb14-106" aria-hidden="true" tabindex="-1"></a>Your own edits—such as custom rows in the measures table -- are stored elsewhere, so they will not be overwritten. One tap, no tears.</span>
<span id="cb14-107"><a href="#cb14-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-108"><a href="#cb14-108" aria-hidden="true" tabindex="-1"></a>Take-away: <span class="in">`y`</span> refreshes the templates; <span class="in">`n`</span> preserves the status quo.</span>
<span id="cb14-109"><a href="#cb14-109" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-110"><a href="#cb14-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-111"><a href="#cb14-111" aria-hidden="true" tabindex="-1"></a>This is how the the printout in your R console should look (depending on how recently you've run your script):</span>
<span id="cb14-112"><a href="#cb14-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-113"><a href="#cb14-113" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-114"><a href="#cb14-114" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># save imported data -------------------------------------------------------</span></span>
<span id="cb14-115"><a href="#cb14-115" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> <span class="fu">boilerplate_save</span>(</span>
<span id="cb14-116"><a href="#cb14-116" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   student_unified_db,</span>
<span id="cb14-117"><a href="#cb14-117" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">data_path     =</span> path_data,</span>
<span id="cb14-118"><a href="#cb14-118" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">create_backup =</span> <span class="cn">FALSE</span></span>
<span id="cb14-119"><a href="#cb14-119" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> )</span>
<span id="cb14-120"><a href="#cb14-120" aria-hidden="true" tabindex="-1"></a>ℹ preparing to save <span class="dv">6</span> databases</span>
<span id="cb14-121"><a href="#cb14-121" aria-hidden="true" tabindex="-1"></a>ℹ processing measures <span class="fu">database</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-122"><a href="#cb14-122" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> measures database</span>
<span id="cb14-123"><a href="#cb14-123" aria-hidden="true" tabindex="-1"></a>ℹ saving measures database to <span class="sc">/</span>Users<span class="sc">/</span>your_machine_path<span class="sc">-</span><span class="er">/</span>example_boilerplate_data<span class="sc">/</span>measures_db.rds</span>
<span id="cb14-124"><a href="#cb14-124" aria-hidden="true" tabindex="-1"></a>✔ saved measures database</span>
<span id="cb14-125"><a href="#cb14-125" aria-hidden="true" tabindex="-1"></a>ℹ processing methods <span class="fu">database</span> (<span class="dv">2</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-126"><a href="#cb14-126" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">1</span> new entries will be added<span class="sc">:</span></span>
<span id="cb14-127"><a href="#cb14-127" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">+</span> student_target_population</span>
<span id="cb14-128"><a href="#cb14-128" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span> <span class="dv">2</span> entries will be removed<span class="sc">:</span></span>
<span id="cb14-129"><a href="#cb14-129" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> target_population</span>
<span id="cb14-130"><a href="#cb14-130" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> sample</span>
<span id="cb14-131"><a href="#cb14-131" aria-hidden="true" tabindex="-1"></a>Save methods database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb14-132"><a href="#cb14-132" aria-hidden="true" tabindex="-1"></a>ℹ saving methods database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>methods_db.rds</span>
<span id="cb14-133"><a href="#cb14-133" aria-hidden="true" tabindex="-1"></a>✔ saved methods database</span>
<span id="cb14-134"><a href="#cb14-134" aria-hidden="true" tabindex="-1"></a>ℹ processing results <span class="fu">database</span> (<span class="dv">3</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-135"><a href="#cb14-135" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> results database</span>
<span id="cb14-136"><a href="#cb14-136" aria-hidden="true" tabindex="-1"></a>ℹ saving results database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>results_db.rds</span>
<span id="cb14-137"><a href="#cb14-137" aria-hidden="true" tabindex="-1"></a>✔ saved results database</span>
<span id="cb14-138"><a href="#cb14-138" aria-hidden="true" tabindex="-1"></a>ℹ processing discussion <span class="fu">database</span> (<span class="dv">4</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-139"><a href="#cb14-139" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">2</span> existing entries will be modified<span class="sc">:</span></span>
<span id="cb14-140"><a href="#cb14-140" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_authors_statement</span>
<span id="cb14-141"><a href="#cb14-141" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_ethics</span>
<span id="cb14-142"><a href="#cb14-142" aria-hidden="true" tabindex="-1"></a>Save discussion database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb14-143"><a href="#cb14-143" aria-hidden="true" tabindex="-1"></a>ℹ saving discussion database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>discussion_db.rds</span>
<span id="cb14-144"><a href="#cb14-144" aria-hidden="true" tabindex="-1"></a>✔ saved discussion database</span>
<span id="cb14-145"><a href="#cb14-145" aria-hidden="true" tabindex="-1"></a>ℹ processing appendix <span class="fu">database</span> (<span class="dv">5</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-146"><a href="#cb14-146" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> appendix database</span>
<span id="cb14-147"><a href="#cb14-147" aria-hidden="true" tabindex="-1"></a>ℹ saving appendix database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>appendix_db.rds</span>
<span id="cb14-148"><a href="#cb14-148" aria-hidden="true" tabindex="-1"></a>✔ saved appendix database</span>
<span id="cb14-149"><a href="#cb14-149" aria-hidden="true" tabindex="-1"></a>ℹ processing template <span class="fu">database</span> (<span class="dv">6</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-150"><a href="#cb14-150" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> template database</span>
<span id="cb14-151"><a href="#cb14-151" aria-hidden="true" tabindex="-1"></a>ℹ saving template database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>example_boilerplate_data<span class="sc">/</span>template_db.rds</span>
<span id="cb14-152"><a href="#cb14-152" aria-hidden="true" tabindex="-1"></a>✔ saved template database</span>
<span id="cb14-153"><a href="#cb14-153" aria-hidden="true" tabindex="-1"></a>✔ successfully saved all <span class="dv">6</span> databases</span>
<span id="cb14-154"><a href="#cb14-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-155"><a href="#cb14-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-156"><a href="#cb14-156" aria-hidden="true" tabindex="-1"></a><span class="fu">## Script 1: Adding/Revising Measures</span></span>
<span id="cb14-157"><a href="#cb14-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-158"><a href="#cb14-158" aria-hidden="true" tabindex="-1"></a>Note -- rerun this script if you are missing updated templates, as they have been updated 23 May 2025</span>
<span id="cb14-159"><a href="#cb14-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-162"><a href="#cb14-162" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb14-163"><a href="#cb14-163" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: true</span></span>
<span id="cb14-164"><a href="#cb14-164" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb14-165"><a href="#cb14-165" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: ../laboratory/lab-11/01-add-revise-measures.R</span></span>
<span id="cb14-166"><a href="#cb14-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-167"><a href="#cb14-167" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-168"><a href="#cb14-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-169"><a href="#cb14-169" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb14-170"><a href="#cb14-170" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>remember to type 'y' to save changes</span>
<span id="cb14-171"><a href="#cb14-171" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-172"><a href="#cb14-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-173"><a href="#cb14-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-174"><a href="#cb14-174" aria-hidden="true" tabindex="-1"></a>When re-running your scripts, the printout should allow you to save to your working database folder. </span>
<span id="cb14-175"><a href="#cb14-175" aria-hidden="true" tabindex="-1"></a>When saving tick 'y'</span>
<span id="cb14-176"><a href="#cb14-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-177"><a href="#cb14-177" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-178"><a href="#cb14-178" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># save a copy to avoid overwriting original --------------------------------</span></span>
<span id="cb14-179"><a href="#cb14-179" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> <span class="fu">boilerplate_save</span>(</span>
<span id="cb14-180"><a href="#cb14-180" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   unified_db,</span>
<span id="cb14-181"><a href="#cb14-181" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">data_path   =</span> path_final,</span>
<span id="cb14-182"><a href="#cb14-182" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">output_file =</span> <span class="st">"unified_db"</span></span>
<span id="cb14-183"><a href="#cb14-183" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> )</span>
<span id="cb14-184"><a href="#cb14-184" aria-hidden="true" tabindex="-1"></a>ℹ preparing to save <span class="dv">6</span> databases</span>
<span id="cb14-185"><a href="#cb14-185" aria-hidden="true" tabindex="-1"></a>ℹ processing measures <span class="fu">database</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-186"><a href="#cb14-186" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> measures database</span>
<span id="cb14-187"><a href="#cb14-187" aria-hidden="true" tabindex="-1"></a>ℹ saving measures database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>measures_db.rds</span>
<span id="cb14-188"><a href="#cb14-188" aria-hidden="true" tabindex="-1"></a>✔ saved measures database</span>
<span id="cb14-189"><a href="#cb14-189" aria-hidden="true" tabindex="-1"></a>ℹ processing methods <span class="fu">database</span> (<span class="dv">2</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-190"><a href="#cb14-190" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">1</span> new entries will be added<span class="sc">:</span></span>
<span id="cb14-191"><a href="#cb14-191" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">+</span> student_target_population</span>
<span id="cb14-192"><a href="#cb14-192" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span> <span class="dv">2</span> entries will be removed<span class="sc">:</span></span>
<span id="cb14-193"><a href="#cb14-193" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> target_population</span>
<span id="cb14-194"><a href="#cb14-194" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>   <span class="sc">-</span> sample</span>
<span id="cb14-195"><a href="#cb14-195" aria-hidden="true" tabindex="-1"></a>Save methods database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb14-196"><a href="#cb14-196" aria-hidden="true" tabindex="-1"></a>ℹ created backup at<span class="sc">:</span> <span class="er">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>methods_db.rds<span class="fl">.20250523</span>_131930.bak</span>
<span id="cb14-197"><a href="#cb14-197" aria-hidden="true" tabindex="-1"></a>ℹ saving methods database to  <span class="sc">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>methods_db.rds</span>
<span id="cb14-198"><a href="#cb14-198" aria-hidden="true" tabindex="-1"></a>✔ saved methods database</span>
<span id="cb14-199"><a href="#cb14-199" aria-hidden="true" tabindex="-1"></a>ℹ processing results <span class="fu">database</span> (<span class="dv">3</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-200"><a href="#cb14-200" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> results database</span>
<span id="cb14-201"><a href="#cb14-201" aria-hidden="true" tabindex="-1"></a>ℹ saving results database to  <span class="sc">/</span>Users<span class="sc">/</span>your_path<span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>results_db.rds</span>
<span id="cb14-202"><a href="#cb14-202" aria-hidden="true" tabindex="-1"></a>✔ saved results database</span>
<span id="cb14-203"><a href="#cb14-203" aria-hidden="true" tabindex="-1"></a>ℹ processing discussion <span class="fu">database</span> (<span class="dv">4</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-204"><a href="#cb14-204" aria-hidden="true" tabindex="-1"></a>ℹ <span class="dv">2</span> existing entries will be modified<span class="sc">:</span></span>
<span id="cb14-205"><a href="#cb14-205" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_authors_statement</span>
<span id="cb14-206"><a href="#cb14-206" aria-hidden="true" tabindex="-1"></a>ℹ   <span class="sc">~</span> student_ethics</span>
<span id="cb14-207"><a href="#cb14-207" aria-hidden="true" tabindex="-1"></a>Save discussion database with these changes? [y<span class="sc">/</span>n]<span class="sc">:</span> y</span>
<span id="cb14-208"><a href="#cb14-208" aria-hidden="true" tabindex="-1"></a>ℹ created backup at<span class="sc">:</span> <span class="er">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>discussion_db.rds<span class="fl">.20250523</span>_131933.bak</span>
<span id="cb14-209"><a href="#cb14-209" aria-hidden="true" tabindex="-1"></a>ℹ saving discussion database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>discussion_db.rds</span>
<span id="cb14-210"><a href="#cb14-210" aria-hidden="true" tabindex="-1"></a>✔ saved discussion database</span>
<span id="cb14-211"><a href="#cb14-211" aria-hidden="true" tabindex="-1"></a>ℹ processing appendix <span class="fu">database</span> (<span class="dv">5</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-212"><a href="#cb14-212" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> appendix database</span>
<span id="cb14-213"><a href="#cb14-213" aria-hidden="true" tabindex="-1"></a>ℹ saving appendix database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>appendix_db.rds</span>
<span id="cb14-214"><a href="#cb14-214" aria-hidden="true" tabindex="-1"></a>✔ saved appendix database</span>
<span id="cb14-215"><a href="#cb14-215" aria-hidden="true" tabindex="-1"></a>ℹ processing template <span class="fu">database</span> (<span class="dv">6</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb14-216"><a href="#cb14-216" aria-hidden="true" tabindex="-1"></a>ℹ no changes detected <span class="cf">in</span> template database</span>
<span id="cb14-217"><a href="#cb14-217" aria-hidden="true" tabindex="-1"></a>ℹ saving template database to <span class="sc">/</span>Users<span class="sc">/</span>joseph<span class="sc">/</span>GIT<span class="sc">/</span>psych<span class="dv">-434-2025</span><span class="sc">/</span>final_boilerplate_data<span class="sc">/</span>template_db.rds</span>
<span id="cb14-218"><a href="#cb14-218" aria-hidden="true" tabindex="-1"></a>✔ saved template database</span>
<span id="cb14-219"><a href="#cb14-219" aria-hidden="true" tabindex="-1"></a>✔ successfully saved all <span class="dv">6</span> databases</span>
<span id="cb14-220"><a href="#cb14-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-221"><a href="#cb14-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-222"><a href="#cb14-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-223"><a href="#cb14-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-224"><a href="#cb14-224" aria-hidden="true" tabindex="-1"></a><span class="fu">## Script 3: Setting Up Your Manuscript Document</span></span>
<span id="cb14-225"><a href="#cb14-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-226"><a href="#cb14-226" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb14-227"><a href="#cb14-227" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>save this document as a <span class="in">`.qmd`</span> file in a directory called 'quarto' (in your rstudio project)</span>
<span id="cb14-228"><a href="#cb14-228" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>- to render a document click 'Render'</span>
<span id="cb14-229"><a href="#cb14-229" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-230"><a href="#cb14-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-231"><a href="#cb14-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-232"><a href="#cb14-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-233"><a href="#cb14-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-234"><a href="#cb14-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-237"><a href="#cb14-237" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb14-238"><a href="#cb14-238" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: true</span></span>
<span id="cb14-239"><a href="#cb14-239" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb14-240"><a href="#cb14-240" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: ../quarto/initial_quarto_document.qmd</span></span>
<span id="cb14-241"><a href="#cb14-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-242"><a href="#cb14-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-243"><a href="#cb14-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-244"><a href="#cb14-244" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Pro Tip</span></span>
<span id="cb14-245"><a href="#cb14-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-246"><a href="#cb14-246" aria-hidden="true" tabindex="-1"></a>You can adjust figure by changing:</span>
<span id="cb14-247"><a href="#cb14-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-248"><a href="#cb14-248" aria-hidden="true" tabindex="-1"></a><span class="in">`#| fig-height: 16`</span> and <span class="in">`#| fig-width: 9`</span></span>
<span id="cb14-249"><a href="#cb14-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-250"><a href="#cb14-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-251"><a href="#cb14-251" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-252"><a href="#cb14-252" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-policy-6</span></span>
<span id="cb14-253"><a href="#cb14-253" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Decision Tree: {glued_policy_names_6}"</span></span>
<span id="cb14-254"><a href="#cb14-254" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb14-255"><a href="#cb14-255" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 16 # &lt;- change here</span></span>
<span id="cb14-256"><a href="#cb14-256" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 9 # &lt;- change here</span></span>
<span id="cb14-257"><a href="#cb14-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-258"><a href="#cb14-258" aria-hidden="true" tabindex="-1"></a>policy_plots[[<span class="dv">6</span>]]</span>
<span id="cb14-259"><a href="#cb14-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-260"><a href="#cb14-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-261"><a href="#cb14-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-262"><a href="#cb14-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-263"><a href="#cb14-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-264"><a href="#cb14-264" aria-hidden="true" tabindex="-1"></a><span class="fu">## What You Have Learned </span></span>
<span id="cb14-265"><a href="#cb14-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-266"><a href="#cb14-266" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to create a publication quality manuscript** </span>
<span id="cb14-267"><a href="#cb14-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-268"><a href="#cb14-268" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to create a workflow for references** </span>
<span id="cb14-269"><a href="#cb14-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-270"><a href="#cb14-270" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to import results into your manuscript** </span>
<span id="cb14-271"><a href="#cb14-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-272"><a href="#cb14-272" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to make graphs of your results (using) `margot`** </span>
<span id="cb14-273"><a href="#cb14-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-274"><a href="#cb14-274" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to report your results**</span>
<span id="cb14-275"><a href="#cb14-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-276"><a href="#cb14-276" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**How to interpret your results**</span>
<span id="cb14-277"><a href="#cb14-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-278"><a href="#cb14-278" aria-hidden="true" tabindex="-1"></a><span class="fu">## Frequently Asked Questions</span></span>
<span id="cb14-279"><a href="#cb14-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-280"><a href="#cb14-280" aria-hidden="true" tabindex="-1"></a><span class="fu">### Do I need to use `quarto` for making my report?</span></span>
<span id="cb14-281"><a href="#cb14-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-282"><a href="#cb14-282" aria-hidden="true" tabindex="-1"></a>No. The suggested workflow should make your life *easier*. If, after a fair trial -- *and* after asking us for help -- <span class="in">`quarto`</span> still feels like extra friction, switch to whatever you like (<span class="in">`rmarkdown`</span>, plain <span class="in">`R`</span> scripts, or even Word). The science matters more than the wrapper. </span>
<span id="cb14-283"><a href="#cb14-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-284"><a href="#cb14-284" aria-hidden="true" tabindex="-1"></a>👉 Quick-start: <span class="ot">&lt;https://quarto.org/docs/get-started/&gt;</span></span>
<span id="cb14-285"><a href="#cb14-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-286"><a href="#cb14-286" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-287"><a href="#cb14-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-288"><a href="#cb14-288" aria-hidden="true" tabindex="-1"></a><span class="fu">### I cannot save or retrieve files from folders</span></span>
<span id="cb14-289"><a href="#cb14-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-290"><a href="#cb14-290" aria-hidden="true" tabindex="-1"></a>When hunting path errors, ask yourself:</span>
<span id="cb14-291"><a href="#cb14-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-292"><a href="#cb14-292" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Packages** – have I updated everything, especially **`margot`** and **`here`**?  </span>
<span id="cb14-293"><a href="#cb14-293" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Clean slate** – did I restart R (⌘⇧F10) *and* rerun the data-prep scripts from the top?  </span>
<span id="cb14-294"><a href="#cb14-294" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Project root** – am I inside the correct **RStudio Project**? Check with <span class="in">`here::here()`</span>.  </span>
<span id="cb14-295"><a href="#cb14-295" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Search** – have I used *Edit → Find in Files* (⌘⇧F / Ctrl⇧F) to locate the object or path?  </span>
<span id="cb14-296"><a href="#cb14-296" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Data really there?** – do the objects exist in my data frame?</span>
<span id="cb14-297"><a href="#cb14-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-298"><a href="#cb14-298" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-299"><a href="#cb14-299" aria-hidden="true" tabindex="-1"></a><span class="co"># waves where `variable_name` was measured</span></span>
<span id="cb14-300"><a href="#cb14-300" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(df_nz_long, <span class="fu">table</span>(variable_name, wave))</span>
<span id="cb14-301"><a href="#cb14-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-302"><a href="#cb14-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-303"><a href="#cb14-303" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Permissions / cloud sync** – is the save folder writable *and* local? Dropbox/OneDrive may off-load files; right-click and choose *Make available offline*.</span>
<span id="cb14-304"><a href="#cb14-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-305"><a href="#cb14-305" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-306"><a href="#cb14-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-307"><a href="#cb14-307" aria-hidden="true" tabindex="-1"></a><span class="fu">### I cannot run `margot_causal_forest_parallel()`</span></span>
<span id="cb14-308"><a href="#cb14-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-309"><a href="#cb14-309" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Fallback** – does <span class="in">`margot_causal_forest()`</span> work? It is slower but prints progress.  </span>
<span id="cb14-310"><a href="#cb14-310" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Formula richness** – causal forests need many covariates <span class="co">[</span><span class="ot">@grf2024</span><span class="co">]</span>. Include the full demographic block.  </span>
<span id="cb14-311"><a href="#cb14-311" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Resources** – parallel forests spawn one worker per core. Keep some RAM free.  </span>
<span id="cb14-312"><a href="#cb14-312" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Reduce load** – try fewer trees or a smaller variable pool:</span>
<span id="cb14-313"><a href="#cb14-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-314"><a href="#cb14-314" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-315"><a href="#cb14-315" aria-hidden="true" tabindex="-1"></a>grf_defaults <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb14-316"><a href="#cb14-316" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed             =</span> <span class="dv">123</span>,</span>
<span id="cb14-317"><a href="#cb14-317" aria-hidden="true" tabindex="-1"></a>  <span class="at">stabilize.splits =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-318"><a href="#cb14-318" aria-hidden="true" tabindex="-1"></a>  <span class="at">num.trees        =</span> <span class="dv">1000</span>,  <span class="co"># fewer trees</span></span>
<span id="cb14-319"><a href="#cb14-319" aria-hidden="true" tabindex="-1"></a>  <span class="at">top_n_vars       =</span> <span class="dv">10</span>     <span class="co"># smaller policy-tree search space</span></span>
<span id="cb14-320"><a href="#cb14-320" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-321"><a href="#cb14-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-322"><a href="#cb14-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-323"><a href="#cb14-323" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-324"><a href="#cb14-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-325"><a href="#cb14-325" aria-hidden="true" tabindex="-1"></a><span class="fu">### I cannot run `margot_flip_forests_parallel()`</span></span>
<span id="cb14-326"><a href="#cb14-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-327"><a href="#cb14-327" aria-hidden="true" tabindex="-1"></a>First test the serial version <span class="in">`margot_flip_forests()`</span>. All parallel caveats above apply.</span>
<span id="cb14-328"><a href="#cb14-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-329"><a href="#cb14-329" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-330"><a href="#cb14-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-331"><a href="#cb14-331" aria-hidden="true" tabindex="-1"></a><span class="fu">### My R code is not working</span></span>
<span id="cb14-332"><a href="#cb14-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-333"><a href="#cb14-333" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Update packages (<span class="in">`pak::pak()`</span> is handy).  </span>
<span id="cb14-334"><a href="#cb14-334" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Re-download the example code and run from the top.  </span>
<span id="cb14-335"><a href="#cb14-335" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Read the full error and traceback (<span class="in">`rlang::last_trace()`</span>).  </span>
<span id="cb14-336"><a href="#cb14-336" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Compare with the example: what is different in *your* data or model?</span>
<span id="cb14-337"><a href="#cb14-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-338"><a href="#cb14-338" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-339"><a href="#cb14-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-340"><a href="#cb14-340" aria-hidden="true" tabindex="-1"></a><span class="fu">### I do not know how `margot` functions work</span></span>
<span id="cb14-341"><a href="#cb14-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-342"><a href="#cb14-342" aria-hidden="true" tabindex="-1"></a>See the indexed reference: <span class="ot">&lt;https://go-bayes.github.io/margot/reference/index.html&gt;</span></span>
<span id="cb14-343"><a href="#cb14-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-344"><a href="#cb14-344" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-345"><a href="#cb14-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-346"><a href="#cb14-346" aria-hidden="true" tabindex="-1"></a><span class="fu">### What is the recommended workflow for investigating heterogeneity?</span></span>
<span id="cb14-347"><a href="#cb14-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-348"><a href="#cb14-348" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**State your causal question.** Statistics cannot rescue an ill-posed question.  </span>
<span id="cb14-349"><a href="#cb14-349" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Estimate the **ATE** for the target population.  </span>
<span id="cb14-350"><a href="#cb14-350" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Compute **CATEs** and evaluate gain at 20 % and 50 % budget constraints with the **Qini** metric.  </span>
<span id="cb14-351"><a href="#cb14-351" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>For outcomes with convincing heterogeneity, fit shallow **policy trees** (depth = 2) to obtain transparent rules.  </span>
<span id="cb14-352"><a href="#cb14-352" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Optionally, compare pre-specified subgroups directly.  </span>
<span id="cb14-353"><a href="#cb14-353" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Report **RATE–AUTOC** and **RATE–Qini** tables in an online supplement.  </span>
<span id="cb14-354"><a href="#cb14-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-355"><a href="#cb14-355" aria-hidden="true" tabindex="-1"></a>*Take-away:* start from a clean, updated project, read errors carefully, and ensure each step answers *your* research question.</span>
<span id="cb14-356"><a href="#cb14-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-357"><a href="#cb14-357" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-358"><a href="#cb14-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-359"><a href="#cb14-359" aria-hidden="true" tabindex="-1"></a><span class="fu">### I cannot create a `quarto` document</span></span>
<span id="cb14-360"><a href="#cb14-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-361"><a href="#cb14-361" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Save the file with a <span class="in">`.qmd`</span> suffix **inside** the <span class="in">`quarto`</span> folder.  </span>
<span id="cb14-362"><a href="#cb14-362" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ensure the boiler-plate directory structure exists (run Script 0 and Script 1).  </span>
<span id="cb14-363"><a href="#cb14-363" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Run the initial code block line-by-line before hitting **Render**.  </span>
<span id="cb14-364"><a href="#cb14-364" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Define all <span class="in">`global_vars`</span> required by the boiler-plate.  </span>
<span id="cb14-365"><a href="#cb14-365" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>If you are *not* flipping outcomes, stub the flip variables:</span>
<span id="cb14-366"><a href="#cb14-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-367"><a href="#cb14-367" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-368"><a href="#cb14-368" aria-hidden="true" tabindex="-1"></a>flipped_names <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb14-369"><a href="#cb14-369" aria-hidden="true" tabindex="-1"></a>flip_outcomes <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb14-370"><a href="#cb14-370" aria-hidden="true" tabindex="-1"></a>flipped_list  <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb14-371"><a href="#cb14-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-372"><a href="#cb14-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-373"><a href="#cb14-373" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb14-374"><a href="#cb14-374" aria-hidden="true" tabindex="-1"></a>If you are not flipping forests, comment out or edit any boiler-plate code that assumes flips.</span>
<span id="cb14-375"><a href="#cb14-375" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb14-376"><a href="#cb14-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-377"><a href="#cb14-377" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-378"><a href="#cb14-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-379"><a href="#cb14-379" aria-hidden="true" tabindex="-1"></a><span class="fu">### I cannot render the `quarto` document as PDF</span></span>
<span id="cb14-380"><a href="#cb14-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-381"><a href="#cb14-381" aria-hidden="true" tabindex="-1"></a>Install **TinyTeX** once:</span>
<span id="cb14-382"><a href="#cb14-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-383"><a href="#cb14-383" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb14-384"><a href="#cb14-384" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb14-385"><a href="#cb14-385" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span>
<span id="cb14-386"><a href="#cb14-386" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-387"><a href="#cb14-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-388"><a href="#cb14-388" aria-hidden="true" tabindex="-1"></a>Then, in your YAML front-matter, comment out unwanted formats. For PDF-only output:</span>
<span id="cb14-389"><a href="#cb14-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-390"><a href="#cb14-390" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb14-391"><a href="#cb14-391" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb14-392"><a href="#cb14-392" aria-hidden="true" tabindex="-1"></a><span class="co">  # docx:</span></span>
<span id="cb14-393"><a href="#cb14-393" aria-hidden="true" tabindex="-1"></a><span class="co">  #   default: false</span></span>
<span id="cb14-394"><a href="#cb14-394" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf</span><span class="kw">:</span></span>
<span id="cb14-395"><a href="#cb14-395" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pdf-engine</span><span class="kw">:</span><span class="at"> lualatex</span></span>
<span id="cb14-396"><a href="#cb14-396" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-397"><a href="#cb14-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-398"><a href="#cb14-398" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-399"><a href="#cb14-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-400"><a href="#cb14-400" aria-hidden="true" tabindex="-1"></a><span class="fu">### Is it plagiarism to use the boiler-plate outputs verbatim?</span></span>
<span id="cb14-401"><a href="#cb14-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-402"><a href="#cb14-402" aria-hidden="true" tabindex="-1"></a>No—provided you cite the source. The templates come from the NZAVS and EPIC (Bulbulia) Lab. Tailor the text to match your study and give credit. To edit, set <span class="in">`eval: false`</span>, render, and copy-paste the plain text blocks.</span>
<span id="cb14-403"><a href="#cb14-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-404"><a href="#cb14-404" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb14-405"><a href="#cb14-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-406"><a href="#cb14-406" aria-hidden="true" tabindex="-1"></a><span class="fu">### I do not have a boiler-plate template used in the example script</span></span>
<span id="cb14-407"><a href="#cb14-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-408"><a href="#cb14-408" aria-hidden="true" tabindex="-1"></a>Run **Script 0** and **Script 1** from the start; they refresh every template.</span>
<span id="cb14-409"><a href="#cb14-409" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-410"><a href="#cb14-410" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-413"><a href="#cb14-413" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb14-414"><a href="#cb14-414" aria-hidden="true" tabindex="-1"></a>report<span class="sc">::</span><span class="fu">cite_packages</span>()</span>
<span id="cb14-415"><a href="#cb14-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb14-416"><a href="#cb14-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-417"><a href="#cb14-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-418"><a href="#cb14-418" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>