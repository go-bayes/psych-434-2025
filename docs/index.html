<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.5">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joseph Bulbulia">

<title>Psych 434: Conducting Research Across Cultures – PSYC 434 Conducting Research Across Cultures: Trimester 1, 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ff4371ef257df69894857e99c6ad0d06.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-79108a0fc1995748cbd19a5b0e3e3e7c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PSYC 434 Conducting Research Across Cultures: Trimester 1, 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./content/course-outline.html"> 
<span class="menu-text">Course Outline</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-content" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Content</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-content">    
        <li>
    <a class="dropdown-item" href="./content/glossary.pdf">
 <span class="dropdown-text">Glossary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/course-outline.html">
 <span class="dropdown-text">Course Outline</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/01-content.html">
 <span class="dropdown-text">Week 1: Course Introduction - R (installing packages)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/02-content.html">
 <span class="dropdown-text">Week 2: Causal Diagrams - Elementary Structures and Rules - R (using the interface)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/03-content.html">
 <span class="dropdown-text">Week 3: Causal Diagrams - Confounding Bias - R (regression/simulation)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/04-content.html">
 <span class="dropdown-text">Week 4: Causal Diagrams - Interaction, Measurement Bias, Selection Bias - R (regression/simulation)</span></a>
  </li>  
        <li class="dropdown-header">Week 5: Quiz - R (regression/simulation/reporting)</li>
        <li>
    <a class="dropdown-item" href="./content/06-content.html">
 <span class="dropdown-text">Week 6: Causal Inference - Key Concepts ATE - R (regression/simulation: ATE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/07-content.html">
 <span class="dropdown-text">Week 7: Causal Inference - Key Concept CATE - R (regression/simulation: ATE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/08-content.html">
 <span class="dropdown-text">Week 8: Causal Inference - Estimation of ATE and CATE - R and LaTeX</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/09-content.html">
 <span class="dropdown-text">Week 9: Hands On: Full Analysis in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/10-content.html">
 <span class="dropdown-text">Week 10: Working with Quarto Documents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/11-content.html">
 <span class="dropdown-text">Week 11: Measurement: Factor Analysis, CFA, MultiGroup CFA, Partial Invariance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./content/12-content.html">
 <span class="dropdown-text">Week 12: Measurement: Conceptual Problems</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Psych 434: Conducting Research Across Cultures</h1>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Joseph Bulbulia <a href="mailto:joseph.bulbulia@vuw.ac.nz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-5861-2056" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Victoria University of Wellington, New Zealand
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#welcome-to-the-psych-434-lecture-website" id="toc-welcome-to-the-psych-434-lecture-website" class="nav-link active" data-scroll-target="#welcome-to-the-psych-434-lecture-website">Welcome to the Psych 434 lecture website</a>
  <ul class="collapse">
  <li><a href="#class-times-and-locations" id="toc-class-times-and-locations" class="nav-link" data-scroll-target="#class-times-and-locations">Class times and locations</a></li>
  <li><a href="#contents-tab" id="toc-contents-tab" class="nav-link" data-scroll-target="#contents-tab">Contents Tab</a></li>
  <li><a href="#names-and-contact-details" id="toc-names-and-contact-details" class="nav-link" data-scroll-target="#names-and-contact-details">Names and contact details</a></li>
  <li><a href="#assignments-and-due-dates" id="toc-assignments-and-due-dates" class="nav-link" data-scroll-target="#assignments-and-due-dates">Assignments and due dates</a></li>
  <li><a href="#course-description" id="toc-course-description" class="nav-link" data-scroll-target="#course-description">Course Description</a></li>
  <li><a href="#course-learning-objectives" id="toc-course-learning-objectives" class="nav-link" data-scroll-target="#course-learning-objectives">Course Learning Objectives</a></li>
  <li><a href="#assignments-and-due-dates-1" id="toc-assignments-and-due-dates-1" class="nav-link" data-scroll-target="#assignments-and-due-dates-1">Assignments and due dates</a>
  <ul class="collapse">
  <li><a href="#assessment-1-class-participation" id="toc-assessment-1-class-participation" class="nav-link" data-scroll-target="#assessment-1-class-participation">Assessment 1: Class Participation</a></li>
  <li><a href="#assessment-2-in-class-test" id="toc-assessment-2-in-class-test" class="nav-link" data-scroll-target="#assessment-2-in-class-test">Assessment 2: In-class Test</a></li>
  </ul></li>
  <li><a href="#test-guidelines" id="toc-test-guidelines" class="nav-link" data-scroll-target="#test-guidelines">Test Guidelines</a></li>
  <li><a href="#take-home-assessment" id="toc-take-home-assessment" class="nav-link" data-scroll-target="#take-home-assessment">Take-Home Assessment</a>
  <ul class="collapse">
  <li><a href="#assessment-criteria" id="toc-assessment-criteria" class="nav-link" data-scroll-target="#assessment-criteria">Assessment criteria</a></li>
  <li><a href="#assessment-3-research-report" id="toc-assessment-3-research-report" class="nav-link" data-scroll-target="#assessment-3-research-report">Assessment 3: Research Report</a></li>
  <li><a href="#extensions-and-penalties" id="toc-extensions-and-penalties" class="nav-link" data-scroll-target="#extensions-and-penalties">Extensions and Penalties</a></li>
  <li><a href="#materials-and-equipment" id="toc-materials-and-equipment" class="nav-link" data-scroll-target="#materials-and-equipment">Materials and Equipment</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="welcome-to-the-psych-434-lecture-website" class="level1">
<h1>Welcome to the Psych 434 lecture website</h1>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Accessing Lectures and Readings
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Seminar Time/Location</strong>: Tuesdays, 9:00-11:50am <strong>Easterfield Building Room: EA201</strong></p></li>
<li><p><strong>Course Outline</strong>: find a detailed schedule of topics, readings, and assignments in the <code>Course Outline</code> tab.</p></li>
<li><p><strong>Readings</strong>: links to readings are directly within the <code>Course Outline</code> tab, essential for lecture preparation.</p></li>
<li><p><strong>Lecture Materials</strong>: access slides, video recordings, and more under the <code>Content</code> tab, organised by week for ease of use.</p></li>
<li><p><strong>Tests</strong>: in the same room as the seminar</p></li>
</ul>
</div>
</div>
<section id="class-times-and-locations" class="level2">
<h2 class="anchored" data-anchor-id="class-times-and-locations">Class times and locations</h2>
<p><strong>Test/Quiz Location</strong> <strong>IN CLASS</strong></p>
</section>
<section id="contents-tab" class="level2">
<h2 class="anchored" data-anchor-id="contents-tab">Contents Tab</h2>
<p>The <code>Contents</code> tab offers direct access to weekly seminar and lab materials, including lecture outlines and lab resources.</p>
<ul>
<li><p>Access it from the top right of the course platform by selecting the appropriate week.</p></li>
<li><p>Lab materials are available one week before the lecture; seminar review materials post-seminar.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-2213e3d39ef1ae0e14f6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2213e3d39ef1ae0e14f6">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[-41.2889,174.7681,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"Easterfield",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-41.2889,-41.2889],"lng":[174.7681,174.7681]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="names-and-contact-details" class="level2">
<h2 class="anchored" data-anchor-id="names-and-contact-details">Names and contact details</h2>
<p><strong>Course Coordinator</strong> Prof Joseph Bulbulia <a href="mailto:joseph.bulbulia@vuw.ac.nz" class="email">joseph.bulbulia@vuw.ac.nz</a></p>
<p><strong>Course Coordinator’s Office</strong> EA324</p>
<p><strong>R Help from </strong> Dr.Inkuk Kim <a href="mailto:inkuk.kim@vuw.ac.nz" class="email">inkuk.kim@vuw.ac.nz</a></p>
</section>
<section id="assignments-and-due-dates" class="level2">
<h2 class="anchored" data-anchor-id="assignments-and-due-dates">Assignments and due dates</h2>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<table class="table table-hover caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Assessment</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CLOs</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Percent</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Due</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Class participation</td>
<td style="text-align: left;">1,2,3</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">Weekly</td>
</tr>
<tr class="even">
<td style="text-align: left;">Test 1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">25 March (w5)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Take Home Assignment</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">6 May (w10)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Research Report</td>
<td style="text-align: left;">1,2,3</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;">3 June (w12)</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="course-description" class="level2">
<h2 class="anchored" data-anchor-id="course-description">Course Description</h2>
<p>The official description:</p>
<p><em>This course will focus on theoretical and practical challenges for conducting research involving individuals from more than one cultural background or ethnicity. Topics are likely to include defining and measuring culture; developing culture-sensitive studies, choice of language and translation; communication styles and bias; questionnaire and interview design; qualitative and quantitative data analysis for cultural and cross-cultural research; minorities, power and ethics in cross-cultural research; and ethno-methodologies and indigenous research methodologies. Appropriate background for this course: PSYC 338.</em></p>
</section>
<section id="course-learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="course-learning-objectives">Course Learning Objectives</h2>
<p><strong>Preamble:</strong> in this advanced course, students will develop foundational skills in cross-cultural psychological research with a strong emphasis on causal inference, a new and critical methodological approach.</p>
<ol type="1">
<li><p><strong>Programming in R</strong> students will learn the basics of programming in the statistical language R, gaining essential computational tools for psychological research. The skills you acquire will lay the foundation for applying data analysis techniques in a causal inference framework and beyond.</p></li>
<li><p><strong>Understanding Causal Inference.</strong> students will develop a robust understanding of causal inference concepts and approaches, with particular emphasis on how they mitigate common pitfalls in cross-cultural research. We will focus on designing studies, analysing data, and drawing strong conclusions about cause-and-effect relationships across cultures.</p></li>
<li><p><strong>Understanding Measurement in Comparative Settings.</strong> students will learn techniques for constructing and validating psychometrically sound measures across diverse cultures. We will examine how to ensure measurements are reliable, cross-culturally valid, and aligned with theoretical constructs while focusing strongly on causal reasoning.</p></li>
</ol>
</section>
<section id="assignments-and-due-dates-1" class="level2">
<h2 class="anchored" data-anchor-id="assignments-and-due-dates-1">Assignments and due dates</h2>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<table class="table table-hover caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Assessment</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CLOs</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Percent</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Due</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Class participation</td>
<td style="text-align: left;">1,2,3</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">Weekly</td>
</tr>
<tr class="even">
<td style="text-align: left;">Test (1)</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">25 March (w5)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Take Home (2)</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">13 May (w10)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Research Report</td>
<td style="text-align: left;">1,2,3</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;">3 June (w13)</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="assessment-1-class-participation" class="level3">
<h3 class="anchored" data-anchor-id="assessment-1-class-participation">Assessment 1: Class Participation</h3>
<ul>
<li><ol type="a">
<li>Class attendance and active participation.</li>
</ol></li>
<li><ol start="2" type="a">
<li>Lab attendance and active participation.</li>
</ol></li>
<li><ol start="3" type="a">
<li>Presentation (Week 10)</li>
</ol></li>
</ul>
</section>
<section id="assessment-2-in-class-test" class="level3">
<h3 class="anchored" data-anchor-id="assessment-2-in-class-test">Assessment 2: In-class Test</h3>
</section>
</section>
<section id="test-guidelines" class="level2">
<h2 class="anchored" data-anchor-id="test-guidelines">Test Guidelines</h2>
<ul>
<li>Test duration is one hour. The allocated time is nearly two hours.</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>THE TEST IS IN CLASS</strong> (i.e.&nbsp;come to class with a writing instrument).</li>
</ul>
</div>
</div>
<ul>
<li>Each lecture starts and ends with key concept definitions and reviews for the test.</li>
<li>R or RStudio knowledge isn’t part of the test. R support aims to enhance research report skills.</li>
<li>Tests are conducted in the lecture room without the aids of notes, a computer, or a phone.</li>
<li>Required: pen/pencil.</li>
<li><strong>Test (50 minutes, total time allowed: 1 hour 50 minutes)</strong>:
<ul>
<li>Focuses on revising core statistical and methodological concepts.</li>
<li>Aims to refresh basic statistical knowledge foundational for later course material.</li>
</ul></li>
</ul>
</section>
<section id="take-home-assessment" class="level2">
<h2 class="anchored" data-anchor-id="take-home-assessment">Take-Home Assessment</h2>
<ul>
<li>Take Home Asssessment (~6 Hours) due March 12**:</li>
<li>Builds upon the course concepts, emphasising the application of basic conceptual, statistical, and theoretical knowledge as applied to your research question.</li>
<li>Specifically, how to formulate a research question and develop a strategy for answering it.</li>
</ul>
<p><strong>Task</strong> - Write a draft Introduction to your final writing assessment. - Write a draft Method section for your writing assessment. - Prepare an in-class presentation of 10 minutes summaring your study. - You are <strong>encouraged</strong> to use AI, and you will be marked as if you are using Ai. - Note that even the best AI models make mistakes and hallucinate, particularly in causal inference. You must therefore internalise understanding. <strong>Be warned: I will mark hallucinations and errors harshly.</strong> - Although I encourage you to use AI, I also encourage you to you write in your own voice. Your self-expression will make you interesting, and employable. Writing in your own voice will cultivate this part of you.</p>
<section id="assessment-criteria" class="level3">
<h3 class="anchored" data-anchor-id="assessment-criteria">Assessment criteria</h3>
<section id="stating-the-problem" class="level4">
<h4 class="anchored" data-anchor-id="stating-the-problem">Stating the problem</h4>
<ul>
<li><strong>State your question:</strong> is your question clearly stated?</li>
<li><strong>Relevance:</strong> have you explained its <em>scientific</em> importance?</li>
<li><strong>Causality:</strong> Is your question causal?</li>
<li><strong>Subgroup analysis:</strong> does your question involve a subgroups (e.g., cultural group)? Which?</li>
<li><strong>Explain the framework:</strong> Have you explained the causal inference framework in a way that is comprehensible to non-specialists?</li>
<li><strong>Ethics/Policy interests</strong> have you explained how this question might practically affect people?</li>
<li><strong>Data source:</strong> are your data from the NZAVS simulated data set? (if not, consult with me)</li>
<li><strong>Data waves:</strong> are your data using three waves?</li>
</ul>
</section>
<section id="determining-the-outcome" class="level4">
<h4 class="anchored" data-anchor-id="determining-the-outcome">Determining the Outcome</h4>
<ul>
<li><strong>Outcome variable:</strong> is your outcome variable <em>Y</em> well-defined?</li>
<li><strong>Multiple outcomes:</strong> do you assess multiple outcomes are are these well-defined?</li>
<li><strong>Outcome relevance:</strong> can you explain how the outcome variable/s relate to your question?</li>
<li><strong>Outcome type:</strong> is your outcome binary and rare? … etc.</li>
<li><strong>Outcome timing:</strong> does your outcome appear after your exposure?</li>
</ul>
</section>
<section id="determining-the-exposure" class="level4">
<h4 class="anchored" data-anchor-id="determining-the-exposure">Determining the Exposure</h4>
<ul>
<li><strong>Exposure variable:</strong> is your exposure variable <em>A</em> well-defined?</li>
<li><strong>Multiple exposures:</strong> are there multiple exposures? (If yes, for this study, reassess).</li>
<li><strong>Exposure relevance:</strong> have you explained how the exposure variable relates to your question?</li>
<li><strong>Positivity:</strong> can we intervene on the exposure at all levels of the covariates?</li>
<li><strong>Consistency:</strong> can we interpret what it means to intervene on the exposure?</li>
<li><strong>Exchangeability:</strong> are there different versions of the exposure conditionally exchangeable given measured baseline confounders?</li>
<li><strong>Exposure type:</strong> is the exposure binary or continuous?</li>
<li><strong>Shift intervention</strong>: do you contrast static interventions or modified treatment policies?</li>
<li><strong>Exposure timing:</strong> does your exposure appear before the outcome? (It should.)</li>
</ul>
</section>
<section id="accounting-for-confounders" class="level4">
<h4 class="anchored" data-anchor-id="accounting-for-confounders">Accounting for Confounders</h4>
<ul>
<li><strong>Baseline confounders:</strong> Have you defined your baseline confounders <em>L</em>?</li>
<li><strong>Justification:</strong> Can you explain how the baseline confounders could affect both <em>A</em> and <em>Y</em>?</li>
<li><strong>Timing:</strong> Are the baseline confounders measured before the exposure?</li>
<li><strong>Inclusion:</strong> Is the baseline measure of the exposure and the baseline outcome included in the set of baseline confounders?</li>
<li><strong>Sufficiency:</strong> Are the baseline confounders sufficient to ensure balance on the exposure, such that <em>A</em> is independent of <em>Y</em> given <em>L</em>? If not, explain your sensitivity analysis (E-values)</li>
<li><strong>Confounder type:</strong> Are the confounders continuous or binary? If so, consider converting them to z-scores. If they are categorical with three or more levels, do not convert them to z-scores, but rather use one-hot encoding (see lecture 9.)</li>
</ul>
</section>
<section id="drawing-a-causal-diagram-with-unmeasured-confounders" class="level4">
<h4 class="anchored" data-anchor-id="drawing-a-causal-diagram-with-unmeasured-confounders">Drawing a Causal Diagram with Unmeasured Confounders</h4>
<ul>
<li><strong>Causal diagram:</strong> Have you drawn a causal diagram (DAG) to highlight both measured and unmeasured sources of confounding?</li>
<li><strong>Measurement error:</strong> Have you described potential biases from measurement errors?</li>
<li><strong>Temporal order:</strong> Does your DAG have time indicators to ensure correct temporal order?</li>
<li><strong>Time consistency:</strong> Is your DAG organized so that time follows in a consistent direction?</li>
</ul>
</section>
<section id="identifying-the-estimand" class="level4">
<h4 class="anchored" data-anchor-id="identifying-the-estimand">Identifying the Estimand</h4>
<ul>
<li>What is your casual contrast?</li>
<li>Have you stated your causal contrast clearly?</li>
</ul>
<!-- **Note**: Do not be alarmed by this math if you are reading this material before I have introduced these concepts. All will be made clear, I promise.  -->
<!-- -   **Causal Estimand:** Is your causal estimand one of the following: -->
<!-- $$ATE_{G,(A,A')} = E[Y(1) - Y(0)|G, L]$$ -->
<!-- $$ATE_{G,(A/A')} = \frac{E[Y(1)|G, L]}{E[Y(0)|G, L]}$$ -->
<!-- A modified treatment policy, e.g. -->
<!-- $$ -->
<!-- \mathbf{d}^\lambda (a_1) = \begin{cases} 4 & \text{if } a_1 < 4 \\  -->
<!-- a_1 & \text{otherwise} \end{cases} -->
<!-- $$ -->
<!-- $$ -->
<!-- \mathbf{d}^\phi (a_1) = \begin{cases} 0 & \text{if } a_1 > 0 \\  -->
<!-- a_1 & \text{otherwise} \end{cases} -->
<!-- $$ -->
<!-- $$ g' = \text{Intervention 1 - Intervention 2} = E[Y(\mathbf{d}^\lambda) - Y(\mathbf{d}^\phi)] $$ -->
<!-- $$ g'' = \text{Intervention 1 - Intervention 2} = E[Y(\mathbf{d}^\lambda) - Y(\mathbf{d}^\phi)] $$ -->
<!-- $$ -->
<!-- {\delta}(g) ={g'} - {g''} -->
<!-- $$ -->
</section>
<section id="understanding-source-and-target-populations" class="level4">
<h4 class="anchored" data-anchor-id="understanding-source-and-target-populations">Understanding Source and Target Populations</h4>
<ul>
<li><strong>Populations identified:</strong> Have you explained how your sample relates to your target populations?</li>
</ul>
</section>
<section id="set-eligibility-criteria" class="level4">
<h4 class="anchored" data-anchor-id="set-eligibility-criteria">Set Eligibility Criteria</h4>
<ul>
<li><strong>Criteria stated:</strong> Have you stated the eligibility criteria for the study?</li>
</ul>
</section>
<section id="describe-sample-characteristics" class="level4">
<h4 class="anchored" data-anchor-id="describe-sample-characteristics">Describe Sample Characteristics</h4>
<ul>
<li><p><strong>Descriptive statistics:</strong> have you provided descriptive statistics for demographic information taken at baseline?</p></li>
<li><p><strong>Exposure change:</strong> Have you described the magnitudes of change in the exposure from baseline to the exposure interval</p></li>
<li><p><strong>References:</strong> Have you included references for more information about the sample (e.g.&nbsp;the NZAVS website)? I should have.</p></li>
<li><p><strong>DATA ARE SIMULATED</strong>: Have you made it clear you are working with simulated data?</p></li>
</ul>
</section>
<section id="addressing-missing-data" class="level4">
<h4 class="anchored" data-anchor-id="addressing-missing-data">Addressing Missing Data</h4>
<ul>
<li><strong>Missing data checks:</strong> Have you checked for missing data?</li>
<li><strong>Missing data plan:</strong> If there are missing data, have you described how you will address the problem? (IPCW, see week 9)</li>
</ul>
</section>
<section id="selecting-the-model-approach" class="level4">
<h4 class="anchored" data-anchor-id="selecting-the-model-approach">Selecting the Model Approach</h4>
<ul>
<li><strong>Approach decision:</strong> G-computation, IPTW, or Doubly-Robust Estimation?</li>
<li><strong>Model specification:</strong> Model Specification?</li>
<li><strong>Machine Learning</strong>: have you explained how machine learning works?</li>
<li><strong>Outcome Specifics:</strong> If the outcome is rare and binary, have you specified logistic regression? If it’s continuous, have I considered converting it to z-scores?</li>
<li><strong>Sensitivity analysis:</strong> Have you described your sensitivity analysis (e.g.&nbsp;E-values.)</li>
</ul>
<p>Note most of these tasks can be ticked off in a sentence or two, but all need to be covered.</p>
<p><strong>Length:</strong> ~ 1,000 - 2,000 words (note it is a draft introduction and draft methods section).</p>
</section>
</section>
<section id="assessment-3-research-report" class="level3">
<h3 class="anchored" data-anchor-id="assessment-3-research-report">Assessment 3: Research Report</h3>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Research Report Instructions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>We will supply the data.</li>
<li>Lab sessions are designed to support you in this assignment.</li>
<li>We assume no statistical background.</li>
</ul>
</div>
</div>
<ul>
<li><p><strong>Title</strong>: “Causal Inference in Cultural Psychology: Examining Exposure Effects on Dimensions of Well-being Modified by Cultural or Sociodemographic Categories”.</p></li>
<li><p><strong>Objective</strong>:</p>
<ul>
<li>To quantify the causal effect of a specific exposure on well-being dimensions, modified by sociodemographic categories (<code>born_nz</code>, <code>eth_cat</code>, <code>big_doms</code>, <code>gen_cohort</code>) using the NZAVS longitudinal synthetic dataset.</li>
</ul></li>
<li><p><strong>Instructions</strong>:</p>
<ol type="1">
<li><strong>Theoretical Interest and Research Question</strong>:
<ul>
<li>Describe the significance of your chosen exposure and its potential impact on the selected outcomes, modified by the cultural or sociodemographic category.</li>
<li>State the research question clearly.</li>
</ul></li>
<li><strong>Directed Acyclic Graph (DAG)</strong>:
<ul>
<li>Construct a DAG illustrating the relationships between exposure, outcomes, sociodemographic category, and potential bias sources. Ensure clarity in labelling.</li>
</ul></li>
<li><strong>Confounding Control Strategy</strong>:
<ul>
<li>Outline your strategy for confounding control, justifying the chosen confounders.</li>
</ul></li>
<li><strong>Measurement Biases</strong>:
<ul>
<li>Address and analyse measurement biases as relevant.</li>
</ul></li>
<li><strong>Assumptions and Statistical Models</strong>:
<ul>
<li>Discuss the assumptions of your causal inference approach and your statistical model, including their limitations.</li>
</ul></li>
</ol></li>
<li><p><strong>Requirements</strong>:</p>
<ul>
<li>Introduction: 1,500 words <strong>limit.</strong></li>
<li>Conclusion: 1,500 words <strong>limit.</strong></li>
<li>Method and Results sections should be concise; no specific word limit.</li>
<li>Use any useful sources, citing appropriately to avoid academic misconduct.</li>
<li>Follow APA style for citations and references.</li>
<li>Include tables/figures as needed.</li>
<li>Submit as a single PDF, including R code in an appendix.</li>
</ul></li>
<li><p><strong>Evaluation Criteria</strong>:</p>
<ul>
<li>Clarity of theoretical framework, research question, and design.</li>
<li>Validity of confounding control strategy.</li>
<li>Discussion on assumptions and statistical models.</li>
<li>Organisation and presentation quality.</li>
</ul></li>
</ul>
</section>
<section id="extensions-and-penalties" class="level3">
<h3 class="anchored" data-anchor-id="extensions-and-penalties">Extensions and Penalties</h3>
<ul>
<li><strong>Extensions</strong>:
<ul>
<li>Negotiate a new due date by writing (email) before <strong>March 11th, 2025</strong>, if necessary.</li>
<li>Every reasonable request will be accepted (e.g.&nbsp;too many assignments falling in the same week, you want another week to complete.)</li>
</ul></li>
<li><strong>Penalties</strong>:
<ul>
<li>Late submissions incur a one full grade-per-week penalty, e.g.&nbsp;if late by one day, B <span class="math inline">\to</span> C, one week later, C <span class="math inline">\to</span> D.</li>
<li>Over-length assignments will be penalised.</li>
</ul></li>
<li><strong>Unforeseeable Events</strong>:
<ul>
<li>Extensions after March 11th will require evidence (e.g., medical certificate).</li>
</ul></li>
</ul>
</section>
<section id="materials-and-equipment" class="level3">
<h3 class="anchored" data-anchor-id="materials-and-equipment">Materials and Equipment</h3>
<ul>
<li>Bring a laptop with R and RStudio installed for data analysis sessions. Contact the instructor if you lack computer access.</li>
<li>For in-class tests, bring a writing utensil. Again, electronic devices are <strong>not permitted.</strong></li>
</ul>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>